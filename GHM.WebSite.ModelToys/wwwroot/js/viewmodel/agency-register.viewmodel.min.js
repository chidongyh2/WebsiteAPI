function AngencyRegisterViewModel(){var n=this;n.fullName=ko.observable();n.phoneNumber=ko.observable();n.address=ko.observable();n.email=ko.observable();n.idCard=ko.observable();n.idCardDate=ko.observable();n.idCardAddress=ko.observable();n.agencyName=ko.observable();n.addressRegistered=ko.observable();n.website=ko.observable();n.length=ko.observable(0);n.width=ko.observable(0);n.height=ko.observable(0);n.startTime=ko.observable();n.listProvince=ko.observableArray([]);n.listDistrict=ko.observableArray([]);n.provinceId=ko.observable();n.provinceName=ko.observable();n.districtId=ko.observable();n.districtName=ko.observable();n.isSending=ko.observable(!1);n.totalArea=ko.computed(function(){return n.length()*n.width()});n.provinceId.subscribe(function(t){if(t){n.provinceId(t);var i=_.find(n.listProvince(),function(n){return n.id===t});i&&(n.provinceName(i.name),$.get("/get-distinct",{provinceId:t},function(t){n.listDistrict(t)}))}else n.listDistrict([]),n.districtId(),n.districtName()});n.districtId.subscribe(function(t){var i=_.find(n.listDistrict(),function(n){return n.id===t});i&&n.districtName(i.name)});n.save=function(){$("#formInsertUpdate").valid()&&(n.isSending(!0),$.post("/dang-ky-dai-ly",{fullName:n.fullName(),phoneNumber:n.phoneNumber(),email:n.email(),address:n.address(),idCard:n.idCard(),idCardDate:n.idCardDate(),idCardAddress:n.idCardAddress(),agencyName:n.agencyName(),provinceId:n.provinceId(),provinceName:n.provinceName(),districtId:n.districtId(),districtName:n.districtName(),addressRegistered:n.addressRegistered(),length:n.length(),width:n.width(),height:n.height(),totalArea:n.totalArea(),startTime:n.startTime(),website:n.website(),__RequestVerificationToken:token},function(t){if(n.isSending(!1),t===-1){toastr.error("Số điện thoại đã được đăng ký");return}if(t>0){$("#popupsuccessfulModal").modal("show");n.fullName();n.phoneNumber();n.address();n.email();n.idCard();n.idCardDate();n.idCardAddress();n.agencyName();n.addressRegistered();n.website();n.length(0);n.width(0);n.height(0);n.startTime();n.listProvince([]);n.listDistrict([]);n.provinceId();n.provinceName();n.districtId();n.districtName();return}toastr.error(t)}))};$(document).ready(function(){n.listProvince(listProvince);$("#startTimePicker").datetimepicker({icons:{time:"fa fa-calendar",date:"fa fa-calendar",up:"fa fa-chevron-circle-up",down:"fa fa-chevron-circle-down",next:"fa fa-chevron-circle-right",previous:"fa fa-chevron-circle-left"}}).on("dp.change",function(){n.startTime(moment($("#startTimePicker").val()).format("DD/MM/YYYY"))});$("#idCardDateTimePicker").datetimepicker({icons:{time:"fa fa-calendar",date:"fa fa-calendar",up:"fa fa-chevron-circle-up",down:"fa fa-chevron-circle-down",next:"fa fa-chevron-circle-right",previous:"fa fa-chevron-circle-left"}}).on("dp.change",function(){n.idCardDate(moment($("#idCardDateTimePicker").val()).format("DD/MM/YYYY"))})})}var viewModel=new AngencyRegisterViewModel;ko.applyBindings(viewModel,document.getElementsByClassName("register-agency")[0]);