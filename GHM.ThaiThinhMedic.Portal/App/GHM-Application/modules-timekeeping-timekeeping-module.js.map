{"version":3,"sources":["webpack:///./src/app/modules/timekeeping/config/general/timekeeping-general.component.html","webpack:///./src/app/modules/timekeeping/config/general/timekeeping-general.component.ts","webpack:///./src/app/modules/timekeeping/config/holiday/holiday.model.ts","webpack:///./src/app/modules/timekeeping/config/holiday/timekeeping-config-holiday.component.html","webpack:///./src/app/modules/timekeeping/config/holiday/timekeeping-config-holiday.component.ts","webpack:///./src/app/modules/timekeeping/config/holiday/timekeeping-holiday.service.ts","webpack:///./src/app/modules/timekeeping/config/machine/machine.model.ts","webpack:///./src/app/modules/timekeeping/config/machine/timekeeping-machine.component.html","webpack:///./src/app/modules/timekeeping/config/machine/timekeeping-machine.component.ts","webpack:///./src/app/modules/timekeeping/config/shift/shift-group.model.ts","webpack:///./src/app/modules/timekeeping/config/shift/timekeeping-config-shift.component.html","webpack:///./src/app/modules/timekeeping/config/shift/timekeeping-config-shift.component.ts","webpack:///./src/app/modules/timekeeping/config/shift/timekeeping-shift.model.ts","webpack:///./src/app/modules/timekeeping/config/timekeeping-config-general.component.ts","webpack:///./src/app/modules/timekeeping/config/timekeeping-config.component.html","webpack:///./src/app/modules/timekeeping/config/timekeeping-config.component.ts","webpack:///./src/app/modules/timekeeping/config/timekeeping-config.service.ts","webpack:///./src/app/modules/timekeeping/config/work-schedule/timekeeping-work-schedule.component.html","webpack:///./src/app/modules/timekeeping/config/work-schedule/timekeeping-work-schedule.component.ts","webpack:///./src/app/modules/timekeeping/config/work-schedule/timekeeping-work-schedule.service.ts","webpack:///./src/app/modules/timekeeping/connect/download-user-data/donwload-user-data.component.html","webpack:///./src/app/modules/timekeeping/connect/download-user-data/download-user-data.component.ts","webpack:///./src/app/modules/timekeeping/connect/sync-data/sync-data.component.html","webpack:///./src/app/modules/timekeeping/connect/sync-data/sync-data.component.ts","webpack:///./src/app/modules/timekeeping/connect/sync-data/sync-data.service.ts","webpack:///./src/app/modules/timekeeping/connect/upload-user-data/upload-user-data.component.html","webpack:///./src/app/modules/timekeeping/connect/upload-user-data/upload-user-data.component.ts","webpack:///./src/app/modules/timekeeping/day-off/day-off.model.ts","webpack:///./src/app/modules/timekeeping/day-off/timekeeping-day-off-register.component.html","webpack:///./src/app/modules/timekeeping/day-off/timekeeping-day-off-register.component.ts","webpack:///./src/app/modules/timekeeping/day-off/timekeeping-day-off.component.html","webpack:///./src/app/modules/timekeeping/day-off/timekeeping-day-off.component.ts","webpack:///./src/app/modules/timekeeping/day-off/timekeeping-dayoff.service.ts","webpack:///./src/app/modules/timekeeping/forgot-checkin/forgot-checkin.model.ts","webpack:///./src/app/modules/timekeeping/forgot-checkin/timekeeping-forgot-checkin.component.html","webpack:///./src/app/modules/timekeeping/forgot-checkin/timekeeping-forgot-checkin.component.ts","webpack:///./src/app/modules/timekeeping/forgot-checkin/timekeeping-forgot-checkin.service.ts","webpack:///./src/app/modules/timekeeping/in-out/in-late-out-early-update-approve-status.model.ts","webpack:///./src/app/modules/timekeeping/in-out/in-out.model.ts","webpack:///./src/app/modules/timekeeping/in-out/timekeeping-in-out.component.html","webpack:///./src/app/modules/timekeeping/in-out/timekeeping-in-out.component.ts","webpack:///./src/app/modules/timekeeping/in-out/timekeeping-in-out.service.ts","webpack:///./src/app/modules/timekeeping/overtime-register/overtime-register.model.ts","webpack:///./src/app/modules/timekeeping/overtime-register/timekeeping-overtime-register.component.html","webpack:///./src/app/modules/timekeeping/overtime-register/timekeeping-overtime-register.component.ts","webpack:///./src/app/modules/timekeeping/overtime-register/timekeeping-overtime.component.html","webpack:///./src/app/modules/timekeeping/overtime-register/timekeeping-overtime.component.ts","webpack:///./src/app/modules/timekeeping/overtime-register/timekeeping-overtime.service.ts","webpack:///./src/app/modules/timekeeping/time-sheet/timekeeping-timesheet.component.html","webpack:///./src/app/modules/timekeeping/time-sheet/timekeeping-timesheet.component.ts","webpack:///./src/app/modules/timekeeping/time-sheet/timesheet.service.ts","webpack:///./src/app/modules/timekeeping/time-sheet/view-models/report-by-shift.viewmodel.ts","webpack:///./src/app/modules/timekeeping/timekeeping-in-out-frequently/in-out-frequently.model.ts","webpack:///./src/app/modules/timekeeping/timekeeping-in-out-frequently/in-out-frequently.service.ts","webpack:///./src/app/modules/timekeeping/timekeeping-in-out-frequently/timekeeping-in-out-frequently.component.html","webpack:///./src/app/modules/timekeeping/timekeeping-in-out-frequently/timekeeping-in-out-frequently.component.ts","webpack:///./src/app/modules/timekeeping/timekeeping-routing.module.ts","webpack:///./src/app/modules/timekeeping/timekeeping.module.ts","webpack:///./src/app/shareds/components/nh-icon-loading/nh-icon-loading.component.ts","webpack:///./src/app/shareds/components/nh-icon-loading/nh-icon-loading.module.ts","webpack:///./src/app/shareds/components/nh-input-helper/nh-input-helper.component.scss","webpack:///./src/app/shareds/components/nh-input-helper/nh-input-helper.component.ts","webpack:///./src/app/shareds/components/nh-input-helper/nh-input-helper.module.ts","webpack:///./src/app/shareds/components/nh-tab/nh-tab.module.ts"],"names":[],"mappings":"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","file":"modules-timekeeping-timekeeping-module.js","sourcesContent":["module.exports = \"<div class=\\\"portlet light bordered portlet-holiday\\\">\\r\\n    <div class=\\\"portlet-title\\\">\\r\\n        <div class=\\\"caption\\\">\\r\\n            <span class=\\\"fas fa-cogs\\\"></span>\\r\\n            <span class=\\\"caption-subject bold uppercase\\\"> Cấu hình chung.</span>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"portlet-body\\\">\\r\\n        <form class=\\\"form-horizontal\\\" (ngSubmit)=\\\"save()\\\" [formGroup]=\\\"model\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label for=\\\"\\\" class=\\\"col-sm-4 control-label\\\">Được phép đi sớm/về trễ</label>\\r\\n                <div class=\\\"col-sm-8\\\">\\r\\n                    <div class=\\\"input-group\\\">\\r\\n                        <input class=\\\"form-control\\\" placeholder=\\\"Nhập số phút được phép đi sớm về muộn\\\"\\r\\n                               formControlName=\\\"maxInOutMin\\\">\\r\\n                        <span class=\\\"input-group-addon\\\">Phút</span>\\r\\n                    </div>\\r\\n                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.maxInOutMin\\\">\\r\\n                        {{ formErrors.maxInOutMin }}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label for=\\\"\\\" class=\\\"col-sm-4 control-label\\\">Được phép đi trễ/về sớm</label>\\r\\n                <div class=\\\"col-sm-8\\\">\\r\\n                    <div class=\\\"input-group\\\">\\r\\n                        <input class=\\\"form-control\\\"\\r\\n                               placeholder=\\\"Nhập số lần tối đa được phép đi sớm về muộn.\\\"\\r\\n                               formControlName=\\\"maxInOutTimes\\\">\\r\\n                        <span class=\\\"input-group-addon\\\">Lần / Tháng</span>\\r\\n                    </div>\\r\\n                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.maxInOutTimes\\\">\\r\\n                        {{ formErrors.maxInOutTimes }}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <div class=\\\"col-sm-8 col-sm-offset-4\\\">\\r\\n                    <button mat-raised-button color=\\\"primary\\\">\\r\\n                        <i class=\\\"fa fa-save\\\" *ngIf=\\\"!isSaving\\\"></i>\\r\\n                        <i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSaving\\\"></i>\\r\\n                        Lưu lại\\r\\n                    </button>\\r\\n                </div>\\r\\n            </div>\\r\\n        </form>\\r\\n    </div>\\r\\n</div><!-- END: .portlet-config-symbol -->\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { BaseComponent } from '../../../../base.component';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { SpinnerService } from '../../../../core/spinner/spinner.service';\r\nimport { NumberValidator } from '../../../../validators/number.validator';\r\nimport { UtilService } from '../../../../shareds/services/util.service';\r\nimport { TimekeepingConfigService } from '../timekeeping-config.service';\r\nimport { finalize } from 'rxjs/operators';\r\n\r\n@Component({\r\n    selector: 'app-timekeeping-general',\r\n    templateUrl: './timekeeping-general.component.html',\r\n    providers: [NumberValidator]\r\n})\r\n\r\nexport class TimekeepingGeneralComponent extends BaseComponent implements OnInit {\r\n    model: FormGroup;\r\n\r\n    constructor(private fb: FormBuilder,\r\n                private utilService: UtilService,\r\n                private numberValidator: NumberValidator,\r\n                private spinnerService: SpinnerService,\r\n                private toastr: ToastrService,\r\n                private timekeepingConfigService: TimekeepingConfigService) {\r\n        super();\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.buildForm();\r\n\r\n        this.timekeepingConfigService.getGeneralConfig()\r\n            .subscribe((result: any) => {\r\n                result.forEach(item => {\r\n                    if (item.key === 'Clinic.TimeKeeping.Models.MaxInOutMin') {\r\n                        this.model.patchValue({maxInOutMin: item.value});\r\n                    }\r\n\r\n                    if (item.key === 'Clinic.TimeKeeping.Models.MaxInOutTimes') {\r\n                        this.model.patchValue({maxInOutTimes: item.value});\r\n                    }\r\n                });\r\n            });\r\n    }\r\n\r\n    save() {\r\n        const isValid = this.utilService.onValueChanged(this.model, this.formErrors, this.validationMessages);\r\n        if (isValid) {\r\n            const value = this.model.value;\r\n            this.spinnerService.show('Đang lưu dữ liệu. Vui lòng đợi...');\r\n            this.timekeepingConfigService.saveGeneral(value.maxInOutMin, value.maxInOutTimes)\r\n                .pipe(finalize(() => this.spinnerService.hide()))\r\n                .subscribe(() => {\r\n                    this.toastr.success('Cập nhật cấu hình thành công.');\r\n                });\r\n        }\r\n    }\r\n\r\n    private buildForm() {\r\n        this.model = this.fb.group({\r\n            'maxInOutMin': [0, [\r\n                this.numberValidator.isValid\r\n            ]],\r\n            'maxInOutTimes': [0, [\r\n                this.numberValidator.isValid\r\n            ]]\r\n        });\r\n\r\n        this.formErrors = this.utilService.renderFormError(['maxInOutMin', 'maxInOutTimes']);\r\n        this.validationMessages = {\r\n            'maxInOutMin': {\r\n                'isValid': this.formatString('Số phút đi sớm về muộn phải là số.')\r\n            },\r\n            'maxInOutTimes': {\r\n                'isValid': this.formatString('Số lần tối đa được phép đi sớm về muộn phải là số.')\r\n            }\r\n        };\r\n\r\n        this.model.valueChanges.subscribe(() => this.utilService.onValueChanged(this.model, this.formErrors, this.validationMessages));\r\n    }\r\n}\r\n","/**\r\n * Created by HoangIT21 on 7/6/2017.\r\n */\r\nexport class Holiday {\r\n    id: any;\r\n    name: string;\r\n    fromDayText: string;\r\n    toDayText: string;\r\n    isActive: boolean;\r\n    fromDay: DayObject;\r\n    toDay: DayObject;\r\n    isRangerDate: boolean;\r\n    year: number;\r\n\r\n    constructor() {\r\n        this.fromDay = new DayObject();\r\n        this.toDay = new DayObject();\r\n    }\r\n}\r\n\r\nexport class DayObject {\r\n    day: number;\r\n    month: number;\r\n\r\n    constructor() {\r\n        this.day = null;\r\n        this.month = null;\r\n    }\r\n}\r\n","module.exports = \"<div class=\\\"portlet light bordered portlet-holiday\\\">\\r\\n    <div class=\\\"portlet-title\\\">\\r\\n        <div class=\\\"caption\\\">\\r\\n            <span class=\\\"fas fa-plane\\\"></span>\\r\\n            <span class=\\\"caption-subject bold uppercase\\\"> Cấu hình ngày nghỉ lễ</span>\\r\\n        </div>\\r\\n        <div class=\\\"actions\\\">\\r\\n            <div class=\\\"btn-group\\\">\\r\\n                <a class=\\\"btn btn-circle btn-default \\\" href=\\\"javascript:;\\\" data-toggle=\\\"dropdown\\\" aria-expanded=\\\"true\\\">\\r\\n                    {{ !year ? '-- Chọn năm --' : year }}\\r\\n                    <i class=\\\"fa fa-angle-down\\\"></i>\\r\\n                </a>\\r\\n                <ul class=\\\"dropdown-menu pull-right\\\">\\r\\n                    <li *ngFor=\\\"let year of listYear\\\">\\r\\n                        <a href=\\\"javascript:;\\\" (click)=\\\"onSelectYear(year)\\\"> {{ year.id }} </a>\\r\\n                    </li>\\r\\n                </ul>\\r\\n            </div>\\r\\n            <a href=\\\"javascript:;\\\" class=\\\"btn btn-circle btn-default\\\" (click)=\\\"showAdd()\\\">\\r\\n                <i class=\\\"fa fa-plus\\\"></i> Thêm </a>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"portlet-body table-responsive\\\">\\r\\n        <form class=\\\"form-horizontal cm-mgt-10\\\" (ngSubmit)=\\\"save()\\\" [formGroup]=\\\"formModel\\\">\\r\\n            <table class=\\\"table table-striped table-hover table-bordered\\\">\\r\\n                <thead>\\r\\n                <tr>\\r\\n                    <th class=\\\"center w50\\\">STT</th>\\r\\n                    <th class=\\\"center\\\">Tên</th>\\r\\n                    <th class=\\\"center\\\">Ngày lễ</th>\\r\\n                    <th class=\\\"center w100\\\">Sử dụng</th>\\r\\n                    <th class=\\\"center w100\\\"></th>\\r\\n                </tr>\\r\\n                </thead>\\r\\n                <tbody *ngIf=\\\"listHolidays.length === 0; else contentTemplate\\\">\\r\\n                <tr>\\r\\n                    <td colspan=\\\"6\\\" class=\\\"center bold\\\">\\r\\n                        Chưa cấu hình ngày lễ\\r\\n                        <a href=\\\"javascript://\\\" (click)=\\\"showAdd()\\\">vào đây</a>\\r\\n                        để thêm ngày lễ\\r\\n                    </td>\\r\\n                </tr>\\r\\n                </tbody>\\r\\n                <ng-template #contentTemplate>\\r\\n                    <tbody>\\r\\n                    <tr *ngFor=\\\"let holiday of listHolidays; let i = index\\\">\\r\\n                        <td class=\\\"center\\\">{{ i + 1 }}</td>\\r\\n                        <td>{{holiday.name}}</td>\\r\\n                        <td class=\\\"center\\\">{{holiday.fromDay.day}}/{{holiday.fromDay.month}}\\r\\n                            <span *ngIf=\\\"holiday.toDay && holiday.toDay.day && holiday.toDay.month\\\">\\r\\n                                        <i class=\\\"fa fa-long-arrow-right\\\"></i>\\r\\n                                        {{holiday.toDay?.day}}/{{holiday.toDay?.month}}\\r\\n                                    </span>\\r\\n                        </td>\\r\\n                        <td class=\\\"center\\\">\\r\\n                            <mat-checkbox color=\\\"primary\\\" [checked]=\\\"holiday.isActive\\\"></mat-checkbox>\\r\\n                        </td>\\r\\n                        <td class=\\\"center\\\">\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"primary\\\" title=\\\"Chỉnh sửa ngày lẽ\\\"\\r\\n                                    (click)=\\\"edit(holiday)\\\"\\r\\n                                    matTooltip=\\\"Sửa\\\" matTooltipPosition=\\\"above\\\">\\r\\n                                <!--<i class=\\\"fa fa-edit\\\"></i>-->\\r\\n                                <mat-icon>edit</mat-icon>\\r\\n                            </button>\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"warn\\\" title=\\\"Xóa ngày lễ này\\\"\\r\\n                                    (click)=\\\"delete(holiday)\\\" matTooltip=\\\"Xóa\\\" matTooltipPosition=\\\"above\\\">\\r\\n                                <mat-icon>delete</mat-icon>\\r\\n                            </button>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                    </tbody>\\r\\n                </ng-template>\\r\\n                <tbody *ngIf=\\\"isShowForm\\\">\\r\\n                <tr>\\r\\n                    <td colspan=\\\"2\\\">\\r\\n                        <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"configHolidayName\\\" formControlName=\\\"name\\\"\\r\\n                               placeholder=\\\"Nhập tên ngày lễ\\\">\\r\\n                        <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.name && isSubmitted\\\">\\r\\n                            {{ formErrors.name }}\\r\\n                        </div>\\r\\n                    </td>\\r\\n                    <td class=\\\"center\\\">\\r\\n                        <div class=\\\"cm-overflow-hidden\\\">\\r\\n                            <div class=\\\"input-group-input\\\" role=\\\"group\\\">\\r\\n                                <input type=\\\"text\\\" class=\\\"form-control w70\\\" formControlName=\\\"fromDayText\\\">\\r\\n                                <i class=\\\"fa fa-long-arrow-right input-group-input-addon\\\"></i>\\r\\n                                <input type=\\\"text\\\" class=\\\"form-control w70\\\" formControlName=\\\"toDayText\\\">\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.fromDayText && isSubmitted\\\">\\r\\n                            {{ formErrors.fromDayText }}\\r\\n                        </div>\\r\\n                    </td>\\r\\n                    <td class=\\\"center\\\">\\r\\n                        <mat-checkbox color=\\\"primary\\\" formControlName=\\\"isActive\\\"></mat-checkbox>\\r\\n                    </td>\\r\\n                    <td class=\\\"center\\\">\\r\\n                        <button type=\\\"submit\\\" mat-raised-button color=\\\"primary\\\">\\r\\n                            <mat-icon>save</mat-icon>\\r\\n                            Lưu\\r\\n                        </button>\\r\\n                    </td>\\r\\n                </tr>\\r\\n                </tbody>\\r\\n            </table>\\r\\n        </form>\\r\\n    </div>\\r\\n</div><!-- END: .portlet-holiday -->\\r\\n\"","/**\r\n * Created by HoangIT21 on 7/6/2017.\r\n */\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { BaseComponent } from '../../../../base.component';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { SpinnerService } from '../../../../core/spinner/spinner.service';\r\nimport { Holiday } from './holiday.model';\r\nimport { UtilService } from '../../../../shareds/services/util.service';\r\nimport { TimekeepingConfigService } from '../timekeeping-config.service';\r\nimport { finalize } from 'rxjs/operators';\r\n\r\n@Component({\r\n    selector: 'app-timekeeping-config-holiday',\r\n    templateUrl: './timekeeping-config-holiday.component.html'\r\n})\r\n\r\nexport class TimekeepingConfigHolidayComponent extends BaseComponent implements OnInit {\r\n    isShowForm = false;\r\n    model = new Holiday();\r\n    formModel: FormGroup;\r\n    year: number;\r\n    listYear = [];\r\n    listHolidays: Holiday[] = [];\r\n\r\n    constructor(private fb: FormBuilder,\r\n                private toastr: ToastrService,\r\n                private spinnerService: SpinnerService,\r\n                private utilService: UtilService,\r\n                private timekeepingConfigService: TimekeepingConfigService) {\r\n        super();\r\n        this.formErrors = this.utilService.renderFormError(['name', 'fromDayText']);\r\n        this.validationMessages = {\r\n            'name': {\r\n                'required': 'Vui lòng nhập tên ngày lễ',\r\n                'maxlength': 'Tên ngày lễ không được phép vượt quá 250 ký tự.'\r\n            },\r\n            'fromDayText': {\r\n                'required': 'Vui lòng nhập thời gian nghỉ từ ngày.'\r\n            }\r\n        };\r\n        this.year = new Date().getFullYear();\r\n        this.getAllConfigs();\r\n        this.utilService.initListYear().forEach(year => {\r\n            this.listYear = [...this.listYear, {id: year, name: year}];\r\n        });\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.buildForm();\r\n    }\r\n\r\n    onSelectYear(year) {\r\n        this.year = year.id;\r\n        this.getAllConfigs();\r\n    }\r\n\r\n    getAllConfigs() {\r\n        this.isSearching = true;\r\n        this.timekeepingConfigService.searchAllHoliday(this.year)\r\n            .pipe(finalize(() => this.isSearching = false))\r\n            .subscribe((result: any) => {\r\n                this.listHolidays = result;\r\n            });\r\n    }\r\n\r\n    showAdd() {\r\n        this.isShowForm = true;\r\n        this.utilService.focusElement('configHolidayName');\r\n    }\r\n\r\n    save() {\r\n        this.isSubmitted = true;\r\n        const formModelValue = this.formModel.value;\r\n        const isValid = this.utilService.onValueChanged(this.formModel, this.formErrors, this.validationMessages);\r\n        this.setupModel(formModelValue);\r\n\r\n        if (isValid) {\r\n            this.spinnerService.show('Đang lưu dữ liệu ngày nghỉ lễ. Vui lòng đợi...');\r\n            if (this.isUpdate) {\r\n                this.timekeepingConfigService.updateHoliday(this.model)\r\n                    .pipe(finalize(() => {\r\n                        this.isSubmitted = false;\r\n                        this.spinnerService.hide();\r\n                    }))\r\n                    .subscribe((result: Holiday) => {\r\n                        this.toastr.success(this.formatString(this.message.updateSuccess, 'ngày lễ'));\r\n                        this.formModel.reset();\r\n                        this.isShowForm = false;\r\n                        this.isUpdate = false;\r\n                        this.getAllConfigs();\r\n                    });\r\n            } else {\r\n                this.timekeepingConfigService.insertHoliday(this.model)\r\n                    .pipe(finalize(() => {\r\n                        this.isSubmitted = false;\r\n                        this.spinnerService.hide();\r\n                    }))\r\n                    .subscribe((result: Holiday) => {\r\n                        this.toastr.success(this.formatString(this.message.insertSuccess, 'ngày lễ'));\r\n                        this.formModel.reset();\r\n                        this.utilService.focusElement('configHolidayName');\r\n                        this.listHolidays = [...this.listHolidays, result];\r\n                        return;\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    edit(holiday: Holiday) {\r\n        this.isUpdate = true;\r\n        this.model = holiday;\r\n        this.model.fromDayText = `${holiday.fromDay.day}/${holiday.fromDay.month}`;\r\n        if (this.model.toDay && this.model.toDay.day && this.model.toDay.month) {\r\n            this.model.toDayText = `${holiday.toDay.day}/${holiday.toDay.month}`;\r\n        }\r\n        this.formModel.patchValue(this.model);\r\n        this.isShowForm = true;\r\n        this.utilService.focusElement('configHolidayName');\r\n    }\r\n\r\n    delete(holiday: Holiday) {\r\n        // swal({\r\n        //     title: `Bạn có chắc chắn muốn xóa ngày lễ: \"${holiday.name}\"`,\r\n        //     text: 'Lưu ý: sau khi xóa bạn không thể lấy lại được ngày lễ này.',\r\n        //     type: 'warning',\r\n        //     showCancelButton: true,\r\n        //     confirmButtonColor: '#DD6B55',\r\n        //     confirmButtonText: 'Đồng ý',\r\n        //     cancelButtonText: 'Hủy bỏ'\r\n        // }).then(() => {\r\n        //     this.isSaving = true;\r\n        //     this.timekeepingConfigService.deleteHoliday(holiday.id).finally(() => this.isSaving = false)\r\n        //         .subscribe(() => {\r\n        //             this.toastr.success(this.formatString(this.message.deleteSuccess, 'ngày lễ'));\r\n        //             _.remove(this.listHolidays, (holidayItem: Holiday) => {\r\n        //                 return holidayItem.id === holiday.id;\r\n        //             });\r\n        //         });\r\n        // }, () => {\r\n        // });\r\n    }\r\n\r\n    private setupModel(formModelValue) {\r\n        this.model.id = formModelValue.id;\r\n        this.model.name = formModelValue.name;\r\n        this.model.isActive = formModelValue.isActive;\r\n        this.model.isRangerDate = formModelValue.toDayText != null\r\n            && formModelValue.toDayText !== '' && formModelValue.toDayText !== undefined;\r\n        this.model.year = this.year;\r\n\r\n        if (formModelValue.fromDayText) {\r\n            const dayArray = formModelValue.fromDayText.split('/');\r\n            this.model.fromDay.day = +dayArray[0];\r\n            this.model.fromDay.month = +dayArray[1];\r\n        }\r\n\r\n        if (formModelValue.toDayText) {\r\n            const dayArray = formModelValue.toDayText.split('/');\r\n            this.model.toDay.day = +dayArray[0];\r\n            this.model.toDay.month = +dayArray[1];\r\n        } else {\r\n            this.model.toDay.day = null;\r\n            this.model.toDay.month = null;\r\n        }\r\n    }\r\n\r\n    private buildForm() {\r\n        this.formModel = this.fb.group({\r\n            'id': [this.model.id],\r\n            'name': [this.model.name, [\r\n                Validators.required,\r\n                Validators.maxLength(500)\r\n            ]],\r\n            'fromDayText': [this.model.fromDayText, [\r\n                Validators.required\r\n            ]],\r\n            'toDayText': [this.model.toDayText],\r\n            'isActive': [this.model.isActive]\r\n        });\r\n\r\n        this.formModel.valueChanges.subscribe(data =>\r\n            this.utilService.onValueChanged(this.formModel, this.formErrors, this.validationMessages, data));\r\n        this.utilService.onValueChanged(this.formModel, this.formErrors, this.validationMessages);\r\n    }\r\n}\r\n","/**\r\n * Created by HoangIT21 on 7/6/2017.\r\n */\r\nimport { Inject, Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Holiday } from './holiday.model';\r\nimport { APP_CONFIG, IAppConfig } from '../../../../configs/app.config';\r\n\r\n@Injectable()\r\nexport class TimekeepingHolidayService {\r\n    url = 'config/holiday/';\r\n\r\n    constructor( @Inject(APP_CONFIG) appConfig: IAppConfig,\r\n        private http: HttpClient) {\r\n        this.url = `${appConfig.TIMEKEEPING_API_URL}${this.url}`;\r\n    }\r\n\r\n    insert(holiday: Holiday) {\r\n        return this.http.post(`${this.url}insert`, holiday);\r\n    }\r\n\r\n    update(holiday: Holiday) {\r\n        return this.http.post(`${this.url}update`, holiday);\r\n    }\r\n\r\n    searchAll() {\r\n        return this.http.get(`${this.url}search-all`);\r\n    }\r\n\r\n    getYearHolidays() {\r\n        return this.http.get(`${this.url}get-year-holidays`);\r\n    }\r\n\r\n    delete(id) {\r\n        return this.http.delete(`${this.url}delete`, {\r\n            params: new HttpParams()\r\n                .set('id', id.toString())\r\n        });\r\n    }\r\n}\r\n","/**\r\n * Created by HoangIT21 on 7/13/2017.\r\n */\r\nexport class Machine {\r\n    id: string;\r\n    name: string;\r\n    no: number;\r\n    ip: string;\r\n    port: number;\r\n    isActive: boolean;\r\n    serialNumber: string;\r\n\r\n    constructor() {\r\n        this.no = 1;\r\n        this.isActive = true;\r\n        this.port = 4370;\r\n    }\r\n}\r\n","module.exports = \"<div class=\\\"portlet light bordered portlet-holiday\\\">\\r\\n    <div class=\\\"portlet-title\\\">\\r\\n        <div class=\\\"caption\\\">\\r\\n            <span class=\\\"fas fa-desktop\\\"></span>\\r\\n            <span class=\\\"caption-subject bold uppercase\\\"> Cấu hình máy chấm công.</span>\\r\\n        </div>\\r\\n        <div class=\\\"actions\\\">\\r\\n            <a href=\\\"javascript:;\\\" class=\\\"btn btn-circle btn-default\\\" (click)=\\\"machineFormModal.show()\\\">\\r\\n                <i class=\\\"fa fa-plus\\\"></i> Thêm </a>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"portlet-body\\\">\\r\\n        <div class=\\\"table-responsive\\\">\\r\\n            <table class=\\\"table table-bordered table-striped table-hover\\\">\\r\\n                <thead>\\r\\n                <tr>\\r\\n                    <th class=\\\"middle center w50\\\">Số máy</th>\\r\\n                    <th class=\\\"middle center\\\">Tên máy</th>\\r\\n                    <th class=\\\"middle center\\\">IP</th>\\r\\n                    <th class=\\\"middle center w50\\\">Port</th>\\r\\n                    <th class=\\\"middle center\\\"></th>\\r\\n                </tr>\\r\\n                </thead>\\r\\n                <tbody *ngIf=\\\"listMachine.length === 0; else machineContentTemplate\\\">\\r\\n                <tr>\\r\\n                    <td colspan=\\\"5\\\" class=\\\"center bold\\\">\\r\\n                        Chưa cấu hình máy chấm công. Click <a href=\\\"javascript://\\\" (click)=\\\"machineFormModal.show()\\\">vào\\r\\n                        đây</a> để thêm mới máy chấm công\\r\\n                    </td>\\r\\n                </tr>\\r\\n                </tbody>\\r\\n                <ng-template #machineContentTemplate>\\r\\n                    <tbody *ngIf=\\\"!isSearching; else loadingTemplate\\\">\\r\\n                    <tr *ngFor=\\\"let machine of listMachine\\\">\\r\\n                        <td class=\\\"center\\\">{{machine.no}}</td>\\r\\n                        <td>{{machine.name}}</td>\\r\\n                        <td>{{machine.ip}}</td>\\r\\n                        <td>{{machine.port}}</td>\\r\\n                        <td class=\\\"center w100\\\">\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"primary\\\" (click)=\\\"edit(machine)\\\"\\r\\n                                    matTooltip=\\\"Sửa\\\"\\r\\n                                    matTooltipPosition=\\\"above\\\">\\r\\n                                <!--<i class=\\\"fa fa-edit\\\"></i>-->\\r\\n                                <mat-icon>edit</mat-icon>\\r\\n                            </button>\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"warn\\\" (click)=\\\"delete(machine)\\\"\\r\\n                                    matTooltip=\\\"Xóa\\\" matTooltipPosition=\\\"above\\\">\\r\\n                                <!--<i class=\\\"fa fa-trash-o\\\"></i>-->\\r\\n                                <mat-icon>delete</mat-icon>\\r\\n                            </button>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                    </tbody>\\r\\n                </ng-template>\\r\\n                <ng-template #loadingTemplate>\\r\\n                    <div class=\\\"center\\\">\\r\\n                        <div class=\\\"spinner\\\">\\r\\n                            <div class=\\\"rect1\\\"></div>\\r\\n                            <div class=\\\"rect2\\\"></div>\\r\\n                            <div class=\\\"rect3\\\"></div>\\r\\n                            <div class=\\\"rect4\\\"></div>\\r\\n                            <div class=\\\"rect5\\\"></div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </ng-template>\\r\\n            </table><!-- END: .table -->\\r\\n        </div>\\r\\n    </div>\\r\\n</div><!-- END: .portlet-config-symbol -->\\r\\n\\r\\n<nh-modal #machineFormModal [size]=\\\"'md'\\\" (onShown)=\\\"onMachineFormModalShown()\\\" (onHidden)=\\\"onMachineFormModalHidden()\\\">\\r\\n    <nh-modal-header [showCloseButton]=\\\"true\\\">\\r\\n        <h4>\\r\\n            <i class=\\\"fa fa-edit\\\" *ngIf=\\\"isUpdate\\\"></i>\\r\\n            <i class=\\\"fa fa-plus\\\" *ngIf=\\\"!isUpdate\\\"></i>\\r\\n            <span>{{ isUpdate ? 'Cập nhật thông tin máy chấm công' : 'Thêm mới máy chấm công'}}</span>\\r\\n        </h4>\\r\\n    </nh-modal-header>\\r\\n    <form class=\\\"form-horizontal\\\" (ngSubmit)=\\\"save()\\\" [formGroup]=\\\"formModel\\\">\\r\\n        <nh-modal-content>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Số máy chấm công\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                    <nh-select\\r\\n                        [data]=\\\"listMachineNo\\\"\\r\\n                        [title]=\\\"'-- chọn Số máy chấm công --'\\\"\\r\\n                        [isEnable]=\\\"!isUpdate\\\"\\r\\n                        formControlName=\\\"no\\\"\\r\\n                    ></nh-select>\\r\\n                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.no && isSubmitted\\\">\\r\\n                        {{ formErrors.no }}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Tên máy chấm công\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"machineName\\\"\\r\\n                           placeholder=\\\"Nhập tên máy chấm công\\\" formControlName=\\\"name\\\">\\r\\n                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.name && isSubmitted\\\">\\r\\n                        {{ formErrors.name }}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"IP máy chấm công\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"machineIp\\\"\\r\\n                           placeholder=\\\"Nhập IP máy chấm công\\\" formControlName=\\\"ip\\\">\\r\\n                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.ip && isSubmitted\\\">\\r\\n                        {{ formErrors.ip }}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Port\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"machinePort\\\"\\r\\n                           placeholder=\\\"Nhập công kết nối đến máy chấm công\\\" formControlName=\\\"port\\\">\\r\\n                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.port && isSubmitted\\\">\\r\\n                        {{ formErrors.port }}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Series\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                    <div class=\\\"input-group\\\">\\r\\n                        <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Số seri\\\" formControlName=\\\"serialNumber\\\">\\r\\n                        <span class=\\\"input-group-btn\\\">\\r\\n                            <button class=\\\"btn btn-default\\\" type=\\\"button\\\"\\r\\n                                    (click)=\\\"getSerialNumber()\\\">Lấy về seri</button>\\r\\n                        </span>\\r\\n                    </div>\\r\\n                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.serialNumber && isSubmitted\\\">\\r\\n                        {{ formErrors.serialNumber }}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </nh-modal-content>\\r\\n        <nh-modal-footer>\\r\\n            <button type=\\\"submit\\\" mat-raised-button color=\\\"primary\\\">\\r\\n                <!--<i class=\\\"fa fa-save\\\" *ngIf=\\\"!isSaving\\\"></i>-->\\r\\n                <!--<i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSaving\\\"></i>-->\\r\\n                <mat-icon>save</mat-icon>\\r\\n                Lưu lại\\r\\n            </button>\\r\\n            <button type=\\\"button\\\" mat-raised-button nh-dismiss=\\\"true\\\">\\r\\n                <!--<i class=\\\"fa fa-times\\\"></i>-->\\r\\n                <mat-icon>close</mat-icon>\\r\\n                Đóng lại\\r\\n            </button>\\r\\n        </nh-modal-footer>\\r\\n    </form>\\r\\n</nh-modal>\\r\\n\"","/**\r\n * Created by HoangIT21 on 7/13/2017.\r\n */\r\nimport { Component, Inject, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { BaseComponent } from '../../../../base.component';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { SpinnerService } from '../../../../core/spinner/spinner.service';\r\nimport { finalize } from 'rxjs/operators';\r\nimport { NumberValidator } from '../../../../validators/number.validator';\r\nimport { Machine } from './machine.model';\r\nimport { NhModalComponent } from '../../../../shareds/components/nh-modal/nh-modal.component';\r\nimport { UtilService } from '../../../../shareds/services/util.service';\r\nimport { TimekeepingConfigService } from '../timekeeping-config.service';\r\n\r\n@Component({\r\n    selector: 'app-timekeeping-machine',\r\n    templateUrl: './timekeeping-machine.component.html',\r\n    providers: [NumberValidator]\r\n})\r\n\r\nexport class TimekeepingMachineComponent extends BaseComponent implements OnInit {\r\n    @ViewChild('machineFormModal') machineFormModal: NhModalComponent;\r\n    machine = new Machine();\r\n    listMachine: Machine[] = [];\r\n    formModel: FormGroup;\r\n    listMachineNo = [];\r\n\r\n    constructor(private fb: FormBuilder,\r\n                private toastr: ToastrService,\r\n                private numberValidator: NumberValidator,\r\n                private spinnerService: SpinnerService,\r\n                private utilService: UtilService,\r\n                private timekeepingConfigService: TimekeepingConfigService) {\r\n        super();\r\n        for (let i = 1; i < 20; i++) {\r\n            this.listMachineNo.push({\r\n                id: i,\r\n                name: i\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.search();\r\n        this.buildForm();\r\n    }\r\n\r\n    onMachineFormModalShown() {\r\n        this.utilService.focusElement('machineName');\r\n    }\r\n\r\n    onMachineFormModalHidden() {\r\n        this.isUpdate = false;\r\n        this.formModel.reset(new Machine());\r\n    }\r\n\r\n    search() {\r\n        this.isSearching = true;\r\n        this.timekeepingConfigService.searchMachine()\r\n            .pipe(finalize(() => this.isSearching = false))\r\n            .subscribe((result: any) => {\r\n                this.listMachine = result;\r\n            });\r\n    }\r\n\r\n    edit(machine: Machine) {\r\n        this.isUpdate = true;\r\n        this.formModel.patchValue(machine);\r\n        this.machineFormModal.show();\r\n    }\r\n\r\n    delete(machine: Machine) {\r\n        // swal({\r\n        //     title: `Bạn có chắc chắn muốn xóa máy chấm công: \"${machine.name}\" không?`,\r\n        //     text: 'Lưu ý sau khi xóa bạn không thể lấy lại máy chấm công này!',\r\n        //     type: 'warning',\r\n        //     showCancelButton: true,\r\n        //     confirmButtonColor: '#DD6B55',\r\n        //     confirmButtonText: 'Đồng ý',\r\n        //     cancelButtonText: 'Hủy bỏ'\r\n        // }).then(() => {\r\n        //     this.spinnerService.show('Đang xóa máy chấm công...');\r\n        //     this.timekeepingConfigService.deleteMachine(machine.id)\r\n        //         .finally(() => this.spinnerService.hide())\r\n        //         .subscribe(result => {\r\n        //             this.toastr.success(this.formatString(this.message.deleteSuccess, machine.name));\r\n        //             this.search();\r\n        //         });\r\n        // }, () => {\r\n        // });\r\n    }\r\n\r\n    save() {\r\n        this.isSubmitted = true;\r\n        this.machine = this.formModel.value;\r\n        const isValid = this.utilService.onValueChanged(this.formModel, this.formErrors, this.validationMessages);\r\n\r\n        if (isValid) {\r\n            this.spinnerService.show('Đang lưu thông tin máy chấm công.');\r\n            if (this.isUpdate) {\r\n                this.timekeepingConfigService.updateMachine(this.machine)\r\n                    .pipe(finalize(() => {\r\n                        this.spinnerService.hide();\r\n                        this.isSubmitted = false;\r\n                    }))\r\n                    .subscribe(result => {\r\n                        this.toastr.success(this.formatString(this.message.updateSuccess, 'máy chấm công'));\r\n                        this.search();\r\n                        this.machineFormModal.dismiss();\r\n                    });\r\n            } else {\r\n                this.timekeepingConfigService.insertMachine(this.machine)\r\n                    .pipe(finalize(() => {\r\n                        this.spinnerService.hide();\r\n                        this.isSubmitted = false;\r\n                    }))\r\n                    .subscribe(result => {\r\n                        this.toastr.success(this.formatString(this.message.insertSuccess, 'máy chấm công'));\r\n                        this.search();\r\n                        this.formModel.reset(new Machine());\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    getSerialNumber() {\r\n        const value = this.formModel.value;\r\n        if (!value.ip) {\r\n            this.toastr.error('Vui lòng nhập địa chỉ ip');\r\n            this.utilService.focusElement('machineIp');\r\n            return;\r\n        }\r\n\r\n        if (!value.port) {\r\n            this.toastr.error('Vui lòng nhập công kết nối');\r\n            this.utilService.focusElement('machinePort');\r\n            return;\r\n        }\r\n\r\n        console.log('ddang layas thong tin serial number');\r\n        this.spinnerService.show('Đang lấy thông tin serial number.');\r\n        this.timekeepingConfigService.getSerial(this.formModel.value.ip, this.formModel.value.port)\r\n            .pipe(finalize(() => this.spinnerService.hide()))\r\n            .subscribe(result => {\r\n                if (!result) {\r\n                    this.toastr.error('Vui lòng kiểm tra lại địa chỉ ip hoặc cổng kết nôi', 'Không thể kết nối');\r\n                    return;\r\n                }\r\n                this.formModel.patchValue({'serialNumber': result});\r\n            });\r\n    }\r\n\r\n    private buildForm() {\r\n        this.formErrors = this.utilService.renderFormError(['name', 'no', 'ip', 'port', 'series']);\r\n        this.validationMessages = {\r\n            'name': {\r\n                'required': this.formatString('Vui lòng nhập tên máy chấm công'),\r\n                'maxlength': this.formatString('Tên máy chấm công không được phép vượt quá 250 ký tự.')\r\n            },\r\n            'no': {\r\n                'required': this.formatString('Vui lòng chọn số máy chấm công')\r\n            },\r\n            'ip': {\r\n                'required': this.formatString('Vui lòng nhập địa chỉ IP'),\r\n                'maxlength': this.formatString('Địa chỉ IP không được phép vượt quá 100 ký tự.')\r\n            },\r\n            'port': {\r\n                'required': this.formatString('Vui lòng nhập Port'),\r\n                'isValid': this.formatString('Port phải là số.')\r\n            },\r\n            'serialNumber': {\r\n                'required': this.formatString('Vui lòng chọn số seri')\r\n            },\r\n            'registerNumber': {\r\n                'required': this.formatString('Vui lòng chọn số đăng ký')\r\n            }\r\n        };\r\n        this.formModel = this.fb.group({\r\n            'id': [this.machine.id],\r\n            'name': [this.machine.name, [\r\n                Validators.required,\r\n                Validators.maxLength(250)\r\n            ]],\r\n            'no': [this.machine.no, [\r\n                Validators.required\r\n            ]],\r\n            'ip': [this.machine.ip, [\r\n                Validators.required,\r\n                Validators.maxLength(100)\r\n            ]],\r\n            'port': [this.machine.port, [\r\n                Validators.required,\r\n                this.numberValidator.isValid\r\n            ]],\r\n            'serialNumber': [this.machine.serialNumber, [\r\n                Validators.required\r\n            ]],\r\n            'isActive': [this.machine.isActive]\r\n        });\r\n        this.formModel.valueChanges.subscribe(data =>\r\n            this.utilService.onValueChanged(this.formModel, this.formErrors, this.validationMessages));\r\n        this.utilService.onValueChanged(this.formModel, this.formErrors, this.validationMessages);\r\n    }\r\n}\r\n","/**\r\n * Created by HoangIT21 on 7/8/2017.\r\n */\r\nexport class ShiftGroup {\r\n    id: any;\r\n    name: string;\r\n    description: string;\r\n    isActive: boolean;\r\n    shifts: { id: string, name: string }[];\r\n\r\n    constructor() {\r\n        this.name = '';\r\n        this.description = '';\r\n        this.isActive = true;\r\n        this.shifts = [];\r\n    }\r\n}\r\n","module.exports = \"<div class=\\\"portlet light bordered portlet-holiday\\\">\\r\\n    <div class=\\\"portlet-title\\\">\\r\\n        <div class=\\\"caption\\\">\\r\\n            <i class=\\\"far fa-calendar-check\\\"></i>\\r\\n            <span class=\\\"caption-subject bold uppercase\\\"> Cấu hình ca làm việc.</span>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"portlet-body\\\">\\r\\n        <mat-tab-group>\\r\\n            <mat-tab class=\\\"tab-shift-group\\\">\\r\\n                <ng-template mat-tab-label>\\r\\n                    <i class=\\\"fa fa-th-list cm-mgr-5\\\"></i> Danh sách nhóm ca làm việc\\r\\n                </ng-template>\\r\\n                <div class=\\\"cm-pdt-10\\\">\\r\\n                    <div class=\\\"text-right cm-mgb-10\\\">\\r\\n                        <button mat-raised-button color=\\\"primary\\\" type=\\\"button\\\" (click)=\\\"showShiftGroupFormModal()\\\">\\r\\n                            <i class=\\\"fa fa-plus\\\"></i>\\r\\n                            Thêm nhóm\\r\\n                        </button>\\r\\n                    </div>\\r\\n                    <div class=\\\"table-responsive\\\">\\r\\n                        <table class=\\\"table table-bordered table-striped table-hover\\\">\\r\\n                            <thead>\\r\\n                            <tr>\\r\\n                                <th class=\\\"center w50\\\">STT</th>\\r\\n                                <th class=\\\"center\\\">Tên nhóm</th>\\r\\n                                <th class=\\\"center\\\">Mô tả</th>\\r\\n                                <th class=\\\"center w100\\\">Sử dụng</th>\\r\\n                                <th class=\\\"center w100\\\"></th>\\r\\n                            </tr>\\r\\n                            </thead>\\r\\n                            <tbody *ngIf=\\\"isSearchingShiftGroup\\\">\\r\\n                            <tr>\\r\\n                                <td colspan=\\\"5\\\">\\r\\n                                    <div class=\\\"spinner\\\">\\r\\n                                        <div class=\\\"rect1\\\"></div>\\r\\n                                        <div class=\\\"rect2\\\"></div>\\r\\n                                        <div class=\\\"rect3\\\"></div>\\r\\n                                        <div class=\\\"rect4\\\"></div>\\r\\n                                        <div class=\\\"rect5\\\"></div>\\r\\n                                    </div>\\r\\n                                </td>\\r\\n                            </tr>\\r\\n                            </tbody>\\r\\n                            <tbody\\r\\n                                *ngIf=\\\"listShiftGroups.length === 0 && !isSearchingShiftGroup; else shiftGroupContentTemplate\\\">\\r\\n                            <tr>\\r\\n                                <td colspan=\\\"5\\\" class=\\\"center bold\\\">\\r\\n                                    Chưa cấu hình nhóm ca làm việc click\\r\\n                                    <a href=\\\"javascript://\\\" (click)=\\\"showShiftGroupFormModal()\\\">vào đây</a>\\r\\n                                    để thêm cấu hình nhóm ca làm việc\\r\\n                                </td>\\r\\n                            </tr>\\r\\n                            </tbody>\\r\\n                            <tbody>\\r\\n                            <ng-template #shiftGroupContentTemplate>\\r\\n                            <tbody>\\r\\n                            <tr *ngFor=\\\"let shiftGroup of listShiftGroups; let i = index\\\">\\r\\n                                <td class=\\\"center\\\">{{ i + 1 }}</td>\\r\\n                                <td>\\r\\n                                    what the fuck?\\r\\n                                    <a href=\\\"javascript://\\\" (click)=\\\"editGroup(shiftGroup)\\\">{{ shiftGroup.name }}</a>\\r\\n                                </td>\\r\\n                                <td>{{ shiftGroup.description }}</td>\\r\\n                                <td class=\\\"center\\\">\\r\\n                                    <mat-checkbox color=\\\"primary\\\" [checked]=\\\"shiftGroup.isActive\\\"\\r\\n                                                  (change)=\\\"updateGroupActive(shiftGroup)\\\"\\r\\n                                    ></mat-checkbox>\\r\\n                                </td>\\r\\n                                <td class=\\\"center\\\">\\r\\n                                    <button type=\\\"button\\\" mat-mini-fab color=\\\"primary\\\"\\r\\n                                            matTooltip=\\\"Sửa\\\" matTooltipPosition=\\\"above\\\"\\r\\n                                            (click)=\\\"editGroup(shiftGroup)\\\">\\r\\n                                        <!--<i class=\\\"fa fa-edit\\\"></i>-->\\r\\n                                        <mat-icon>edit</mat-icon>\\r\\n                                    </button>\\r\\n                                    <button type=\\\"button\\\" mat-mini-fab color=\\\"warn\\\"\\r\\n                                            matTooltip=\\\"Xóa\\\" matTooltipPosition=\\\"above\\\"\\r\\n                                            (click)=\\\"deleteGroup(shiftGroup)\\\">\\r\\n                                        <!--<i class=\\\"fa fa-trash-o\\\"></i>-->\\r\\n                                        <mat-icon>delete</mat-icon>\\r\\n                                    </button>\\r\\n                                </td>\\r\\n                            </tr>\\r\\n                            </tbody>\\r\\n                            </ng-template>\\r\\n                            </tbody>\\r\\n                        </table>\\r\\n                    </div>\\r\\n                </div><!-- END: .table-responsive -->\\r\\n            </mat-tab><!-- END: .tab-shift-group -->\\r\\n            <mat-tab class=\\\"tab-shift\\\">\\r\\n                <ng-template mat-tab-label>\\r\\n                    <i class=\\\"fa fa-codepen cm-mgr-5\\\"></i> Danh sách ca làm việc\\r\\n                </ng-template>\\r\\n                <div class=\\\"text-right cm-mgb-10 cm-pdt-10\\\">\\r\\n                    <button mat-raised-button color=\\\"primary\\\" type=\\\"button\\\" (click)=\\\"showShiftFormModal()\\\">\\r\\n                        <i class=\\\"fa fa-plus cm-mgr-5\\\"></i>\\r\\n                        Thêm ca làm việc\\r\\n                    </button>\\r\\n                </div>\\r\\n                <div class=\\\"table-responsive\\\">\\r\\n                    <table class=\\\"table table-bordered table-striped table-hover\\\">\\r\\n                        <thead>\\r\\n                        <tr>\\r\\n                            <th class=\\\"center w50\\\">STT</th>\\r\\n                            <th class=\\\"center\\\">Tên ca</th>\\r\\n                            <th class=\\\"center\\\">Vào</th>\\r\\n                            <th class=\\\"center\\\">Ra</th>\\r\\n                            <th class=\\\"center\\\"></th>\\r\\n                        </tr>\\r\\n                        </thead>\\r\\n                        <tbody *ngIf=\\\"listShifts.length === 0; else shiftContentTemplate\\\">\\r\\n                        <tr>\\r\\n                            <td colspan=\\\"5\\\" class=\\\"bold center\\\">\\r\\n                                Chưa cấu hình ca làm việc click\\r\\n                                <a href=\\\"javascript://\\\" (click)=\\\"showShiftFormModal()\\\">vào đây</a>\\r\\n                                để thêm cấu hình ca làm việc\\r\\n                            </td>\\r\\n                        </tr>\\r\\n                        </tbody>\\r\\n                        <ng-template #shiftContentTemplate>\\r\\n                            <tbody>\\r\\n                            <tr *ngFor=\\\"let shift of listShifts; let i = index\\\">\\r\\n                                <td class=\\\"center\\\">{{i+1}}</td>\\r\\n                                <td>\\r\\n                                    <a href=\\\"javascript://\\\" (click)=\\\"edit(shift)\\\">{{shift.name}}</a>\\r\\n                                </td>\\r\\n                                <td class=\\\"text-right\\\">{{shift.startTime?.hour}}:{{shift.startTime?.minute}}</td>\\r\\n                                <td class=\\\"text-right\\\">{{shift.endTime?.hour}}:{{shift.endTime?.minute}}</td>\\r\\n                                <td class=\\\"center w100\\\">\\r\\n                                    <button type=\\\"button\\\" mat-mini-fab color=\\\"primary\\\" (click)=\\\"edit(shift)\\\"\\r\\n                                            matTooltip=\\\"Sửa\\\" matTooltipPosition=\\\"above\\\">\\r\\n                                        <!--<i class=\\\"fa fa-edit\\\"></i>-->\\r\\n                                        <mat-icon>edit</mat-icon>\\r\\n                                    </button>\\r\\n                                    <button type=\\\"button\\\" mat-mini-fab color=\\\"warn\\\" (click)=\\\"delete(shift)\\\"\\r\\n                                            matTooltip=\\\"Xóa\\\" matTooltipPosition=\\\"above\\\">\\r\\n                                        <!--<i class=\\\"fa fa-trash-o\\\"></i>-->\\r\\n                                        <mat-icon>delete</mat-icon>\\r\\n                                    </button>\\r\\n                                </td>\\r\\n                            </tr>\\r\\n                            </tbody>\\r\\n                        </ng-template>\\r\\n                    </table>\\r\\n                </div>\\r\\n            </mat-tab><!-- END: .tab-shift -->\\r\\n        </mat-tab-group>\\r\\n\\r\\n        <nh-modal #timekeepingShiftGroupModal (onShown)=\\\"onGroupModalShow()\\\" [size]=\\\"'md'\\\">\\r\\n            <nh-modal-header [showCloseButton]=\\\"true\\\">\\r\\n                <h4 class=\\\"title\\\">\\r\\n                    <i class=\\\"fa fa-th-list\\\"></i>\\r\\n                    Danh sách nhóm ca làm việc\\r\\n                </h4>\\r\\n            </nh-modal-header>\\r\\n            <nh-modal-content>\\r\\n                <div class=\\\"text-right cm-mgb-10\\\">\\r\\n                    <button class=\\\"btn btn-primary\\\" type=\\\"button\\\" (click)=\\\"showShiftGroupFormModal()\\\">\\r\\n                        <i class=\\\"fa fa-plus\\\"></i>\\r\\n                        Thêm mới nhóm\\r\\n                    </button>\\r\\n                </div>\\r\\n                <div class=\\\"table-responsive\\\">\\r\\n                    <table class=\\\"table table-bordered table-striped table-hover\\\">\\r\\n                        <thead>\\r\\n                        <tr>\\r\\n                            <th class=\\\"center w50\\\">STT</th>\\r\\n                            <th class=\\\"center\\\">Tên nhóm</th>\\r\\n                            <th class=\\\"center\\\">Mô tả</th>\\r\\n                            <th class=\\\"center w100\\\">Sử dụng</th>\\r\\n                            <th class=\\\"center w100\\\"></th>\\r\\n                        </tr>\\r\\n                        </thead>\\r\\n                        <tbody *ngIf=\\\"isSearchingShiftGroup\\\">\\r\\n                        <tr>\\r\\n                            <td colspan=\\\"5\\\">\\r\\n                                <div class=\\\"spinner\\\">\\r\\n                                    <div class=\\\"rect1\\\"></div>\\r\\n                                    <div class=\\\"rect2\\\"></div>\\r\\n                                    <div class=\\\"rect3\\\"></div>\\r\\n                                    <div class=\\\"rect4\\\"></div>\\r\\n                                    <div class=\\\"rect5\\\"></div>\\r\\n                                </div>\\r\\n                            </td>\\r\\n                        </tr>\\r\\n                        </tbody>\\r\\n                        <tbody\\r\\n                            *ngIf=\\\"listShiftGroups.length === 0 && !isSearchingShiftGroup; else shiftGroupContentTemplate\\\">\\r\\n                        <tr>\\r\\n                            <td colspan=\\\"5\\\" class=\\\"center bold\\\">\\r\\n                                Chưa cấu hình nhóm ca làm việc click\\r\\n                                <a href=\\\"javascript://\\\" (click)=\\\"showShiftGroupFormModal()\\\">vào đây</a>\\r\\n                                để thêm cấu hình ca làm việc\\r\\n                            </td>\\r\\n                        </tr>\\r\\n                        </tbody>\\r\\n                        <tbody>\\r\\n                        <ng-template #shiftGroupContentTemplate>\\r\\n                        <tbody>\\r\\n                        <tr *ngFor=\\\"let shiftGroup of listShiftGroups; let i = index\\\">\\r\\n                            <td class=\\\"center\\\">{{ i + 1 }}</td>\\r\\n                            <td>{{ shiftGroup.name }}</td>\\r\\n                            <td>{{ shiftGroup.description }}</td>\\r\\n                            <td class=\\\"center\\\">\\r\\n                                <mat-checkbox color=\\\"primary\\\" [checked]=\\\"shiftGroup.isActive\\\"\\r\\n                                              (change)=\\\"updateGroupActive(shiftGroup)\\\"\\r\\n                                ></mat-checkbox>\\r\\n                            </td>\\r\\n                            <td class=\\\"center w100\\\">\\r\\n                                <button type=\\\"button\\\"\\r\\n                                        mat-mini-fab color=\\\"primary\\\"\\r\\n                                        (click)=\\\"editGroup(shiftGroup)\\\">\\r\\n                                    <!--<i class=\\\"fa fa-edit\\\"></i>-->\\r\\n                                    <mat-icon>edit</mat-icon>\\r\\n                                </button>\\r\\n                                <button class=\\\"btn btn-danger btn-sm\\\"\\r\\n                                        mat-mini-fab color=\\\"warn\\\"\\r\\n                                        (click)=\\\"deleteGroup(shiftGroup)\\\">\\r\\n                                    <!--<i class=\\\"fa fa-trash-o\\\"></i>-->\\r\\n                                    <mat-icon>delete</mat-icon>\\r\\n                                </button>\\r\\n                            </td>\\r\\n                        </tr>\\r\\n                        </tbody>\\r\\n                        </ng-template>\\r\\n                        </tbody>\\r\\n                    </table>\\r\\n                </div>\\r\\n            </nh-modal-content>\\r\\n            <nh-modal-footer>\\r\\n                <button type=\\\"button\\\"\\r\\n                        mat-raised-button color=\\\"default\\\"\\r\\n                        nh-dismiss=\\\"true\\\">\\r\\n                    <!--<i class=\\\"fa fa-times\\\"></i>-->\\r\\n                    <mat-icon>close</mat-icon>\\r\\n                    Đóng lại\\r\\n                </button>\\r\\n            </nh-modal-footer>\\r\\n        </nh-modal><!-- END: timekeepingShiftGroupModal -->\\r\\n\\r\\n        <nh-modal #timekeepingShiftFormModal [size]=\\\"'md'\\\"\\r\\n                  (onShown)=\\\"onShowShiftFormModal()\\\"\\r\\n                  (onHidden)=\\\"onHiddenModal()\\\">\\r\\n            <nh-modal-header [showCloseButton]=\\\"true\\\">\\r\\n                <h4 class=\\\"title\\\">\\r\\n                    <i class=\\\"fa\\\"\\r\\n                       [class.fa-plus]=\\\"!isUpdate\\\"\\r\\n                       [class.fa-edit]=\\\"isUpdate\\\"\\r\\n                    ></i>\\r\\n                    <span *ngIf=\\\"isUpdate; else addNewTextTemplate\\\">Cập nhật ca làm việc</span>\\r\\n                    <ng-template #addNewTextTemplate>\\r\\n                        Thêm mới ca làm việc\\r\\n                    </ng-template>\\r\\n                </h4>\\r\\n            </nh-modal-header>\\r\\n            <form class=\\\"form-horizontal\\\" (ngSubmit)=\\\"save()\\\" [formGroup]=\\\"formModel\\\">\\r\\n                <nh-modal-content>\\r\\n                    <div class=\\\"portlet box blue\\\">\\r\\n                        <div class=\\\"portlet-title\\\">\\r\\n                            <div class=\\\"caption\\\">\\r\\n                                <i class=\\\"fa fa-gift\\\"></i>Thông tin ca làm việc\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"portlet-body\\\">\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <label for=\\\"\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" [required]=\\\"true\\\"\\r\\n                                       ghmLabel=\\\"Tên ca làm việc\\\"></label>\\r\\n                                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"shiftName\\\"\\r\\n                                           placeholder=\\\"Nhập tên ca làm việc\\\" formControlName=\\\"name\\\">\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.name && isSubmitted\\\">\\r\\n                                        {{ formErrors.name }}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <label for=\\\"\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" [required]=\\\"true\\\"\\r\\n                                       ghmLabel=\\\"Tên báo cáo\\\"></label>\\r\\n                                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                    <input class=\\\"form-control\\\" id=\\\"reportName\\\"\\r\\n                                           placeholder=\\\"Nhập tên ca làm việc\\\" formControlName=\\\"reportName\\\">\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.reportName && isSubmitted\\\">\\r\\n                                        {{ formErrors.reportName }}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <label for=\\\"\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" [required]=\\\"true\\\"\\r\\n                                       ghmLabel=\\\"Mã ca\\\"></label>\\r\\n                                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"shiftCode\\\"\\r\\n                                           placeholder=\\\"Nhập ký hiệu ca VD: S - Ca sáng C - Ca chiều T - Ca tối\\\"\\r\\n                                           formControlName=\\\"code\\\">\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.code && isSubmitted\\\">\\r\\n                                        {{ formErrors.code }}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <label for=\\\"\\\" class=\\\"col-md-3 col-sm-4 control-label\\\"\\r\\n                                       ghmLabel=\\\"Là ca gối của ca\\\"></label>\\r\\n                                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                    <nh-select\\r\\n                                        [data]=\\\"listShifts\\\"\\r\\n                                        [title]=\\\"'-- Vui lòng chọn ca --'\\\"\\r\\n                                        formControlName=\\\"referenceId\\\"\\r\\n                                    ></nh-select>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <label for=\\\"\\\" class=\\\"col-md-3 col-sm-4 control-label\\\"\\r\\n                                       ghmLabel=\\\"Thời gian được phép\\\"></label>\\r\\n                                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                    <div class=\\\"input-group\\\">\\r\\n                                        <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Thời gian được phép đi trê\\\"\\r\\n                                               formControlName=\\\"inLatency\\\">\\r\\n                                        <span class=\\\"input-group-addon\\\">Phút đi trễ</span>\\r\\n                                        <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Thời gian được phép về sớm\\\"\\r\\n                                               formControlName=\\\"outLatency\\\">\\r\\n                                        <span class=\\\"input-group-addon\\\">Phút về sớm</span>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.inLatency && isSubmitted\\\">\\r\\n                                        {{ formErrors.inLatency }}\\r\\n                                    </div>\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.outLatency && isSubmitted\\\">\\r\\n                                        {{ formErrors.outLatency }}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <label for=\\\"\\\" class=\\\"ccol-md-2 col-sm-4 control-label\\\" ghmLabel=\\\"Giờ bắt đầu ca\\\"\\r\\n                                       [required]=\\\"true\\\"></label>\\r\\n                                <div class=\\\"col-sm-8 col-md-3\\\" formGroupName=\\\"startTime\\\">\\r\\n                                    <div class=\\\"input-group-input\\\" role=\\\"group\\\">\\r\\n                                        <input type=\\\"text\\\" class=\\\"form-control w70\\\" placeholder=\\\"Giờ\\\"\\r\\n                                               formControlName=\\\"hour\\\">\\r\\n                                        <span class=\\\"cm-pdt-10 cm-pdl-5 cm-pdr-5\\\">:</span>\\r\\n                                        <input type=\\\"text\\\" class=\\\"form-control w70\\\" placeholder=\\\"Phút\\\"\\r\\n                                               formControlName=\\\"minute\\\">\\r\\n                                    </div>\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.startTime.hour && isSubmitted\\\">\\r\\n                                        {{ formErrors.startTime.hour }}\\r\\n                                    </div>\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.startTime.minute && isSubmitted\\\">\\r\\n                                        {{ formErrors.startTime.minute }}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                <label for=\\\"\\\" class=\\\"col-md-2 col-sm-4 control-label\\\" ghmLabel=\\\"Giờ kết thúc ca\\\"\\r\\n                                       [required]=\\\"true\\\"></label>\\r\\n                                <div class=\\\"col-sm-8 col-md-4\\\" formGroupName=\\\"endTime\\\">\\r\\n                                    <div class=\\\"input-group-input\\\" role=\\\"group\\\">\\r\\n                                        <input type=\\\"text\\\" class=\\\"form-control w70\\\" placeholder=\\\"Giờ\\\"\\r\\n                                               formControlName=\\\"hour\\\">\\r\\n                                        <span class=\\\"cm-pdt-10 cm-pdl-5 cm-pdr-5\\\">:</span>\\r\\n                                        <input type=\\\"text\\\" class=\\\"form-control w70\\\" placeholder=\\\"Phút\\\"\\r\\n                                               formControlName=\\\"minute\\\">\\r\\n                                    </div>\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.endTime.hour && isSubmitted\\\">\\r\\n                                        {{ formErrors.endTime.hour }}\\r\\n                                    </div>\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.endTime.minute && isSubmitted\\\">\\r\\n                                        {{ formErrors.endTime.minute }}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <label for=\\\"\\\" class=\\\"\\\" ghmLabel=\\\"Tính\\\" [required]=\\\"true\\\"></label>\\r\\n                                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                    <div class=\\\"input-group\\\">\\r\\n                                        <input type=\\\"text\\\" class=\\\"form-control\\\"\\r\\n                                               placeholder=\\\"Nhập số công sẽ được tính cho ca làm việc này\\\"\\r\\n                                               formControlName=\\\"workUnit\\\">\\r\\n                                        <span class=\\\"input-group-addon\\\">Công</span>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.workUnit && isSubmitted\\\">\\r\\n                                        {{ formErrors.workUnit }}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <hr>\\r\\n                    <div class=\\\"portlet box blue\\\">\\r\\n                        <div class=\\\"portlet-title\\\">\\r\\n                            <div class=\\\"caption\\\">\\r\\n                                <i class=\\\"fa fa-gift\\\"></i>Thời gian hiểu ca\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"portlet-body\\\">\\r\\n                            <div formGroupName=\\\"meaningTime\\\">\\r\\n                                <div class=\\\"form-group\\\">\\r\\n                                    <label for=\\\"\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" ghmLabel=\\\"Giờ bắt đầu ca vào\\\"\\r\\n                                           [required]=\\\"true\\\"></label>\\r\\n                                    <div class=\\\"col-sm-8 col-md-9\\\" formGroupName=\\\"startTimeIn\\\">\\r\\n                                        <div class=\\\"input-group-input\\\" role=\\\"group\\\">\\r\\n                                            <input type=\\\"text\\\" class=\\\"form-control w70\\\" placeholder=\\\"Giờ\\\"\\r\\n                                                   formControlName=\\\"hour\\\">\\r\\n                                            <span class=\\\"cm-pdt-10 cm-pdl-5 cm-pdr-5\\\">:</span>\\r\\n                                            <input type=\\\"text\\\" class=\\\"form-control w70\\\" placeholder=\\\"Phút\\\"\\r\\n                                                   formControlName=\\\"minute\\\">\\r\\n                                        </div>\\r\\n                                        <div class=\\\"alert alert-danger\\\"\\r\\n                                             *ngIf=\\\"formErrors.meaningTime.startTimeIn.hour && isSubmitted\\\">\\r\\n                                            {{ formErrors.meaningTime.startTimeIn.hour }}\\r\\n                                        </div>\\r\\n                                        <div class=\\\"alert alert-danger\\\"\\r\\n                                             *ngIf=\\\"formErrors.meaningTime.startTimeIn.minute && isSubmitted\\\">\\r\\n                                            {{ formErrors.meaningTime.startTimeIn.minute }}\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                <div class=\\\"form-group\\\">\\r\\n                                    <label for=\\\"\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" ghmLabel=\\\"Giờ kết thúc ca vào\\\"\\r\\n                                           [required]=\\\"true\\\"></label>\\r\\n                                    <div class=\\\"col-sm-8 col-md-9\\\" formGroupName=\\\"endTimeIn\\\">\\r\\n                                        <div class=\\\"input-group-input\\\" role=\\\"group\\\">\\r\\n                                            <input type=\\\"text\\\" class=\\\"form-control w70\\\" placeholder=\\\"Giờ\\\"\\r\\n                                                   formControlName=\\\"hour\\\">\\r\\n                                            <span class=\\\"cm-pdt-10 cm-pdl-5 cm-pdr-5\\\">:</span>\\r\\n                                            <input type=\\\"text\\\" class=\\\"form-control w70\\\" placeholder=\\\"Phút\\\"\\r\\n                                                   formControlName=\\\"minute\\\">\\r\\n                                        </div>\\r\\n                                        <div class=\\\"alert alert-danger\\\"\\r\\n                                             *ngIf=\\\"formErrors.meaningTime.endTimeIn.hour && isSubmitted\\\">\\r\\n                                            {{ formErrors.meaningTime.endTimeIn.hour }}\\r\\n                                        </div>\\r\\n                                        <div class=\\\"alert alert-danger\\\"\\r\\n                                             *ngIf=\\\"formErrors.meaningTime.endTimeIn.minute && isSubmitted\\\">\\r\\n                                            {{ formErrors.meaningTime.endTimeIn.minute }}\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                <div class=\\\"form-group\\\">\\r\\n                                    <label for=\\\"\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" ghmLabel=\\\"Giờ bắt đầu ca ra\\\"\\r\\n                                           [required]=\\\"true\\\"></label>\\r\\n                                    <div class=\\\"col-sm-8 col-md-9\\\" formGroupName=\\\"startTimeOut\\\">\\r\\n                                        <div class=\\\"input-group-input\\\" role=\\\"group\\\">\\r\\n                                            <input type=\\\"text\\\" class=\\\"form-control w70\\\" placeholder=\\\"Giờ\\\"\\r\\n                                                   formControlName=\\\"hour\\\">\\r\\n                                            <span class=\\\"cm-pdt-10 cm-pdl-5 cm-pdr-5\\\">:</span>\\r\\n                                            <input type=\\\"text\\\" class=\\\"form-control w70\\\" placeholder=\\\"Phút\\\"\\r\\n                                                   formControlName=\\\"minute\\\">\\r\\n                                        </div>\\r\\n                                        <div class=\\\"alert alert-danger\\\"\\r\\n                                             *ngIf=\\\"formErrors.meaningTime.startTimeOut.hour && isSubmitted\\\">\\r\\n                                            {{ formErrors.meaningTime.startTimeOut.hour }}\\r\\n                                        </div>\\r\\n                                        <div class=\\\"alert alert-danger\\\"\\r\\n                                             *ngIf=\\\"formErrors.meaningTime.startTimeOut.minute && isSubmitted\\\">\\r\\n                                            {{ formErrors.meaningTime.startTimeOut.minute }}\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                <div class=\\\"form-group\\\">\\r\\n                                    <label for=\\\"\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" ghmLabel=\\\"Giờ kết thúc ca ra\\\"\\r\\n                                           [required]=\\\"true\\\"></label>\\r\\n                                    <div class=\\\"col-sm-8 col-md-9\\\" formGroupName=\\\"endTimeOut\\\">\\r\\n                                        <div class=\\\"input-group-input\\\" role=\\\"group\\\">\\r\\n                                            <input type=\\\"text\\\" class=\\\"form-control w70\\\" placeholder=\\\"Giờ\\\"\\r\\n                                                   formControlName=\\\"hour\\\">\\r\\n                                            <span class=\\\"cm-pdt-10 cm-pdl-5 cm-pdr-5\\\">:</span>\\r\\n                                            <input type=\\\"text\\\" class=\\\"form-control w70\\\" placeholder=\\\"Phút\\\"\\r\\n                                                   formControlName=\\\"minute\\\">\\r\\n                                        </div>\\r\\n                                        <div class=\\\"alert alert-danger\\\"\\r\\n                                             *ngIf=\\\"formErrors.meaningTime.endTimeOut.hour && isSubmitted\\\">\\r\\n                                            {{ formErrors.meaningTime.endTimeOut.hour }}\\r\\n                                        </div>\\r\\n                                        <div class=\\\"alert alert-danger\\\"\\r\\n                                             *ngIf=\\\"formErrors.meaningTime.endTimeOut.minute && isSubmitted\\\">\\r\\n                                            {{ formErrors.meaningTime.endTimeOut.minute }}\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <div class=\\\"col-sm-8 col-md-9 col-sm-offset-4 col-md-offset-3\\\">\\r\\n                                    <mat-slide-toggle color=\\\"primary\\\" formControlName=\\\"isOvertime\\\">Ca này được tính là\\r\\n                                        làm thêm giờ\\r\\n                                    </mat-slide-toggle>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </nh-modal-content>\\r\\n                <nh-modal-footer>\\r\\n                    <button type=\\\"submit\\\" mat-raised-button color=\\\"primary\\\">\\r\\n                        <!--<i class=\\\"fa fa-save\\\" *ngIf=\\\"!isSaving\\\"></i>-->\\r\\n                        <!--<i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSaving\\\"></i>-->\\r\\n                        <mat-icon>save</mat-icon>\\r\\n                        Lưu lại\\r\\n                    </button>\\r\\n                    <button type=\\\"button\\\" mat-raised-button nh-dismiss=\\\"true\\\">\\r\\n                        <!--<i class=\\\"fa fa-times\\\"></i>-->\\r\\n                        <mat-icon>close</mat-icon>\\r\\n                        Đóng lại\\r\\n                    </button>\\r\\n                </nh-modal-footer>\\r\\n            </form>\\r\\n        </nh-modal><!-- END: timekeepingShiftFormModal -->\\r\\n\\r\\n        <nh-modal #timekeepingShiftGroupFormModal [size]=\\\"'sm'\\\" (onHidden)=\\\"onHiddenModal()\\\">\\r\\n            <nh-modal-header [showCloseButton]=\\\"true\\\">\\r\\n                <h4 class=\\\"title\\\">\\r\\n                    <i class=\\\"fa\\\"\\r\\n                       [class.fa-plus]=\\\"!isUpdate\\\"\\r\\n                       [class.fa-edit]=\\\"isUpdate\\\"\\r\\n                    ></i>\\r\\n                    <span *ngIf=\\\"isUpdate; else addNewTextTemplate\\\">Cập nhật nhóm</span>\\r\\n                    <ng-template #addNewTextTemplate>\\r\\n                        Thêm mới nhóm\\r\\n                    </ng-template>\\r\\n                </h4>\\r\\n            </nh-modal-header>\\r\\n            <form class=\\\"form-horizontal\\\" (ngSubmit)=\\\"saveGroup()\\\" [formGroup]=\\\"groupFormModel\\\">\\r\\n                <nh-modal-content>\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <label for=\\\"\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" [required]=\\\"true\\\"\\r\\n                               ghmLabel=\\\"Tên nhóm\\\"></label>\\r\\n                        <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                            <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"shiftGroupName\\\"\\r\\n                                   placeholder=\\\"Nhập tên nhóm ca làm việc\\\"\\r\\n                                   formControlName=\\\"name\\\">\\r\\n                            <div class=\\\"alert alert-danger\\\" *ngIf=\\\"groupFormErrors.name && isSubmitted\\\">\\r\\n                                {{ groupFormErrors.name }}\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <label for=\\\"\\\" class=\\\"col-md-3 col-sm-4 control-label\\\"\\r\\n                               ghmLabel=\\\"Mô tả\\\"></label>\\r\\n                        <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                            <textarea type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"shiftGroupDescription\\\"\\r\\n                                      placeholder=\\\"Nhập mô tả nhóm ca làm việc\\\"\\r\\n                                      formControlName=\\\"description\\\"></textarea>\\r\\n                            <div class=\\\"alert alert-danger\\\" *ngIf=\\\"groupFormErrors.description && isSubmitted\\\">\\r\\n                                {{ groupFormErrors.description }}\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <div class=\\\"col-sm-8 col-md-9 col-sm-offset-4 col-md-offset-3\\\">\\r\\n                            <mat-slide-toggle color=\\\"primary\\\" formControlName=\\\"isActive\\\">Sử dụng nhóm này\\r\\n                            </mat-slide-toggle>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group\\\">\\r\\n\\r\\n                        <label for=\\\"\\\" class=\\\"col-md-3 col-sm-4 control-label\\\"\\r\\n                               ghmLabel=\\\"Ca làm việc\\\"></label>\\r\\n                        <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                            <nh-select\\r\\n                                #selectShiftDropdown\\r\\n                                [multiple]=\\\"true\\\"\\r\\n                                [data]=\\\"listShifts\\\"\\r\\n                                [title]=\\\"'-- Chọn ca làm việc --'\\\"\\r\\n                                (onSelectItem)=\\\"onSelectShift($event)\\\"\\r\\n                            ></nh-select>\\r\\n                            <div class=\\\"alert alert-danger\\\" *ngIf=\\\"groupFormErrors.shifts && isSubmitted\\\">\\r\\n                                {{ groupFormErrors.shifts }}\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <div class=\\\"col-sm-8 col-md-9 col-sm-offset-4 col-md-offset-3\\\">\\r\\n                            <table class=\\\"table table-bordered table-striped table-hover\\\">\\r\\n                                <thead>\\r\\n                                <tr>\\r\\n                                    <th class=\\\"center w50\\\">STT</th>\\r\\n                                    <th class=\\\"center\\\">Tên ca</th>\\r\\n                                    <th class=\\\"center\\\">Mã ca</th>\\r\\n                                    <th class=\\\"center w100\\\">Vào</th>\\r\\n                                    <th class=\\\"center w100\\\">Ra</th>\\r\\n                                </tr>\\r\\n                                </thead>\\r\\n                                <tbody>\\r\\n                                <tr *ngFor=\\\"let item of groupFormModel.value.shifts; let i = index\\\">\\r\\n                                    <td class=\\\"center\\\">{{i+ 1}}</td>\\r\\n                                    <td>{{item.name}}</td>\\r\\n                                    <td class=\\\"center\\\">{{item.code}}</td>\\r\\n                                    <td>{{item.startTime.hour}}:{{item.startTime.minute}}</td>\\r\\n                                    <td>{{item.endTime.hour}}:{{item.endTime.minute}}</td>\\r\\n                                </tr>\\r\\n                                </tbody>\\r\\n                            </table>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </nh-modal-content>\\r\\n                <nh-modal-footer>\\r\\n                    <button type=\\\"submit\\\" mat-raised-button color=\\\"primary\\\">\\r\\n                        <!--<i class=\\\"fa fa-save\\\" *ngIf=\\\"!isSaving\\\"></i>-->\\r\\n                        <!--<i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSaving\\\"></i>-->\\r\\n                        <mat-icon>save</mat-icon>\\r\\n                        Lưu lại\\r\\n                    </button>\\r\\n                    <button type=\\\"button\\\" mat-raised-button nh-dismiss=\\\"true\\\">\\r\\n                        <!--<i class=\\\"fa fa-times\\\"></i>-->\\r\\n                        <mat-icon>close</mat-icon>\\r\\n                        Đóng lại\\r\\n                    </button>\\r\\n                </nh-modal-footer>\\r\\n            </form>\\r\\n        </nh-modal><!-- END: timekeepingShiftGroupFormModal -->\\r\\n    </div>\\r\\n</div><!-- END: .portlet-shift -->\\r\\n\"","/**\r\n * Created by HoangIT21 on 7/8/2017.\r\n */\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { BaseComponent } from '../../../../base.component';\r\nimport * as _ from 'lodash';\r\nimport { finalize } from 'rxjs/operators';\r\nimport { SpinnerService } from '../../../../core/spinner/spinner.service';\r\nimport { NumberValidator } from '../../../../validators/number.validator';\r\nimport { NhModalComponent } from '../../../../shareds/components/nh-modal/nh-modal.component';\r\nimport { NhSelectComponent } from '../../../../shareds/components/nh-select/nh-select.component';\r\nimport { ShiftGroup } from './shift-group.model';\r\nimport { Shift } from './timekeeping-shift.model';\r\nimport { UtilService } from '../../../../shareds/services/util.service';\r\nimport { TimekeepingConfigService } from '../timekeeping-config.service';\r\n\r\n@Component({\r\n    selector: 'app-timekeeping-config-shift',\r\n    templateUrl: './timekeeping-config-shift.component.html',\r\n    providers: [NumberValidator]\r\n})\r\n\r\nexport class TimekeepingConfigShiftComponent extends BaseComponent implements OnInit {\r\n    @ViewChild('timekeepingShiftGroupModal') timekeepingShiftGroupModal: NhModalComponent;\r\n    @ViewChild('timekeepingShiftFormModal') timekeepingShiftFormModal: NhModalComponent;\r\n    @ViewChild('timekeepingShiftGroupFormModal') timekeepingShiftGroupFormModal: NhModalComponent;\r\n    @ViewChild('selectShiftDropdown') selectShiftDropdown: NhSelectComponent;\r\n    formModel: FormGroup;\r\n    groupFormModel: FormGroup;\r\n    groupFormErrors: any = {};\r\n    groupValidationMessages = {};\r\n    shiftElements: any = {};\r\n    groupElements: any = {};\r\n\r\n    isSearchingShiftGroup = false;\r\n    shift = new Shift();\r\n    shiftGroup = new ShiftGroup();\r\n    listShifts: Shift[] = [];\r\n    listShiftGroups: ShiftGroup[] = [];\r\n    listShiftGroupsActive: ShiftGroup[] = [];\r\n\r\n    constructor(private fb: FormBuilder,\r\n                private toastr: ToastrService,\r\n                private numberValidator: NumberValidator,\r\n                private spinnerService: SpinnerService,\r\n                private utilService: UtilService,\r\n                private timekeepingConfigService: TimekeepingConfigService) {\r\n        super();\r\n\r\n        // Render form errors\r\n        this.shiftElements = {\r\n            'name': 'shiftName',\r\n            'code': 'shiftCode'\r\n        };\r\n\r\n        this.groupElements = {\r\n            'name': 'shiftGroupName',\r\n            'description': 'shiftGroupDescription'\r\n        };\r\n        this.renderFormErrorValue();\r\n        this.renderFormValidateionMessage();\r\n    }\r\n\r\n    ngOnInit() {\r\n        // Build form\r\n        this.buildShiftForm();\r\n        this.buildShiftGroupForm();\r\n\r\n        this.searchAll();\r\n        this.searchAllGroup();\r\n    }\r\n\r\n    onSelectShift(shifts: Shift[]) {\r\n        console.log(shifts);\r\n        this.groupFormModel.patchValue({'shifts': shifts});\r\n    }\r\n\r\n    showShiftFormModal() {\r\n        this.timekeepingShiftFormModal.show();\r\n        this.utilService.focusElement('shiftName');\r\n    }\r\n\r\n    showShifGroupModal() {\r\n        this.timekeepingShiftGroupModal.show();\r\n    }\r\n\r\n    showShiftGroupFormModal() {\r\n        this.timekeepingShiftGroupFormModal.show();\r\n        this.utilService.focusElement('shiftGroupName');\r\n    }\r\n\r\n    edit(shift: Shift) {\r\n        this.isUpdate = true;\r\n        this.formModel.patchValue(shift);\r\n        this.timekeepingShiftFormModal.show();\r\n    }\r\n\r\n    editGroup(shiftGroup: ShiftGroup) {\r\n        console.log(shiftGroup);\r\n        this.groupFormModel.patchValue(shiftGroup);\r\n        this.isUpdate = true;\r\n        this.timekeepingShiftGroupFormModal.show();\r\n    }\r\n\r\n    delete(shift: Shift) {\r\n        // swal({\r\n        //     title: `Bạn có chắc chắn muốn xóa ngày lễ: \"${shift.name}\"`,\r\n        //     text: 'Lưu ý: sau khi xóa bạn không thể lấy lại được ngày lễ này.',\r\n        //     type: 'warning',\r\n        //     showCancelButton: true,\r\n        //     confirmButtonColor: '#DD6B55',\r\n        //     confirmButtonText: 'Đồng ý',\r\n        //     cancelButtonText: 'Hủy bỏ'\r\n        // }).then(() => {\r\n        //     this.spinnerService.show('Đang tiến hành xóa dữ liệu. Vui lòng đợi...');\r\n        //     this.timekeepingConfigService.deleteShift(shift.id)\r\n        //         .finally(() => this.spinnerService.hide())\r\n        //         .subscribe(() => {\r\n        //             this.toastr.success(this.formatString(this.message.deleteSuccess, 'ca làm việc'));\r\n        //             _.remove(this.listShifts, (shiftItem: Shift) => {\r\n        //                 return shiftItem.id === shift.id;\r\n        //             });\r\n        //         });\r\n        // }, () => {\r\n        // });\r\n    }\r\n\r\n    deleteGroup(shiftGroup: ShiftGroup) {\r\n        // swal({\r\n        //     title: `Bạn có chắc chắn muốn xóa nhóm ca làm việc \"${shiftGroup.name}\"`,\r\n        //     text: 'Lưu ý: sau khi xóa bạn không thể lấy lại được nhóm ca làm việc này.',\r\n        //     type: 'warning',\r\n        //     showCancelButton: true,\r\n        //     confirmButtonColor: '#DD6B55',\r\n        //     confirmButtonText: 'Đồng ý',\r\n        //     cancelButtonText: 'Hủy bỏ'\r\n        // }).then(() => {\r\n        //     this.spinnerService.show('Đang tiến hành xóa dữ liệu. Vui lòng đợi.');\r\n        //     this.timekeepingConfigService.deleteShiftGroup(shiftGroup.id)\r\n        //         .finally(() => this.spinnerService.hide())\r\n        //         .subscribe(() => {\r\n        //             this.toastr.success(this.formatString(this.message.deleteSuccess, 'nhóm ca làm việc'));\r\n        //             _.remove(this.listShiftGroups, (shiftGroupItem: ShiftGroup) => {\r\n        //                 return shiftGroupItem.id === shiftGroup.id;\r\n        //             });\r\n        //         });\r\n        // }, () => {\r\n        // });\r\n    }\r\n\r\n    save() {\r\n        this.isSubmitted = true;\r\n        this.shift = this.formModel.value;\r\n        const isValid = this.utilService.onValueChanged(this.formModel, this.formErrors, this.validationMessages, this.shiftElements);\r\n        if (isValid) {\r\n            this.spinnerService.show('Đang lưu dữ liệu. Vui lòng đợi...');\r\n            this.isSubmitted = false;\r\n            if (this.isUpdate) {\r\n                this.timekeepingConfigService.updateShift(this.shift)\r\n                    .pipe(finalize(() => this.spinnerService.hide()))\r\n                    .subscribe(result => {\r\n                        this.isUpdate = false;\r\n                        this.searchAll();\r\n                        this.toastr.success(this.formatString(this.message.updateSuccess, 'Ca làm việc'));\r\n                        this.formModel.reset(new Shift());\r\n                        this.timekeepingShiftFormModal.dismiss();\r\n                        this.searchAllGroup();\r\n                    });\r\n            } else {\r\n                this.timekeepingConfigService.insertShift(this.shift)\r\n                    .pipe(finalize(() => this.spinnerService.hide()))\r\n                    .subscribe(() => {\r\n                        this.toastr.success(this.formatString(this.message.insertSuccess, 'Ca làm việc'));\r\n                        this.formModel.reset(new Shift());\r\n                        this.utilService.focusElement('shiftName');\r\n                        this.searchAll();\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    saveGroup() {\r\n        this.isSubmitted = true;\r\n        this.shiftGroup = this.groupFormModel.value;\r\n        const isValid = this.utilService.onValueChanged(this.groupFormModel, this.groupFormErrors,\r\n            this.groupValidationMessages, this.groupElements);\r\n        if (isValid) {\r\n            this.spinnerService.show('Đang lưu dữ liệu, vui lòng đợi...');\r\n            this.isSubmitted = false;\r\n            if (this.isUpdate) {\r\n                this.timekeepingConfigService.updateShiftGroup(this.shiftGroup)\r\n                    .pipe(finalize(() => this.spinnerService.hide()))\r\n                    .subscribe(result => {\r\n                        this.isUpdate = false;\r\n                        this.searchAllGroup();\r\n                        this.toastr.success(this.formatString(this.message.updateSuccess, 'Nhóm ca làm việc'));\r\n                        this.groupFormModel.reset(new ShiftGroup());\r\n                        this.timekeepingShiftGroupFormModal.dismiss();\r\n\r\n                    });\r\n            } else {\r\n                this.timekeepingConfigService.insertShiftGroup(this.shiftGroup)\r\n                    .pipe(finalize(() => this.spinnerService.hide()))\r\n                    .subscribe((result: any) => {\r\n                        this.listShiftGroups = [...this.listShiftGroups, result];\r\n                        this.toastr.success(this.formatString(this.message.insertSuccess, 'Nhóm ca làm việc'));\r\n                        this.groupFormModel.reset(new ShiftGroup());\r\n                        this.selectShiftDropdown.resetSelectedList();\r\n                        this.utilService.focusElement('shiftGroupName');\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    onGroupModalShow() {\r\n        if (this.listShiftGroups.length === 0) {\r\n            this.isSearchingShiftGroup = true;\r\n            this.timekeepingConfigService.searchAllShiftGroup()\r\n                .pipe(finalize(() => this.isSearchingShiftGroup = false))\r\n                .subscribe((result: any) => this.listShiftGroups = result);\r\n        }\r\n    }\r\n\r\n    onShowShiftFormModal() {\r\n        if (this.listShiftGroupsActive.length === 0) {\r\n            if (this.listShiftGroupsActive.length > 0) {\r\n                this.listShiftGroupsActive = _.filter(this.listShiftGroups, (shiftGroup: ShiftGroup) => {\r\n                    return shiftGroup.isActive;\r\n                });\r\n            } else {\r\n                this.isSearchingShiftGroup = true;\r\n                this.timekeepingConfigService.searchAllShiftGroupActive()\r\n                    .pipe(finalize(() => this.isSearchingShiftGroup = false))\r\n                    .subscribe((result: any) => this.listShiftGroupsActive = result);\r\n            }\r\n        }\r\n    }\r\n\r\n    onHiddenModal() {\r\n        this.isUpdate = false;\r\n        this.formModel.reset(new Shift());\r\n        this.groupFormModel.reset(new ShiftGroup());\r\n    }\r\n\r\n    searchAll() {\r\n        this.isSearching = true;\r\n        this.timekeepingConfigService.searchAllShift()\r\n            .pipe(finalize(() => this.isSearching = false))\r\n            .subscribe((result: any) => {\r\n                this.listShifts = result;\r\n            });\r\n    }\r\n\r\n    searchAllGroup() {\r\n        this.isSearchingShiftGroup = true;\r\n        this.timekeepingConfigService.searchAllShiftGroup()\r\n            .pipe(finalize(() => this.isSearchingShiftGroup = false))\r\n            .subscribe((result: ShiftGroup[]) => {\r\n                this.listShiftGroups = result;\r\n            });\r\n    }\r\n\r\n    updateGroupActive(shiftGroup: ShiftGroup) {\r\n        shiftGroup.isActive = !shiftGroup.isActive;\r\n        this.timekeepingConfigService.updateShiftGroupActive(shiftGroup.id, shiftGroup.isActive)\r\n            .subscribe(result => {\r\n            });\r\n    }\r\n\r\n    private buildShiftForm() {\r\n        this.formModel = this.fb.group({\r\n            'id': [this.shift.id],\r\n            'referenceId': [this.shift.referenceId],\r\n            'name': [this.shift.name, [\r\n                Validators.required,\r\n                Validators.maxLength(250)\r\n            ]],\r\n            'reportName': [this.shift.reportName, [\r\n                Validators.required,\r\n                Validators.maxLength(250)\r\n            ]],\r\n            'inLatency': [this.shift.inLatency, [\r\n                this.numberValidator.isValid,\r\n                this.numberValidator.range({fromValue: 0, toValue: 60})\r\n            ]],\r\n            'outLatency': [this.shift.outLatency, [\r\n                this.numberValidator.isValid,\r\n                this.numberValidator.range({fromValue: 0, toValue: 60})\r\n            ]],\r\n            'workUnit': [this.shift.workUnit, [\r\n                this.numberValidator.isValid,\r\n                this.numberValidator.isValid,\r\n                this.numberValidator.greaterThan(0)\r\n            ]],\r\n            'code': [this.shift.code, [\r\n                Validators.required,\r\n                Validators.maxLength(20)\r\n            ]],\r\n            'isOvertime': [this.shift.isOvertime],\r\n            'startTime': this.fb.group({\r\n                'hour': [this.shift.startTime.hour, [\r\n                    Validators.required,\r\n                    this.numberValidator.isValid,\r\n                    this.numberValidator.range({fromValue: 0, toValue: 23})\r\n                ]],\r\n                'minute': [this.shift.startTime.minute, [\r\n                    Validators.required,\r\n                    this.numberValidator.isValid,\r\n                    this.numberValidator.range({fromValue: 0, toValue: 59})\r\n                ]]\r\n            }),\r\n            'endTime': this.fb.group({\r\n                'hour': [this.shift.endTime.hour, [\r\n                    Validators.required,\r\n                    this.numberValidator.isValid,\r\n                    this.numberValidator.range({fromValue: 0, toValue: 23})\r\n                ]],\r\n                'minute': [this.shift.endTime.minute, [\r\n                    Validators.required,\r\n                    this.numberValidator.isValid,\r\n                    this.numberValidator.range({fromValue: 0, toValue: 59})\r\n                ]]\r\n            }),\r\n            'meaningTime': this.fb.group({\r\n                'startTimeIn': this.fb.group({\r\n                    'hour': [this.shift.meaningTime.startTimeIn.hour, [\r\n                        Validators.required,\r\n                        this.numberValidator.isValid,\r\n                        this.numberValidator.range({fromValue: 0, toValue: 23})\r\n                    ]],\r\n                    'minute': [this.shift.meaningTime.startTimeIn.minute, [\r\n                        Validators.required,\r\n                        this.numberValidator.isValid,\r\n                        this.numberValidator.range({fromValue: 0, toValue: 59})\r\n                    ]]\r\n                }),\r\n                'endTimeIn': this.fb.group({\r\n                    'hour': [this.shift.meaningTime.endTimeIn.hour, [\r\n                        Validators.required,\r\n                        this.numberValidator.isValid,\r\n                        this.numberValidator.range({fromValue: 0, toValue: 23})\r\n                    ]],\r\n                    'minute': [this.shift.meaningTime.endTimeIn.minute, [\r\n                        Validators.required,\r\n                        this.numberValidator.isValid,\r\n                        this.numberValidator.range({fromValue: 0, toValue: 59})\r\n                    ]]\r\n                }),\r\n                'startTimeOut': this.fb.group({\r\n                    'hour': [this.shift.meaningTime.startTimeOut.hour, [\r\n                        Validators.required,\r\n                        this.numberValidator.isValid,\r\n                        this.numberValidator.range({fromValue: 0, toValue: 23})\r\n                    ]],\r\n                    'minute': [this.shift.meaningTime.startTimeOut.minute, [\r\n                        Validators.required,\r\n                        this.numberValidator.isValid,\r\n                        this.numberValidator.range({fromValue: 0, toValue: 59})\r\n                    ]]\r\n                }),\r\n                'endTimeOut': this.fb.group({\r\n                    'hour': [this.shift.meaningTime.endTimeOut.hour, [\r\n                        Validators.required,\r\n                        this.numberValidator.isValid,\r\n                        this.numberValidator.range({fromValue: 0, toValue: 23})\r\n                    ]],\r\n                    'minute': [this.shift.meaningTime.endTimeOut.minute, [\r\n                        Validators.required,\r\n                        this.numberValidator.isValid,\r\n                        this.numberValidator.range({fromValue: 0, toValue: 59})\r\n                    ]]\r\n                })\r\n            })\r\n        });\r\n\r\n        // Main form change validate\r\n        this.formModel.valueChanges.subscribe(data =>\r\n            this.utilService.onValueChanged(this.formModel, this.formErrors, this.validationMessages, this.shiftElements, data));\r\n        this.utilService.onValueChanged(this.formModel, this.formErrors, this.validationMessages, this.shiftElements);\r\n    }\r\n\r\n    private buildShiftGroupForm() {\r\n        this.groupFormModel = this.fb.group({\r\n            'id': [this.shiftGroup.id],\r\n            'name': [this.shiftGroup.name, [\r\n                Validators.required,\r\n                Validators.maxLength(250)\r\n            ]],\r\n            'description': [this.shiftGroup.description,\r\n                Validators.maxLength(500)\r\n            ],\r\n            'shifts': [this.shiftGroup.shifts,\r\n                Validators.required\r\n            ],\r\n            'isActive': [this.shiftGroup.isActive]\r\n        });\r\n\r\n        this.groupFormModel.valueChanges.subscribe(data =>\r\n            this.utilService.onValueChanged(this.groupFormModel, this.groupFormErrors, this.groupValidationMessages, this.groupElements));\r\n        this.utilService.onValueChanged(this.groupFormModel, this.formErrors, this.validationMessages, this.groupElements);\r\n    }\r\n\r\n    private renderFormErrorValue() {\r\n        this.formErrors = {\r\n            'name': '',\r\n            'reportName': '',\r\n            'inLatency': '',\r\n            'outLatency': '',\r\n            'workUnit': '',\r\n            'code': '',\r\n            // 'group': this.renderFormError(['id']),\r\n            'startTime': this.utilService.renderFormError(['hour', 'minute']),\r\n            'endTime': this.utilService.renderFormError(['hour', 'minute']),\r\n            'meaningTime': {\r\n                'startTimeIn': this.utilService.renderFormError(['hour', 'minute']),\r\n                'endTimeIn': this.utilService.renderFormError(['hour', 'minute']),\r\n                'startTimeOut': this.utilService.renderFormError(['hour', 'minute']),\r\n                'endTimeOut': this.utilService.renderFormError(['hour', 'minute'])\r\n            }\r\n        };\r\n        this.groupFormErrors = this.utilService.renderFormError(['name', 'description', 'shifts']);\r\n    }\r\n\r\n    private renderFormValidateionMessage() {\r\n        this.validationMessages = {\r\n            'name': {\r\n                'required': 'Vui lòng nhập tên ca làm việc.',\r\n                'maxlength': 'Tên ca làm việc không được phép vượt quá 250 ký tự.'\r\n            },\r\n            'reportName': {\r\n                'required': 'Vui lòng nhập tên báo cáo',\r\n                'maxlength': 'Tên báo cáo không được phép vượt quá 250 ký tự.'\r\n            },\r\n            'inLatency': {\r\n                'isValid': 'Thời gian được phép đi trễ phải là số.',\r\n                'invalidRange': 'Thời gian được phép đi trế phải lớn hơn 0 và nhỏ hơn hoặc bằng 60 phút.'\r\n            },\r\n            'outLatency': {\r\n                'isValid': 'Thời gian được phép về sớm phải là số.',\r\n                'invalidRange': 'Thời gian được phép về sớm phải lớn hơn 0 và nhỏ hơn hoặc bằng 60 phút.'\r\n            },\r\n            'workUnit': {\r\n                'required': 'Vui lòng nhập đơn vị tính công',\r\n                'isValid': 'Đơn vị tính công phải là số.',\r\n                'greaterThan': 'Đơn vị tính công phải lớn hơn 0'\r\n            },\r\n            'code': {\r\n                'required': 'Vui lòng nhập mã ca làm việc.'\r\n            },\r\n            'startTime': {\r\n                'hour': {\r\n                    'required': 'Vui lòng nhập giờ bắt đầu ca làm việc',\r\n                    'isValid': 'Giờ bắt đầu ca làm việc phải là số.',\r\n                    'invalidRange': 'Giờ bắt đầu ca làm việc phải nằm trong khoảng từ 0 đến 23 giờ.'\r\n                },\r\n                'minute': {\r\n                    'required': 'Vui lòng nhập phút ca làm việc.',\r\n                    'isValid': 'Phút ca làm việc phải là số.',\r\n                    'invalidRange': 'Phút bắt đầu ca làm việc phải nằm trong khoảng từ 0 đến 59 phút.'\r\n                }\r\n            },\r\n            'endTime': {\r\n                'hour': {\r\n                    'required': 'Vui lòng nhập giờ kết thúc ca làm việc.',\r\n                    'isValid': 'Giờ kết thúc ca làm việc phải là số.',\r\n                    'invalidRange': 'Giờ kết thúc ca làm việc phải nằm trong khoảng từ 0 đến 23 giờ.'\r\n                },\r\n                'minute': {\r\n                    'required': 'Vui lòng nhập phút kết thúc ca làm việc.',\r\n                    'isValid': 'Phút kết thúc ca làm việc phải là số.',\r\n                    'invalidRange': 'Phút kết thúc ca làm việc phải nằm trong khoảng từ 0 đến 59 phút.'\r\n                }\r\n            },\r\n            'meaningTime': {\r\n                'startTimeIn': {\r\n                    'hour': {\r\n                        'required': 'Vui lòng nhập giờ bắt đầu hiểu ca vào.',\r\n                        'isValid': 'Giờ bắt đầu hiểu ca vào phải là số.',\r\n                        'invalidRange': 'Giờ bắt đầu hiểu ca vào phải từ 0 đến 23 giờ.'\r\n                    },\r\n                    'minute': {\r\n                        'required': 'Vui lòng nhập phút bắt đầu hiểu ca vào',\r\n                        'isValid': 'Phút bắt đầu hiểu ca vào phải là số.',\r\n                        'invalidRange': 'Phút bắt đầu hiểu ca vào phải từ 0 đến 59 phút.'\r\n                    }\r\n                },\r\n                'endTimeIn': {\r\n                    'hour': {\r\n                        'required': 'Vui lòng nhập giờ kết thúc hiểu ca vào.',\r\n                        'isValid': 'Giờ kết thúc hiểu ca vào phải là số.',\r\n                        'invalidRange': 'Giờ kết thúc hiểu ca vào phải từ 0 đến 23 giờ.'\r\n                    },\r\n                    'minute': {\r\n                        'required': 'Vui lòng nhập phút kết thúc hiểu ca vào.',\r\n                        'isValid': 'Phút kết thúc hiểu ca vào phải là số.',\r\n                        'invalidRange': 'Phút kết thúc hiểu ca vào phải từ 0 đến 59 phút.'\r\n                    }\r\n                },\r\n                'startTimeOut': {\r\n                    'hour': {\r\n                        'required': 'Vui lòng nhập giờ bắt đầu hiểu ca ra.',\r\n                        'isValid': 'Giờ bắt đầu hiểu ca ra phải là số.',\r\n                        'invalidRange': 'Giờ bắt đầu hiểu ca ra phải từ 0 đến 23 giờ.'\r\n                    },\r\n                    'minute': {\r\n                        'required': 'Vui lòng nhập phút bắt đầu hiểu ca ra.',\r\n                        'isValid': 'Phút bắt đầu hiểu ca ra phải là số.',\r\n                        'invalidRange': 'Phút bắt đầu hiểu ca ra phải từ 0 đến 59 phút.'\r\n                    }\r\n                },\r\n                'endTimeOut': {\r\n                    'hour': {\r\n                        'required': 'Vui lòng nhập giờ kêt thúc hiểu ca ra.',\r\n                        'isValid': 'Giờ kết thúc hiểu ca ra phải là số.',\r\n                        'invalidRange': 'Giờ kết thúc hiểu ca ra phải từ 0 đến 23 giờ.'\r\n                    },\r\n                    'minute': {\r\n                        'required': 'Vui lòng nhập phút kết thúc hiểu ca ra.',\r\n                        'isValid': 'Phút kết thúc hiểu ca ra phải là số.',\r\n                        'invalidRange': 'Phút kết thúc hiểu ca ra phải từ 0 đến 59 phút.'\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        this.groupValidationMessages = {\r\n            'name': {\r\n                'required': 'Vui lòng nhập tên nhóm.',\r\n                'maxlength': 'Tên nhóm không được phép vượt quá 250 ký tự.'\r\n            },\r\n            'description': {\r\n                'maxlength': 'Mô tả nhóm không được phép vượt quá 500.'\r\n            },\r\n            'shifts': {\r\n                'required': 'Vui lòng chọn ca làm việc.'\r\n            }\r\n        };\r\n    }\r\n}\r\n","/**\r\n * Created by HoangIT21 on 7/8/2017.\r\n */\r\nimport { TimeObject } from '../../../../shareds/models/time-object.model';\r\n\r\nexport class Shift {\r\n    id: any;\r\n    name: string;\r\n    reportName: string;\r\n    startTime: TimeObject;\r\n    endTime: TimeObject;\r\n    inLatency: number;\r\n    outLatency: number;\r\n    workUnit: number;\r\n    meaningTime: MeaningTime;\r\n    code: string;\r\n    isOvertime: boolean;\r\n    isSelected: boolean;\r\n    referenceId: string;\r\n\r\n    constructor() {\r\n        this.startTime = new TimeObject();\r\n        this.endTime = new TimeObject();\r\n        this.meaningTime = new MeaningTime();\r\n        // this.group = new ShiftGroup();\r\n        this.isOvertime = false;\r\n        this.workUnit = 0;\r\n        this.isSelected = false;\r\n        this.referenceId = '';\r\n    }\r\n}\r\n\r\nexport class MeaningTime {\r\n    startTimeIn: TimeObject;\r\n    endTimeIn: TimeObject;\r\n    startTimeOut: TimeObject;\r\n    endTimeOut: TimeObject;\r\n\r\n    constructor() {\r\n        this.startTimeIn = new TimeObject();\r\n        this.endTimeIn = new TimeObject();\r\n        this.startTimeOut = new TimeObject();\r\n        this.endTimeOut = new TimeObject();\r\n    }\r\n}\r\n\r\nexport class ShiftDays {\r\n    isSelected: boolean;\r\n    value: number;\r\n\r\n    constructor(isSelected?: boolean, value?: number) {\r\n        this.isSelected = isSelected;\r\n        this.value = value;\r\n    }\r\n}\r\n","/**\r\n * Created by HoangIT21 on 7/7/2017.\r\n */\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { BaseComponent } from '../../../base.component';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { TimekeepingHolidayService } from './holiday/timekeeping-holiday.service';\r\nimport { UtilService } from '../../../shareds/services/util.service';\r\nimport { Holiday } from './holiday/holiday.model';\r\nimport { finalize } from 'rxjs/operators';\r\n\r\n@Component({\r\n    selector: 'app-timekeeping-config-general',\r\n    template: `\r\n        <div class=\"portlet box blue portlet-holiday-symbol\">\r\n            <div class=\"portlet-title\">\r\n                <div class=\"caption\">\r\n                    <i class=\"fa fa-gears\"></i>\r\n                    <span class=\"caption-subject bold\"> Cấu hình chung</span>\r\n                </div>\r\n            </div>\r\n            <div class=\"portlet-body table-responsive\">\r\n                <form class=\"form-horizontal cm-mgt-10\" (ngSubmit)=\"save()\" [formGroup]=\"formModel\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"\" class=\"col-md-3 col-sm-4 control-label\" [required]=\"true\"\r\n                               ghmLabel=\"Số phút đi muộn tối đa\"></label>\r\n                        <div class=\"col-sm-8 col-md-9\">\r\n                            <input type=\"text\" class=\"form-control\" id=\"configHolidayName\" formControlName=\"name\"\r\n                                   placeholder=\"Nhập tên ngày lễ\">\r\n                            <div class=\"alert alert-danger\" *ngIf=\"formErrors.name && isSubmitted\">\r\n                                {{ formErrors.name }}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <label for=\"\" class=\"col-md-3 col-sm-4 control-label\" [required]=\"true\"\r\n                               ghmLabel=\"Số lần tối đa xin đến muộn trong tháng\"></label>\r\n                        <div class=\"col-sm-8 col-md-9\">\r\n                            <input type=\"text\" class=\"form-control\" id=\"configHolidayName\" formControlName=\"name\"\r\n                                   placeholder=\"Nhập tên ngày lễ\">\r\n                            <div class=\"alert alert-danger\" *ngIf=\"formErrors.name && isSubmitted\">\r\n                                {{ formErrors.name }}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <label for=\"\" class=\"col-md-3 col-sm-4 control-label\" [required]=\"true\"\r\n                               ghmLabel=\"Đăng ký nghỉ trước\"></label>\r\n                        <div class=\"col-sm-8 col-md-9\">\r\n                            <div class=\"input-group\">\r\n                                <input type=\"text\" class=\"form-control\"\r\n                                       placeholder=\"Nhập số ngày bắt buộc trước khi đăng ký nghỉ\">\r\n                                <span class=\"input-group-addon\">Ngày</span>\r\n                            </div>\r\n                            <div class=\"alert alert-danger\" *ngIf=\"formErrors.name && isSubmitted\">\r\n                                {{ formErrors.name }}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <div class=\"col-sm-8 col-md-9 col-sm-offset-4 col-md-offset-3\">\r\n                            <button mat-raised-button color=\"primary\" type=\"submit\">\r\n                                <i class=\"fa fa-save\" *ngIf=\"!isSaving\"></i>\r\n                                <i class=\"fa fa-spinner fa-pulse\" *ngIf=\"isSaving\"></i>\r\n                                Lưu lại\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div><!-- END: .portlet-holiday-symbol -->\r\n    `,\r\n    providers: [TimekeepingHolidayService]\r\n})\r\n\r\nexport class TimekeepingConfigGeneralComponent extends BaseComponent implements OnInit {\r\n    isShowForm = false;\r\n    model = new Holiday();\r\n    formModel: FormGroup;\r\n    listHolidays: Holiday[] = [];\r\n\r\n    constructor(private fb: FormBuilder,\r\n                private toastr: ToastrService,\r\n                private utilService: UtilService,\r\n                private timekeepingConfigHolidayService: TimekeepingHolidayService) {\r\n        super();\r\n        this.formErrors = this.utilService.renderFormError(['name', 'fromDayText']);\r\n        this.validationMessages = {\r\n            'name': {\r\n                'required': 'Vui lòng nhập tên ngày lễ.',\r\n                'maxlength': 'Tên ngày lễ không được phép vượt quá 250 ký tự.',\r\n            },\r\n            'fromDayText': {\r\n                'required': 'Vui lòng nhập thời gian nghỉ từ ngày'\r\n            }\r\n        };\r\n\r\n        this.getAllConfigs();\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.buildForm();\r\n    }\r\n\r\n    getAllConfigs() {\r\n        this.isSearching = true;\r\n    }\r\n\r\n    save() {\r\n        this.isSubmitted = true;\r\n        const formModelValue = this.formModel.value;\r\n        const isValid = this.utilService.onValueChanged(this.formModel, this.formErrors, this.validationMessages);\r\n        this.setupModel(formModelValue);\r\n\r\n        if (isValid) {\r\n            this.isSaving = true;\r\n            if (this.isUpdate) {\r\n                this.timekeepingConfigHolidayService.update(this.model)\r\n                    .pipe(finalize(() => {\r\n                        this.isSubmitted = false;\r\n                        this.isSaving = false;\r\n                    }))\r\n                    .subscribe((result: Holiday) => {\r\n                        this.toastr.success(this.formatString(this.message.updateSuccess, 'ngày lễ'));\r\n                        this.formModel.reset();\r\n                        this.isShowForm = false;\r\n                        this.isUpdate = false;\r\n                        this.getAllConfigs();\r\n                    }, error => this.toastr.error(error.message));\r\n            } else {\r\n                this.timekeepingConfigHolidayService.insert(this.model)\r\n                    .pipe(finalize(() => {\r\n                        this.isSubmitted = false;\r\n                        this.isSaving = false;\r\n                    }))\r\n                    .subscribe((result: Holiday) => {\r\n                        this.toastr.success(this.formatString(this.message.insertSuccess, 'ngày lễ'));\r\n                        this.formModel.reset();\r\n                        this.utilService.focusElement('configHolidayName');\r\n                        this.listHolidays = [...this.listHolidays, result];\r\n                        return;\r\n                    }, error => this.toastr.error(error.message));\r\n            }\r\n        }\r\n    }\r\n\r\n    edit(holiday: Holiday) {\r\n        this.isUpdate = true;\r\n        this.model = holiday;\r\n        this.model.fromDayText = `${holiday.fromDay.day}/${holiday.fromDay.month}`;\r\n        if (this.model.toDay && this.model.toDay.day && this.model.toDay.month) {\r\n            this.model.toDayText = `${holiday.toDay.day}/${holiday.toDay.month}`;\r\n        }\r\n        this.formModel.patchValue(this.model);\r\n        this.isShowForm = true;\r\n        this.utilService.focusElement('configHolidayName');\r\n    }\r\n\r\n    delete(holiday: Holiday) {\r\n        // swal({\r\n        //     title: `Bạn có chắc chắn muốn xóa ngày lễ: \"${holiday.name}\"`,\r\n        //     text: 'Lưu ý: sau khi xóa bạn không thể lấy lại được ngày lễ này.',\r\n        //     type: 'warning',\r\n        //     showCancelButton: true,\r\n        //     confirmButtonColor: '#DD6B55',\r\n        //     confirmButtonText: 'Đồng ý',\r\n        //     cancelButtonText: 'Hủy bỏ'\r\n        // }).then(() => {\r\n        //     this.isSaving = true;\r\n        //     this.timekeepingConfigHolidayService.delete(holiday.id).finally(() => this.isSaving = false)\r\n        //         .subscribe(() => {\r\n        //             this.toastr.success(this.formatString(this.message.deleteSuccess, 'ngày lễ'));\r\n        //             _.remove(this.listHolidays, (holidayConfig: Holiday) => {\r\n        //                 return holidayConfig.id;\r\n        //             });\r\n        //         }, error => this.toastr.error(error.message));\r\n        // }, () => {\r\n        // });\r\n    }\r\n\r\n    private setupModel(formModelValue) {\r\n        this.model.id = formModelValue.id;\r\n        this.model.name = formModelValue.name;\r\n        this.model.isActive = formModelValue.isActive;\r\n        this.model.isRangerDate = formModelValue.toDayText != null && formModelValue.toDayText !== ''\r\n            && formModelValue.toDayText !== undefined;\r\n\r\n        if (formModelValue.fromDayText) {\r\n            const dayArray = formModelValue.fromDayText.split('/');\r\n            this.model.fromDay.day = +dayArray[0];\r\n            this.model.fromDay.month = +dayArray[1];\r\n        }\r\n\r\n        if (formModelValue.toDayText) {\r\n            const dayArray = formModelValue.toDayText.split('/');\r\n            this.model.toDay.day = +dayArray[0];\r\n            this.model.toDay.month = +dayArray[1];\r\n        }\r\n    }\r\n\r\n    private buildForm() {\r\n        this.formModel = this.fb.group({\r\n            'id': [this.model.id],\r\n            'name': [this.model.name, [\r\n                Validators.required,\r\n                Validators.maxLength(500)\r\n            ]],\r\n            'fromDayText': [this.model.fromDayText, [\r\n                Validators.required\r\n            ]],\r\n            'toDayText': [this.model.toDayText],\r\n            'isActive': [this.model.isActive]\r\n        });\r\n\r\n        this.formModel.valueChanges.subscribe(data =>\r\n            this.utilService.onValueChanged(this.formModel, this.formErrors, this.validationMessages, data));\r\n        this.utilService.onValueChanged(this.formModel, this.formErrors, this.validationMessages);\r\n    }\r\n}\r\n","module.exports = \"<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-4 col-lg-3\\\">\\r\\n        <div class=\\\"side-nav-menu\\\">\\r\\n            <ul class=\\\"nav\\\">\\r\\n                <li [class.active]=\\\"view === 1\\\">\\r\\n                    <a href=\\\"javascript://\\\" (click)=\\\"changeView(1)\\\">\\r\\n                        <i class=\\\"fas fa-plane\\\"></i> Nghỉ lễ\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li [class.active]=\\\"view === 2\\\">\\r\\n                    <a href=\\\"javascript://\\\" data-toggle=\\\"tab\\\" (click)=\\\"changeView(2)\\\">\\r\\n                        <i class=\\\"fas fa-desktop\\\"></i>\\r\\n                        Máy chấm công\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li [class.active]=\\\"view === 3\\\">\\r\\n                    <a href=\\\"javascript://\\\" data-toggle=\\\"tab\\\" (click)=\\\"changeView(3)\\\">\\r\\n                        <i class=\\\"far fa-calendar-check\\\"></i>\\r\\n                        Ca làm việc\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li [class.active]=\\\"view === 4\\\">\\r\\n                    <a href=\\\"javascript://\\\" data-toggle=\\\"tab\\\" (click)=\\\"changeView(4)\\\">\\r\\n                        <i class=\\\"fas fa-cogs\\\"></i>\\r\\n                        Cấu hình chung\\r\\n                    </a>\\r\\n                </li>\\r\\n            </ul>\\r\\n        </div>\\r\\n    </div><!-- END Menu -->\\r\\n    <div class=\\\"col-sm-8 col-lg-9\\\">\\r\\n        <app-timekeeping-config-holiday *ngIf=\\\"view === 1\\\"></app-timekeeping-config-holiday>\\r\\n        <app-timekeeping-machine *ngIf=\\\"view === 2\\\"></app-timekeeping-machine>\\r\\n        <app-timekeeping-config-shift *ngIf=\\\"view === 3\\\"></app-timekeeping-config-shift>\\r\\n        <app-timekeeping-general *ngIf=\\\"view === 4\\\"></app-timekeeping-general>\\r\\n    </div><!-- END Content -->\\r\\n</div>\\r\\n\"","/**\r\n * Created by HoangIT21 on 7/4/2017.\r\n */\r\nimport { Component, Inject, OnInit } from '@angular/core';\r\nimport { BaseComponent } from '../../../base.component';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { TimekeepingConfigService } from './timekeeping-config.service';\r\nimport { APP_CONFIG, IAppConfig } from '../../../configs/app.config';\r\nimport { IPageId, PAGE_ID } from '../../../configs/page-id.config';\r\nimport { AppService } from '../../../shareds/services/app.service';\r\nimport { CheckPermission } from '../../../shareds/decorator/check-permission.decorator';\r\n\r\n@Component({\r\n    selector: 'app-timekeeping-config',\r\n    templateUrl: './timekeeping-config.component.html',\r\n    providers: [TimekeepingConfigService]\r\n})\r\n@CheckPermission()\r\nexport class TimekeepingConfigComponent extends BaseComponent implements OnInit {\r\n    view = 1;\r\n\r\n    constructor( @Inject(APP_CONFIG) public appConfig: IAppConfig,\r\n        @Inject(PAGE_ID) pageId: IPageId,\r\n        private route: ActivatedRoute,\r\n        private title: Title,\r\n        private appService: AppService) {\r\n        super();\r\n        this.title.setTitle('Cấu hình hệ thống chấm công.');\r\n        this.appService.setupPage(pageId.HR, pageId.TIMEKEEPING_CONFIG, 'Quản lý người dùng', 'Cấu hình chấm công');\r\n        // this.getPermission(this.appService);\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.subscribers.queryParams = this.route.queryParams.subscribe(params => {\r\n            if (params.view) {\r\n                this.view = params.view;\r\n            }\r\n        });\r\n    }\r\n\r\n    changeView(view: number) {\r\n        if (this.view === view) {\r\n            return;\r\n        }\r\n\r\n        this.view = view;\r\n    }\r\n}\r\n","/**\r\n * Created by HoangIT21 on 7/4/2017.\r\n */\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Holiday } from './holiday/holiday.model';\r\nimport { Shift } from './shift/timekeeping-shift.model';\r\nimport { ShiftGroup } from './shift/shift-group.model';\r\nimport { Machine } from './machine/machine.model';\r\n\r\n@Injectable()\r\nexport class TimekeepingConfigService {\r\n    url = 'timekeeping-config/';\r\n\r\n    constructor(private http: HttpClient) {\r\n    }\r\n\r\n    // BEGIN: Timekeeping Config Holidays\r\n    insertHoliday(holiday: Holiday) {\r\n        return this.http.post(`${this.url}insert-holiday`, holiday);\r\n    }\r\n\r\n    updateHoliday(holiday: Holiday) {\r\n        return this.http.post(`${this.url}update-holiday`, holiday);\r\n    }\r\n\r\n    searchAllHoliday(year: number) {\r\n        return this.http.get(`${this.url}search-all-holiday`, {\r\n            params: new HttpParams()\r\n                .set('year', year.toString())\r\n        });\r\n    }\r\n\r\n    deleteHoliday(id: string) {\r\n        return this.http.delete(`${this.url}delete-holiday`, {\r\n            params: new HttpParams().set('id', id)\r\n        });\r\n    }\r\n\r\n    // END: Timekeeping Config Holidays\r\n\r\n    // BEGIN: Timekeeping Config Shift\r\n    insertShift(shift: Shift) {\r\n        return this.http.post(`${this.url}insert-shift`, shift);\r\n    }\r\n\r\n    updateShift(shift: Shift) {\r\n        return this.http.post(`${this.url}update-shift`, shift);\r\n    }\r\n\r\n    deleteShift(shiftId: string) {\r\n        return this.http.delete(`${this.url}delete-shift`, {\r\n            params: new HttpParams().set('id', shiftId)\r\n        });\r\n    }\r\n\r\n    searchAllShift() {\r\n        return this.http.get(`${this.url}search-all-shift`);\r\n    }\r\n\r\n    insertShiftGroup(shiftGroup: ShiftGroup) {\r\n        return this.http.post(`${this.url}insert-shift-group`, shiftGroup);\r\n    }\r\n\r\n    updateShiftGroup(shiftGroup: ShiftGroup) {\r\n        return this.http.post(`${this.url}update-shift-group`, shiftGroup);\r\n    }\r\n\r\n    updateShiftGroupActive(groupId: string, isActive: boolean) {\r\n        return this.http.post(`${this.url}update-shift-group-active`, groupId, {\r\n            params: new HttpParams()\r\n                .set('isActive', isActive.toString())\r\n        });\r\n    }\r\n\r\n    deleteShiftGroup(shiftGroupId: string) {\r\n        return this.http.delete(`${this.url}delete-shift-group`, {\r\n            params: new HttpParams()\r\n                .set('id', shiftGroupId)\r\n        });\r\n    }\r\n\r\n    searchAllShiftGroup() {\r\n        return this.http.get<ShiftGroup[]>(`${this.url}search-all-shift-group`);\r\n    }\r\n\r\n    searchAllShiftGroupActive() {\r\n        return this.http.get(`${this.url}search-all-shift-group-active`);\r\n    }\r\n\r\n\r\n    getMyShift() {\r\n        return this.http.get(`${this.url}get-my-shift`);\r\n    }\r\n\r\n    searchMachine() {\r\n        return this.http.get(`${this.url}search-machine`);\r\n    }\r\n\r\n    insertMachine(machine: Machine) {\r\n        return this.http.post(`${this.url}insert-machine`, machine);\r\n    }\r\n\r\n    updateMachine(machine: Machine) {\r\n        return this.http.post(`${this.url}update-machine`, machine);\r\n    }\r\n\r\n    deleteMachine(machineId: string) {\r\n        return this.http.delete(`${this.url}delete-machine`, {\r\n            params: new HttpParams().set('machineId', machineId)\r\n        });\r\n    }\r\n\r\n    getSerial(ip: string, port: number) {\r\n        return this.http.get(`${this.url}get-serial-number`, {\r\n            params: new HttpParams()\r\n                .set('ip', ip.toString())\r\n                .set('port', port.toString())\r\n        });\r\n    }\r\n\r\n    // END: Timekeeping machine\r\n\r\n    // BEGIN: Timekeeping general config\r\n    saveGeneral(maxInOutMin: number, maxInOutTimes: number) {\r\n        return this.http.post(`${this.url}save-general`, {\r\n            maxInOutMin: maxInOutMin,\r\n            maxInOutTimes: maxInOutTimes\r\n        });\r\n    }\r\n\r\n    getGeneralConfig() {\r\n        return this.http.get<any>(`${this.url}get-general-config`);\r\n    }\r\n\r\n    // END: Timekeeping general config\r\n}\r\n","module.exports = \"<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-sm-4 col-md-3\\\">\\r\\n        <div class=\\\"portlet light bordered\\\">\\r\\n            <div class=\\\"portlet-title\\\">\\r\\n                <div class=\\\"caption\\\">\\r\\n                    <i class=\\\"fa fa-building-o\\\"></i>\\r\\n                    <span class=\\\"caption-subject bold uppercase\\\"> Phòng ban - Nhân viên</span>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"portlet-body form\\\">\\r\\n                <div class=\\\"overflow-x-auto\\\">\\r\\n                    <nh-tree [data]=\\\"officeTree\\\"\\r\\n                             (onSelectNode)=\\\"onSelectOffice($event)\\\"\\r\\n                    ></nh-tree>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div><!-- END: Office portlet -->\\r\\n    <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n        <div class=\\\"portlet light bordered\\\">\\r\\n            <div class=\\\"portlet-title\\\">\\r\\n                <div class=\\\"caption\\\">\\r\\n                    <i class=\\\"fa fa-calendar\\\"></i>\\r\\n                    <span class=\\\"caption-subject bold uppercase\\\"> Lịch làm việc</span>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"portlet-body form\\\">\\r\\n                <form class=\\\"form-inline cm-mgb-10\\\" (ngSubmit)=\\\"search(1)\\\">\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <input class=\\\"form-control\\\" placeholder=\\\"Nhập tên nhân viên cần tìm\\\"\\r\\n                               (keyup)=\\\"keyword = searchInput.value\\\" #searchInput/>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <button mat-raised-button color=\\\"primary\\\">\\r\\n                            <!--<i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSearching\\\"></i>-->\\r\\n                            <!--<i class=\\\"fa fa-search\\\" *ngIf=\\\"!isSearching\\\"></i>-->\\r\\n                            <mat-icon>search</mat-icon>\\r\\n                            Tìm kiếm\\r\\n                        </button>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group pull-right\\\">\\r\\n                        <button type=\\\"button\\\" mat-raised-button (click)=\\\"showConfigModal()\\\">\\r\\n                            <mat-icon>settings</mat-icon>\\r\\n                            Cấu hình\\r\\n                        </button>\\r\\n                    </div>\\r\\n                </form>\\r\\n                <div class=\\\"table-responsive\\\">\\r\\n                    <table class=\\\"table table-bordered table-striped table-hover table-main\\\">\\r\\n                        <thead>\\r\\n                        <tr>\\r\\n                            <th rowspan=\\\"2\\\" class=\\\"center middle w50 merge-row\\\" *ngIf=\\\"isHasUpdatePermission\\\">\\r\\n                                <mat-checkbox color=\\\"primary\\\" [checked]=\\\"isSelectAll\\\"\\r\\n                                              (change)=\\\"onChangeSelectAll()\\\"></mat-checkbox>\\r\\n                            </th>\\r\\n                            <th rowspan=\\\"2\\\" class=\\\"center middle merge-row w250\\\">Họ tên nhân viên</th>\\r\\n                            <th rowspan=\\\"2\\\" class=\\\"center middle merge-row\\\">Ca làm việc</th>\\r\\n                            <th class=\\\"center\\\"\\r\\n                                [attr.colspan]=\\\"isHasUpdatePermission ? '9' : '8'\\\">Thời gian làm việc\\r\\n                            </th>\\r\\n                        </tr>\\r\\n                        <tr>\\r\\n                            <th class=\\\"w50 center\\\">Ca</th>\\r\\n                            <th class=\\\"w50 center\\\">CN</th>\\r\\n                            <th class=\\\"w50 center\\\">T2</th>\\r\\n                            <th class=\\\"w50 center\\\">T3</th>\\r\\n                            <th class=\\\"w50 center\\\">T4</th>\\r\\n                            <th class=\\\"w50 center\\\">T5</th>\\r\\n                            <th class=\\\"w50 center\\\">T6</th>\\r\\n                            <th class=\\\"w50 center\\\">T7</th>\\r\\n                            <th class=\\\"w100 center\\\" *ngIf=\\\"isHasUpdatePermission\\\"></th>\\r\\n                        </tr>\\r\\n                        </thead>\\r\\n                        <tbody *ngIf=\\\"listUserWorkSchedules.length === 0 && !isSearching\\\">\\r\\n                        <tr>\\r\\n                            <td class=\\\"center middle\\\" [attr.colspan]=\\\"isHasUpdatePermission ? '12' : '11'\\\">\\r\\n                                Vui lòng chọn phòng ban\\r\\n                            </td>\\r\\n                        </tr>\\r\\n                        </tbody>\\r\\n                        <tbody *ngIf=\\\"isSearching; else contentTemplate\\\">\\r\\n                        <tr>\\r\\n                            <td [attr.colspan]=\\\"isHasUpdatePermission ? '12' : '11'\\\">\\r\\n                                <div class=\\\"spinner\\\">\\r\\n                                    <div class=\\\"rect1\\\"></div>\\r\\n                                    <div class=\\\"rect2\\\"></div>\\r\\n                                    <div class=\\\"rect3\\\"></div>\\r\\n                                    <div class=\\\"rect4\\\"></div>\\r\\n                                    <div class=\\\"rect5\\\"></div>\\r\\n                                </div>\\r\\n                            </td>\\r\\n                        </tr>\\r\\n                        </tbody>\\r\\n                        <ng-template #contentTemplate>\\r\\n                            <tbody>\\r\\n                            <ng-template ngFor let-workSchedule let-index=\\\"index\\\" [ngForOf]=\\\"listUserWorkSchedules\\\">\\r\\n                                <tr>\\r\\n                                    <td class=\\\"center middle\\\" *ngIf=\\\"isHasUpdatePermission\\\"\\r\\n                                        [attr.rowspan]=\\\"workSchedule?.shifts?.length === 0 ? 0 : workSchedule?.shifts?.length + 1\\\">\\r\\n                                        <mat-checkbox color=\\\"primary\\\" [checked]=\\\"workSchedule.isSelected\\\"\\r\\n                                                      (change)=\\\"onSelectedChange(workSchedule)\\\"></mat-checkbox>\\r\\n                                    </td>\\r\\n                                    <td [attr.rowspan]=\\\"workSchedule?.shifts?.length === 0 ? 0 : workSchedule?.shifts?.length + 1\\\"\\r\\n                                        class=\\\"bold middle\\\">\\r\\n                                        {{workSchedule?.fullName}}\\r\\n                                    </td>\\r\\n                                    <td class=\\\"center middle\\\"\\r\\n                                        [attr.rowspan]=\\\"workSchedule?.shifts?.length === 0 ? 0 : workSchedule?.shifts?.length + 1\\\">\\r\\n                                        <nh-select\\r\\n                                            #selectShiftGroupDropdown\\r\\n                                            [data]=\\\"listShiftGroups\\\"\\r\\n                                            [title]=\\\"'-- Chọn nhóm ca làm việc --'\\\"\\r\\n                                            [isEnable]=\\\"!isSearchingShiftGroups\\\"\\r\\n                                            [value]=\\\"workSchedule?.shiftGroupId\\\"\\r\\n                                            (onSelectItem)=\\\"onSelectShiftGroup($event, workSchedule)\\\"\\r\\n                                        ></nh-select>\\r\\n                                    </td>\\r\\n                                    <td colspan=\\\"9\\\" class=\\\"center middle\\\"\\r\\n                                        *ngIf=\\\"!workSchedule.shifts || workSchedule?.shifts?.length=== 0\\\">\\r\\n                                        Vui lòng chọn ca làm việc\\r\\n                                    </td>\\r\\n                                </tr>\\r\\n                                <tr *ngFor=\\\"let shift of workSchedule?.shifts; let dayIndex = index\\\">\\r\\n                                    <td class=\\\"center middle bold\\\">{{shift.code}}</td>\\r\\n                                    <td class=\\\"center\\\" *ngFor=\\\"let day of listDays\\\">\\r\\n                                        <mat-checkbox color=\\\"primary\\\" *ngIf=\\\"isHasUpdatePermission\\\"\\r\\n                                                      [checked]=\\\"hasChecked(shift.workingDaysValue, day.value)\\\"\\r\\n                                                      (change)=\\\"onChangeWorkingDay(day, shift)\\\"></mat-checkbox>\\r\\n                                        <i class=\\\"fa fa-check color-green\\\" *ngIf=\\\"!isHasUpdatePermission\\\"></i>\\r\\n                                    </td>\\r\\n                                    <td class=\\\"center middle\\\" *ngIf=\\\"isHasUpdatePermission && dayIndex === 0\\\"\\r\\n                                        [attr.rowspan]=\\\"workSchedule?.shifts?.length\\\">\\r\\n                                        <button type=\\\"button\\\" mat-raised-button color=\\\"primary\\\" (click)=\\\"save(workSchedule)\\\">\\r\\n                                            <!--<i class=\\\"fa fa-save\\\" *ngIf=\\\"!isSaving\\\"></i>-->\\r\\n                                            <!--<i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSaving\\\"></i>-->\\r\\n                                            <mat-icon>save</mat-icon>\\r\\n                                            Lưu lại\\r\\n                                        </button>\\r\\n                                    </td>\\r\\n                                </tr>\\r\\n                            </ng-template>\\r\\n                            </tbody>\\r\\n                        </ng-template>\\r\\n                    </table><!-- END: table -->\\r\\n                </div>\\r\\n                <ghm-paging [totalRows]=\\\"totalRows\\\" [currentPage]=\\\"currentPage\\\" [pageShow]=\\\"6\\\" (pageClick)=\\\"search($event)\\\"\\r\\n                        [isDisabled]=\\\"isSearching\\\" [pageName]=\\\"'lịch làm việc'\\\"></ghm-paging>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<nh-modal #configModal [size]=\\\"'md'\\\">\\r\\n    <nh-modal-header [showCloseButton]=\\\"true\\\">\\r\\n        <h4>\\r\\n            <i class=\\\"fa fa-gears\\\"></i>\\r\\n            Cấu hình ca làm việc cho nhân viên được chọn\\r\\n        </h4>\\r\\n    </nh-modal-header>\\r\\n    <form class=\\\"form-horizontal\\\">\\r\\n        <nh-modal-content>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label for=\\\"\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" [required]=\\\"true\\\"\\r\\n                            ghmLabel=\\\"Ca làm việc\\\"></label>\\r\\n                <div class=\\\"col-md-9 col-sm-8\\\">\\r\\n                    <nh-select\\r\\n                        #selectShiftGroupDropdown\\r\\n                        [data]=\\\"listShiftGroups\\\"\\r\\n                        [title]=\\\"'-- Chọn nhóm ca làm việc --'\\\"\\r\\n                        (onSelectItem)=\\\"onSelectShiftGroupForMulti($event)\\\"\\r\\n                    ></nh-select>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <div class=\\\"col-sm-12\\\">\\r\\n                    <table class=\\\"table table-bordered table striped tale-hover\\\">\\r\\n                        <thead>\\r\\n                        <tr>\\r\\n                            <th colspan=\\\"8\\\">Thời gian làm việc</th>\\r\\n                        </tr>\\r\\n                        <tr>\\r\\n                            <th class=\\\"center w50\\\">Ca</th>\\r\\n                            <th class=\\\"center w50\\\">CN</th>\\r\\n                            <th class=\\\"center w50\\\">T2</th>\\r\\n                            <th class=\\\"center w50\\\">T3</th>\\r\\n                            <th class=\\\"center w50\\\">T4</th>\\r\\n                            <th class=\\\"center w50\\\">T5</th>\\r\\n                            <th class=\\\"center w50\\\">T6</th>\\r\\n                            <th class=\\\"center w50\\\">T7</th>\\r\\n                        </tr>\\r\\n                        </thead>\\r\\n                        <tbody>\\r\\n                        <tr *ngFor=\\\"let shift of selectedShifts\\\">\\r\\n                            <td class=\\\"center\\\">{{shift.code}}</td>\\r\\n                            <td class=\\\"center\\\" *ngFor=\\\"let day of listDays\\\">\\r\\n                                <mat-checkbox color=\\\"primary\\\"\\r\\n                                              [checked]=\\\"hasChecked(shift.workingDaysValue, day.value)\\\"\\r\\n                                              (change)=\\\"onChangeWorkingDay(day, shift)\\\"></mat-checkbox>\\r\\n                            </td>\\r\\n                        </tr>\\r\\n                        </tbody>\\r\\n                    </table>\\r\\n                </div>\\r\\n            </div>\\r\\n        </nh-modal-content>\\r\\n        <nh-modal-footer>\\r\\n            <button type=\\\"button\\\" mat-raised-button color=\\\"primary\\\" (click)=\\\"acceptAndSaveConfig()\\\">\\r\\n                <mat-icon>save</mat-icon>\\r\\n                Đồng ý & lưu lại\\r\\n            </button>\\r\\n            <button type=\\\"button\\\" mat-raised-button nh-dismiss=\\\"true\\\">\\r\\n                <mat-icon>close</mat-icon>\\r\\n                Đóng\\r\\n            </button>\\r\\n        </nh-modal-footer>\\r\\n    </form>\\r\\n</nh-modal>\\r\\n\"","/**\r\n * Created by HoangIT21 on 7/10/2017.\r\n */\r\nimport { Component, Inject, OnInit, ViewChild } from '@angular/core';\r\nimport { BaseComponent } from '../../../../base.component';\r\nimport { Title } from '@angular/platform-browser';\r\nimport * as _ from 'lodash';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { SpinnerService } from '../../../../core/spinner/spinner.service';\r\nimport { TimekeepingConfigService } from '../timekeeping-config.service';\r\nimport { TimekeepingWorkScheduleService } from './timekeeping-work-schedule.service';\r\nimport { NhModalComponent } from '../../../../shareds/components/nh-modal/nh-modal.component';\r\nimport { TreeData } from '../../../../view-model/tree-data';\r\nimport { ShiftReference, WorkSchedule } from './work-schedule.model';\r\nimport { ShiftGroup } from '../shift/shift-group.model';\r\nimport { IPageId, PAGE_ID } from '../../../../configs/page-id.config';\r\nimport { AppService } from '../../../../shareds/services/app.service';\r\nimport { Shift } from '../shift/timekeeping-shift.model';\r\nimport { finalize } from 'rxjs/operators';\r\nimport { CheckPermission } from '../../../../shareds/decorator/check-permission.decorator';\r\nimport { OfficeService } from '../../../hr/organization/office/services/office.service';\r\n\r\n@Component({\r\n    selector: 'app-timekeeping-work-schedule',\r\n    templateUrl: './timekeeping-work-schedule.component.html',\r\n    providers: [OfficeService, TimekeepingConfigService, TimekeepingWorkScheduleService]\r\n})\r\n@CheckPermission()\r\nexport class TimekeepingWorkScheduleComponent extends BaseComponent implements OnInit {\r\n    @ViewChild('configModal') configModal: NhModalComponent;\r\n    monthSearch: number;\r\n    yearSearch: number;\r\n    officeTree: TreeData[] = [];\r\n    listUsers = [];\r\n    listUserWorkSchedules: WorkSchedule[] = [];\r\n    listShiftGroups: ShiftGroup[] = [];\r\n    isSearchingShiftGroups = false;\r\n    officeId: number;\r\n    isSelectAll = false;\r\n    isEnableSelectShiftGroupForSelected = false;\r\n    // shiftGroupReferenceMultiple: ShiftGroupReference[] = [];\r\n    // selectedShiftGroup: ShiftGroupReference;\r\n    selectedShiftGroupId: string;\r\n    selectedShiftGroupName: string;\r\n    selectedShifts: ShiftReference[] = [];\r\n\r\n    listDays = [];\r\n    listMonth = [];\r\n    listYear = [];\r\n\r\n    constructor(@Inject(PAGE_ID) public pageId: IPageId,\r\n                private title: Title,\r\n                private route: ActivatedRoute,\r\n                private toastr: ToastrService,\r\n                private officeService: OfficeService,\r\n                private spinnerService: SpinnerService,\r\n                private timekeepingConfigService: TimekeepingConfigService,\r\n                private timekeepingWorkScheduleService: TimekeepingWorkScheduleService,\r\n                private appService: AppService) {\r\n        super();\r\n        this.title.setTitle('Lịch làm việc');\r\n        this.appService.setupPage(pageId.HR, pageId.TIMEKEEPING_WORK_SCHEDULE, 'Chấm công', 'Lịch làm việc');\r\n        // this.getPermission(this.appService);\r\n        this.officeService.getTree().subscribe((result: any) => this.officeTree = result);\r\n\r\n        this.subscribers.routeQueryParams = this.route.queryParams.subscribe(params => {\r\n            this.keyword = params.keyword ? params.keyword : '';\r\n            this.officeId = params.officeId ? params.officeId : -1;\r\n            this.currentPage = params.page ? params.page : 1;\r\n            this.pageSize = params.pageSize ? params.pageSize : 20;\r\n\r\n            this.search(this.currentPage);\r\n        });\r\n\r\n        for (let i = 0; i < 7; i++) {\r\n            this.listDays.push({\r\n                value: Math.pow(2, i),\r\n                isSelected: false\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.searchShiftGroups();\r\n    }\r\n\r\n    onSelectOffice(office: TreeData) {\r\n        this.officeId = office.id;\r\n        this.search(1);\r\n    }\r\n\r\n    onSelectShiftGroup(shiftGroup: ShiftGroup, workSchedule: WorkSchedule) {\r\n        if (shiftGroup.id != null) {\r\n            const shiftReference: ShiftReference[] = shiftGroup.shifts.map((shift: Shift) => {\r\n                return {\r\n                    id: shift.id,\r\n                    name: shift.name,\r\n                    startTime: shift.startTime,\r\n                    endTime: shift.endTime,\r\n                    inLatency: shift.inLatency,\r\n                    outLatency: shift.outLatency,\r\n                    workUnit: shift.workUnit,\r\n                    meaningTime: shift.meaningTime,\r\n                    code: shift.code,\r\n                    isOvertime: shift.isOvertime,\r\n                    referenceId: shift.referenceId,\r\n                    workingDaysValue: 0\r\n                };\r\n            });\r\n\r\n            if (shiftGroup) {\r\n                workSchedule.shiftGroupId = shiftGroup.id;\r\n                workSchedule.shiftGroupName = shiftGroup.name;\r\n                workSchedule.shifts = shiftReference;\r\n            }\r\n        } else {\r\n            workSchedule.shiftGroupId = null;\r\n            workSchedule.shiftGroupName = null;\r\n            workSchedule.shifts = null;\r\n        }\r\n    }\r\n\r\n    onSelectShiftGroupForMulti(shiftGroup: ShiftGroup) {\r\n        this.selectedShiftGroupId = shiftGroup.id;\r\n        this.selectedShiftGroupName = shiftGroup.name;\r\n        this.selectedShifts = shiftGroup.shifts.map((shift: Shift) => {\r\n            return {\r\n                id: shift.id,\r\n                name: shift.name,\r\n                startTime: shift.startTime,\r\n                endTime: shift.endTime,\r\n                inLatency: shift.inLatency,\r\n                outLatency: shift.outLatency,\r\n                workUnit: shift.workUnit,\r\n                meaningTime: shift.meaningTime,\r\n                code: shift.code,\r\n                isOvertime: shift.isOvertime,\r\n                referenceId: shift.referenceId,\r\n                workingDaysValue: 0\r\n            };\r\n        });\r\n    }\r\n\r\n    onChangeSelectAll() {\r\n        this.isSelectAll = !this.isSelectAll;\r\n        this.isEnableSelectShiftGroupForSelected = !this.isEnableSelectShiftGroupForSelected;\r\n        _.each(this.listUserWorkSchedules, (workSchedule: WorkSchedule) => {\r\n            workSchedule.isSelected = this.isSelectAll;\r\n        });\r\n    }\r\n\r\n    onSelectedChange(workSchedule: WorkSchedule) {\r\n        workSchedule.isSelected = !workSchedule.isSelected;\r\n        const countSelected = _.countBy(this.listUserWorkSchedules, (item: WorkSchedule) => {\r\n            return item.isSelected;\r\n        }).true;\r\n\r\n        this.isSelectAll = countSelected === this.listUserWorkSchedules.length;\r\n        this.isEnableSelectShiftGroupForSelected = countSelected > 0;\r\n    }\r\n\r\n    onChangeWorkingDay(day: { value: number, isSelected: boolean }, shiftReference: ShiftReference) {\r\n        if ((shiftReference.workingDaysValue & day.value) === day.value) {\r\n            shiftReference.workingDaysValue -= day.value;\r\n        } else {\r\n            shiftReference.workingDaysValue += day.value;\r\n        }\r\n    }\r\n\r\n    acceptAndSaveConfig() {\r\n        this.configModal.dismiss();\r\n        const selectedWorkSchedules = _.filter(this.listUserWorkSchedules, (workSchedule: WorkSchedule) => {\r\n            return workSchedule.isSelected;\r\n        });\r\n\r\n        if (selectedWorkSchedules) {\r\n            _.each(selectedWorkSchedules, (workSchedule: WorkSchedule) => {\r\n                workSchedule.shiftGroupId = this.selectedShiftGroupId;\r\n                workSchedule.shiftGroupName = this.selectedShiftGroupName;\r\n                workSchedule.shifts = this.selectedShifts;\r\n            });\r\n\r\n            this.isSaving = true;\r\n            this.timekeepingWorkScheduleService.saves(selectedWorkSchedules)\r\n                .pipe(finalize(() => this.isSaving = false))\r\n                .subscribe(result => {\r\n                    this.toastr.success('Cập nhật thông tin lịch làm việc thành công.');\r\n                });\r\n        }\r\n    }\r\n\r\n    save(workSchedule: WorkSchedule) {\r\n        this.spinnerService.show('Đang cập nhật thông lịch làm việc. Vui lòng đợi...');\r\n        this.timekeepingWorkScheduleService.save(workSchedule)\r\n            .pipe(finalize(() => this.spinnerService.hide()))\r\n            .subscribe(result => {\r\n                this.toastr.success('Cập nhật thông tin lịch làm việc thành công.');\r\n            });\r\n    }\r\n\r\n    searchShiftGroups() {\r\n        this.isSearchingShiftGroups = true;\r\n        this.timekeepingConfigService.searchAllShiftGroupActive()\r\n            .pipe(finalize(() => this.isSearchingShiftGroups = false))\r\n            .subscribe((result: any) => this.listShiftGroups = result);\r\n    }\r\n\r\n    search(currentPage: number) {\r\n        this.currentPage = currentPage;\r\n        this.isSearching = true;\r\n        this.timekeepingWorkScheduleService.search(this.keyword, this.officeId, this.currentPage, this.pageSize)\r\n            .pipe(finalize(() => this.isSearching = false))\r\n            .subscribe((result: any) => {\r\n                this.listUserWorkSchedules = result.items;\r\n                this.totalRows = result.totalRows;\r\n            });\r\n    }\r\n\r\n    showConfigModal() {\r\n        this.configModal.show();\r\n    }\r\n\r\n    hasChecked(value, valueCheck) {\r\n        return (value & valueCheck) === valueCheck;\r\n    }\r\n}\r\n","/**\r\n * Created by HoangIT21 on 7/11/2017.\r\n */\r\nimport { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Resolve } from '@angular/router';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { WorkSchedule } from './work-schedule.model';\r\n\r\n@Injectable()\r\nexport class TimekeepingWorkScheduleService implements Resolve<any> {\r\n    url = 'work-schedule/';\r\n\r\n    constructor(private http: HttpClient) {\r\n    }\r\n\r\n    resolve(route: ActivatedRouteSnapshot, state: Object) {\r\n        const params = route.queryParams;\r\n        const keyword = params.keyword ? params.keyword : '';\r\n        const officeId = params.officeId ? params.officeId : -1;\r\n        const page = params.page ? params.page : 1;\r\n        const pageSize = params.pageSize ? params.pageSize : 20;\r\n        this.search(keyword, officeId, page, pageSize);\r\n    }\r\n\r\n    search(keyword: string, officeId: number, page: number, pageSize: number) {\r\n        return this.http.get(`${this.url}search`, {\r\n            params: new HttpParams()\r\n                .set('keyword', keyword)\r\n                .set('officeId', officeId.toString())\r\n                .set('page', page ? page.toString() : '1')\r\n                .set('pageSize', pageSize ? pageSize.toString() : '20')\r\n        });\r\n    }\r\n\r\n    saves(workSchedules: WorkSchedule[]) {\r\n        return this.http.post(`${this.url}saves`, workSchedules);\r\n    }\r\n\r\n    save(workSchedule: WorkSchedule) {\r\n        return this.http.post(`${this.url}save`, workSchedule);\r\n    }\r\n\r\n    getMyWorkSchedule() {\r\n        return this.http.get(`${this.url}get-my-work-schedule`);\r\n    }\r\n\r\n    getMyWorkScheduleShift() {\r\n        return this.http.get(`${this.url}get-my-work-schedule-shift`);\r\n    }\r\n\r\n    getWorkScheduleShift(userId: string) {\r\n        return this.http.get(`${this.url}get-work-schedule-shift`, {\r\n            params: new HttpParams()\r\n                .set('userId', userId)\r\n        });\r\n    }\r\n}\r\n","module.exports = \"<!DOCTYPE html>\\r\\n<html lang=\\\"en\\\">\\r\\n<head>\\r\\n    <meta charset=\\\"UTF-8\\\">\\r\\n    <title>Title</title>\\r\\n</head>\\r\\n<body>\\r\\n\\r\\n</body>\\r\\n</html>\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-download-user-data',\r\n    templateUrl: './donwload-user-data.component.html'\r\n})\r\n\r\nexport class DownloadUserDataComponent implements OnInit {\r\n    constructor() {\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n}\r\n","module.exports = \"<div class=\\\"row cm-mgb-10\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <div class=\\\"form-inline\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label for=\\\"\\\" class=\\\"bold\\\">Mã nhân viên:</label>\\r\\n                <!-- TODO: Check this -->\\r\\n                <!--<nh-suggestion [url]=\\\"'/user/search-for-suggestion'\\\"-->\\r\\n                               <!--[placeholder]=\\\"'Nhập tên nhân viên cần đồng bộ'\\\"-->\\r\\n                               <!--(onSelectItem)=\\\"onSelectUser($event)\\\"-->\\r\\n                <!--&gt;-->\\r\\n                <!--</nh-suggestion>-->\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label for=\\\"\\\" class=\\\"bold\\\">Từ ngày:</label>\\r\\n                <nh-date\\r\\n                    [type]=\\\"'inputButton'\\\"\\r\\n                    [title]=\\\"'Chọn từ ngày'\\\"\\r\\n                    (selectedDateEvent)=\\\"onSelectFromDate($event)\\\"></nh-date>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label for=\\\"\\\" class=\\\"bold\\\">Đến ngày ngày:</label>\\r\\n                <nh-date\\r\\n                    [type]=\\\"'inputButton'\\\"\\r\\n                    [title]=\\\"'Chọn đến ngày'\\\"\\r\\n                    (selectedDateEvent)=\\\"onSelectToDate($event)\\\"></nh-date>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <table class=\\\"table table-bordered table-striped table-hover\\\">\\r\\n            <thead>\\r\\n            <tr>\\r\\n                <th class=\\\"center w50\\\">STT</th>\\r\\n                <th class=\\\"center\\\">Tên máy</th>\\r\\n                <th class=\\\"center\\\">IP</th>\\r\\n                <!--<th class=\\\"center\\\">Lần đồng bộ cuối cùng</th>-->\\r\\n                <th class=\\\"center w100\\\">\\r\\n                    <button type=\\\"button\\\" class=\\\"btn btn-sm blue\\\" (click)=\\\"syncAll()\\\">\\r\\n                        <i class=\\\"fa fa-refresh\\\"></i>\\r\\n                        Đồng bộ\\r\\n                    </button>\\r\\n                </th>\\r\\n            </tr>\\r\\n            </thead>\\r\\n            <tbody>\\r\\n            <tr *ngFor=\\\"let machine of machines; let i = index\\\">\\r\\n                <td>{{i + 1}}</td>\\r\\n                <td>{{machine.name}}</td>\\r\\n                <td>{{machine.ip}}</td>\\r\\n                <!--<td></td>-->\\r\\n                <td class=\\\"center\\\">\\r\\n                    <button type=\\\"button\\\" class=\\\"btn btn-sm blue\\\" (click)=\\\"syncData(machine)\\\">\\r\\n                        <i class=\\\"fa fa-refresh\\\"></i>\\r\\n                        Đồng bộ\\r\\n                    </button>\\r\\n                </td>\\r\\n            </tr>\\r\\n            </tbody>\\r\\n        </table>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<nh-modal [size]=\\\"'md'\\\">\\r\\n    <nh-modal-header>\\r\\n        <h4 class=\\\"title\\\">Thông tin đồng bộ.</h4>\\r\\n    </nh-modal-header>\\r\\n    <nh-modal-content>\\r\\n        <ul>\\r\\n            <li *ngFor=\\\"let connectMachine of connectMachines\\\">\\r\\n                <span class=\\\"color-blue\\\"\\r\\n                      *ngIf=\\\"connectMachine.status === CONNECT_STATUS.PENDING; else connectDoneStatusTemplate\\\">\\r\\n                    Đang kết nối đến máy chấm công {{connectMachine.name}}...\\r\\n                </span>\\r\\n                <ng-template #connectDoneStatusTemplate>\\r\\n                    <span [class.color-red]=\\\"connectMachine.status === CONNECT_STATUS.FAIL\\\"\\r\\n                          [class.color-green]=\\\"connectMachine.status === CONNECT_STATUS.SUCCESS\\\">\\r\\n                        Kết nối đến {{connectMachine.name}} {{(connectMachine.status === CONNECT_STATUS.SUCCESS ? 'thành công'\\r\\n                            : connectMachine.status === CONNECT_STATUS.FAIL ? 'thất bại' : '')}}\\r\\n                    </span>\\r\\n                </ng-template>\\r\\n            </li>\\r\\n        </ul>\\r\\n\\r\\n        <div *ngIf=\\\"isSearching; else contentTemplate\\\">\\r\\n            Đang tiến hành lấy dữ liệu chấm công...\\r\\n        </div>\\r\\n        <ng-template #contentTemplate>\\r\\n            <div><b>Tìm thấy: {{totalRecords}} bản ghi trùng với kết quả tìm kiếm.</b></div>\\r\\n            <table class=\\\"table table-bordered table-striped table-hover\\\">\\r\\n                <thead>\\r\\n                <tr>\\r\\n                    <th class=\\\"center\\\">STT</th>\\r\\n                    <th class=\\\"center\\\">Mấy chấm công</th>\\r\\n                    <th class=\\\"center\\\">Mã chấm công</th>\\r\\n                    <th class=\\\"center\\\">Ngày chấm công</th>\\r\\n                    <th class=\\\"center\\\">Thời gian</th>\\r\\n                    <th class=\\\"center\\\">Đi muộn</th>\\r\\n                    <th class=\\\"center\\\">Về sớm</th>\\r\\n                    <th class=\\\"center\\\">Đi sớm</th>\\r\\n                    <th class=\\\"center\\\">Về muộn</th>\\r\\n                    <th class=\\\"center\\\">Hợp lệ</th>\\r\\n                </tr>\\r\\n                </thead>\\r\\n                <tbody>\\r\\n                <tr *ngFor=\\\"let item of listRecords; let i = index\\\">\\r\\n                    <td class=\\\"center\\\">{{i + 1}}</td>\\r\\n                    <td>{{item.machineId}}</td>\\r\\n                    <td>{{item.enrollNumber}}</td>\\r\\n                    <td>{{item.checkInTime | dateTimeFormat:'DD/MM/YYYY'}}</td>\\r\\n                    <td class=\\\"text-right\\\">{{item.hour}}:{{item.minute}}:{{item.second}}</td>\\r\\n                    <td class=\\\"text-right\\\" [class.bg-danger]=\\\"item.inLateMin > 0\\\">{{item.inLateMin}}</td>\\r\\n                    <td class=\\\"text-right\\\" [class.bg-danger]=\\\"item.outSoonMin > 0\\\">{{item.outSoonMin}}</td>\\r\\n                    <td class=\\\"text-right\\\" [class.bg-success]=\\\"item.inSoonMin > 0\\\">{{item.inSoonMin}}</td>\\r\\n                    <td class=\\\"text-right\\\" [class.bg-success]=\\\"item.outLateMin > 0\\\">{{item.outLateMin}}</td>\\r\\n                    <td class=\\\"center\\\">\\r\\n                        <i class=\\\"fa fa-check color-green\\\" *ngIf=\\\"item.isValid\\\"></i>\\r\\n                    </td>\\r\\n                </tr>\\r\\n                </tbody>\\r\\n            </table>\\r\\n        </ng-template>\\r\\n    </nh-modal-content>\\r\\n    <nh-modal-footer>\\r\\n        <button type=\\\"button\\\" mat-raised-button color=\\\"default\\\" nh-dismiss=\\\"true\\\">\\r\\n            <i class=\\\"fa fa-times\\\"></i>\\r\\n            Đóng lại\\r\\n        </button>\\r\\n    </nh-modal-footer>\\r\\n\\r\\n</nh-modal>\\r\\n\"","import { AfterViewInit, ChangeDetectorRef, Component, Inject, OnInit, ViewChild } from '@angular/core';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { BaseComponent } from '../../../../base.component';\r\nimport { IAppConfig } from '../../../../interfaces/iapp-config';\r\nimport * as _ from 'lodash';\r\nimport { TimekeepingConfigService } from '../../config/timekeeping-config.service';\r\nimport { SyncDataService } from './sync-data.service';\r\nimport { NhModalComponent } from '../../../../shareds/components/nh-modal/nh-modal.component';\r\nimport { APP_CONFIG } from '../../../../configs/app.config';\r\nimport { IPageId, PAGE_ID } from '../../../../configs/page-id.config';\r\nimport { NotifyService } from '../../../../shareds/services/notify.service';\r\nimport { AppService } from '../../../../shareds/services/app.service';\r\nimport { Machine } from '../../config/machine/machine.model';\r\nimport { finalize } from 'rxjs/operators';\r\nimport { CheckPermission } from '../../../../shareds/decorator/check-permission.decorator';\r\n\r\n@Component({\r\n    selector: 'app-sync-data-component',\r\n    templateUrl: './sync-data.component.html',\r\n    providers: [TimekeepingConfigService, SyncDataService]\r\n})\r\n@CheckPermission()\r\nexport class SyncDataComponent extends BaseComponent implements OnInit, AfterViewInit {\r\n    @ViewChild(NhModalComponent) detailModalComponent: NhModalComponent;\r\n    enrollNumber: number;\r\n    fromDate: string;\r\n    toDate: string;\r\n    totalRecords: number;\r\n    connection: any;\r\n    machines = [];\r\n    listRecords = [];\r\n\r\n    CONNECT_STATUS = {\r\n        PENDING: 0,\r\n        SUCCESS: 1,\r\n        FAIL: 2\r\n    };\r\n    connectMachines = [];\r\n\r\n    constructor(@Inject(APP_CONFIG) public appConfig: IAppConfig,\r\n                @Inject(PAGE_ID) pageId: IPageId,\r\n                private changeRef: ChangeDetectorRef,\r\n                private title: Title,\r\n                private notifyService: NotifyService,\r\n                private appService: AppService,\r\n                private timekeepingConfigService: TimekeepingConfigService,\r\n                private syncDataService: SyncDataService) {\r\n        super();\r\n\r\n        this.isSearching = true;\r\n        this.timekeepingConfigService.searchMachine()\r\n            .pipe(finalize(() => this.isSearching = false))\r\n            .subscribe((result: any) => {\r\n                this.machines = result;\r\n            });\r\n\r\n        this.title.setTitle('Đồng bộ dữ liệu chấm công');\r\n        this.appService.setupPage(pageId.HR, pageId.TIMEKEEPING_SYNC_DATA, 'Chấm công', 'Đồng bộ dữ liệu chấm công.');\r\n        // this.getPermission(this.appService);\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        const hubProxy = this.notifyService.notifyHubProxy;\r\n        hubProxy.on('onFinish', (machineId: string, machineName: string, totalRecords: number, insertedRecords: any) => {\r\n            this.isSearching = false;\r\n            this.totalRecords = totalRecords;\r\n            console.log('Finish sync data');\r\n        });\r\n\r\n        hubProxy.on('onNoRecordFound', (machineId: string, machineName: string) => {\r\n            console.log('onNoRecordFound', machineId, machineName);\r\n        });\r\n\r\n        hubProxy.on('onConnectFail', (machineId: string, machineName: string) => {\r\n            _.each(this.connectMachines, (machine) => {\r\n                if (machine.id === machineId) {\r\n                    machine.status = this.CONNECT_STATUS.FAIL;\r\n                    this.changeRef.detectChanges();\r\n                }\r\n            });\r\n            console.log('onConnectFail', machineId, machineName);\r\n        });\r\n\r\n        hubProxy.on('onConnectSuccess', (machineId: string, machineName: string) => {\r\n            _.each(this.connectMachines, (machine) => {\r\n                if (machine.id === machineId) {\r\n                    machine.status = this.CONNECT_STATUS.SUCCESS;\r\n\r\n                    // Hiển thị loading dữ liệu\r\n                    this.isSearching = true;\r\n                    this.changeRef.detectChanges();\r\n                }\r\n            });\r\n            console.log('onConnectSuccess:', machineId, machineName);\r\n        });\r\n\r\n        hubProxy.on('onReadFail', (machineId: string, machineName: string) => {\r\n            console.log('OnReadFail:', machineId, machineName);\r\n        });\r\n    }\r\n\r\n    onSelectUser(user: { id: string, name: string, enrollNumber: number }) {\r\n        this.enrollNumber = user.enrollNumber;\r\n    }\r\n\r\n    onSelectFromDate(date) {\r\n        this.fromDate = date.currentValue;\r\n    }\r\n\r\n    onSelectToDate(date) {\r\n        this.toDate = date.currentValue;\r\n    }\r\n\r\n    syncAll() {\r\n        this.sync(null);\r\n        this.detailModalComponent.show();\r\n        this.connectMachines = _.map(this.machines, (machine) => {\r\n            return {\r\n                id: machine.id,\r\n                name: machine.name,\r\n                status: this.CONNECT_STATUS.PENDING\r\n            };\r\n        });\r\n    }\r\n\r\n    syncData(machine: Machine) {\r\n        this.detailModalComponent.show();\r\n        this.sync(machine.id);\r\n        this.connectMachines.push({\r\n            id: machine.id,\r\n            name: machine.name,\r\n            status: this.CONNECT_STATUS.PENDING\r\n        });\r\n    }\r\n\r\n    private sync(machineId?: string) {\r\n        this.isSaving = true;\r\n        this.syncDataService.syncData(this.enrollNumber, this.fromDate, this.toDate, machineId)\r\n            .pipe(finalize(() => this.isSaving = false))\r\n            .subscribe(result => {\r\n                console.log('Đang tiến hành đông bộ dữ liệu.');\r\n            });\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\n\r\n@Injectable()\r\nexport class SyncDataService {\r\n    url = 'sync-data/';\r\n\r\n    constructor(private http: HttpClient) {\r\n    }\r\n\r\n    syncData(enrollNumber: number, fromDate?: string, toDate?: string, machineId?: string) {\r\n        return this.http.post(`${this.url}sync`, '', {\r\n            params: new HttpParams()\r\n                .set('enrollNumber', enrollNumber ? enrollNumber.toString() : '')\r\n                .set('fromDate', fromDate ? fromDate : '')\r\n                .set('toDate', toDate ? toDate : '')\r\n                .set('machineId', machineId ? machineId : '')\r\n        });\r\n    }\r\n}\r\n","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-upload-user-data',\r\n    templateUrl: './upload-user-data.component.html'\r\n})\r\n\r\nexport class UploadUserDataComponent implements OnInit {\r\n    constructor() {\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n}\r\n","/**\r\n * Created by HoangIT21 on 7/21/2017.\r\n */\r\nimport { Moment } from 'moment';\r\n\r\nexport class DayOff {\r\n    id: string;\r\n    enrollNumber: number;\r\n    userId: string;\r\n    fullName: string;\r\n    officeId: number;\r\n    officeName: string;\r\n    titleId: number;\r\n    titleName: string;\r\n    creatorId: string;\r\n    creatorFullName: string;\r\n    status: number;\r\n    statusText: string;\r\n    // approveTime: string;\r\n    fromDate: string;\r\n    toDate: string;\r\n    dayOff: string;\r\n    dayWork: string;\r\n    totalDays: number;\r\n    totalApprovedDays?: number;\r\n    method: number;\r\n    managerUserId: string;\r\n    approverUserId: string;\r\n    registerDate: string;\r\n    // shiftGroupId: string;\r\n    // shiftGroupName: string;\r\n    // shifts: IDayOffShift[];\r\n    reason: string;\r\n    managerNote: string;\r\n    approverNote: string;\r\n    managerDeclineReason: string;\r\n    approverDeclineReason: string;\r\n    managerApproveTime: string;\r\n    approverApproveTime: string;\r\n    dates: DayOffDate[];\r\n\r\n    methodText() {\r\n        return this.method === 0 ? 'Nghỉ phép' :\r\n            this.method === 1 ? 'Nghỉ không lương' :\r\n                this.method === 2 ? 'Nghỉ bù' :\r\n                    this.method === 3 ? 'Nghỉ bảo hiểm' : '';\r\n    }\r\n\r\n    constructor() {\r\n        // this.shifts = [];\r\n    }\r\n}\r\n\r\nexport class DayOffDate {\r\n    date: Moment | string;\r\n    dateText: string;\r\n    dateName: string;\r\n    day?: number;\r\n    month?: number;\r\n    year?: number;\r\n    value: number;\r\n    method: number;\r\n    methodName?: string;\r\n    isShowDay: boolean;\r\n    isHoliday: boolean;\r\n    isManagerApprove?: boolean;\r\n    isApproverApprove?: boolean;\r\n    managerNote?: string;\r\n    approverNote?: string;\r\n    managerDeclineReason?: string;\r\n    approverDeclineReason?: string;\r\n    shiftId: string;\r\n    shiftCode: string;\r\n    shiftReportName: string;\r\n    shiftWorkUnit: number;\r\n    shiftWorkingDaysValue: number;\r\n}\r\n\r\nexport interface IDayOffShiftDisplay {\r\n    id: string;\r\n    code: string;\r\n    reportName: string;\r\n    method?: number;\r\n    methodName?: string;\r\n    workUnit: number;\r\n    isShowDay: boolean;\r\n    isHoliday: boolean;\r\n    value: number;\r\n    workingDaysValue: number;\r\n    managerNote?: string;\r\n    isManagerApprove?: boolean;\r\n    isApproverApprove?: boolean;\r\n    approverNote?: string;\r\n    managerDeclineReason?: string;\r\n    approverDeclineReason?: string;\r\n}\r\n\r\nexport interface IDateDisplay {\r\n    date: Moment;\r\n    dateText: string;\r\n    dateName: string;\r\n    shifts: IDayOffShiftDisplay[];\r\n}\r\n\r\nexport interface IDayOffConfirm {\r\n    id: string;\r\n    isApprove: boolean;\r\n    managerNote?: string;\r\n    approverNote?: string;\r\n    managerDeclineReason: string;\r\n    approverDeclineReason: string;\r\n    type: number;\r\n    dates: DayOffDate[];\r\n}\r\n","module.exports = \"<nh-modal #dayOffRegisterModal [size]=\\\"'md'\\\" class=\\\"form\\\">\\r\\n    <nh-modal-header [showCloseButton]=\\\"true\\\">\\r\\n        <h4 class=\\\"title\\\">\\r\\n            <i class=\\\"fa fa-registered\\\"></i> Đăng ký nghỉ\\r\\n        </h4>\\r\\n\\r\\n        <div class=\\\"row\\\" *ngIf=\\\"warningMessage\\\">\\r\\n            <div class=\\\"col-sm-12\\\">\\r\\n                <div class=\\\"alert alert-warning\\\">\\r\\n                    {{warningMessage}}\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </nh-modal-header>\\r\\n    <form class=\\\"form-horizontal form-bordered\\\" (ngSubmit)=\\\"save()\\\" [formGroup]=\\\"formModel\\\">\\r\\n        <nh-modal-content class=\\\"form-body\\\"\\r\\n                          [isLoading]=\\\"isSearching\\\"\\r\\n                          [isBlockContent]=\\\"isLockForm\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <!--<div class=\\\"col-sm-12\\\"-->\\r\\n                     <!--*ngIf=\\\"formModel.value.method === METHODS.ANNUAL_LEAVE && currentUser?.holidayRemain > 0\\\">-->\\r\\n                    <!--<div class=\\\"alert alert-info cm-mgb-0\\\">-->\\r\\n                        <!--<b>Thông báo: </b> Bạn còn {{currentUser?.holidayRemain}} ngày phép trong năm nay.-->\\r\\n                    <!--</div>-->\\r\\n                <!--</div>-->\\r\\n                <!--<div class=\\\"col-sm-12\\\"-->\\r\\n                     <!--*ngIf=\\\"formModel.value.method === METHODS.ANNUAL_LEAVE && (currentUser?.holidayRemain === 0 || !currentUser.holidayRemain)\\\">-->\\r\\n                    <!--<div class=\\\"alert alert-danger cm-mgb-0\\\">-->\\r\\n                        <!--<b>Thông báo: </b> Số ngày phép của bạn trong năm nay đã hết. Bạn không thể đăng ký nghỉ phép-->\\r\\n                        <!--thêm.-->\\r\\n                    <!--</div>-->\\r\\n                <!--</div>-->\\r\\n                <div class=\\\"col-sm-12\\\" *ngIf=\\\"errorMessage\\\">\\r\\n                    <div class=\\\"alert alert-info cm-mgb-0\\\">\\r\\n                        <b>Xin lỗi: </b> {{errorMessage}}\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"col-sm-12\\\" *ngIf=\\\"listShifts == null\\\">\\r\\n                    <div class=\\\"alert alert-danger cm-mgb-0\\\">\\r\\n                        <b>Xin lỗi: </b> Bạn chưa được cấu hình ca làm việc. Vui lòng liên hệ với bộ phận nhân sự để\\r\\n                        được trợ giúp.\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Từ ngày\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                    <nh-date [id]=\\\"'register-from-date'\\\"\\r\\n                             [type]=\\\"'inputButton'\\\"\\r\\n                             [title]=\\\"'Chọn nghỉ từ ngày'\\\"\\r\\n                             formControlName=\\\"fromDate\\\"\\r\\n                             (selectedDateEvent)=\\\"onSelectFromDate($event)\\\"></nh-date>\\r\\n                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.fromDate\\\">\\r\\n                        {{ formErrors.fromDate }}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Đến ngày\\\" class=\\\"col-md-3 col-sm-4 control-label\\\"></label>\\r\\n                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                    <nh-date [id]=\\\"'register-to-date'\\\"\\r\\n                             [type]=\\\"'inputButton'\\\"\\r\\n                             [title]=\\\"'Chọn nghỉ đến ngày'\\\"\\r\\n                             formControlName=\\\"toDate\\\"\\r\\n                             (selectedDateEvent)=\\\"onSelectToDate($event)\\\"\\r\\n                             (removedDateEvent)=\\\"onSelectToDate(null)\\\"></nh-date>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Hình thức nghỉ\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                    <nh-select [data]=\\\"listMethod\\\" [title]=\\\"'-- Chọn hình thức xin nghỉ --'\\\"\\r\\n                               formControlName=\\\"method\\\"\\r\\n                               (onSelectItem)=\\\"onSelectMethod($event)\\\"></nh-select>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\"\\r\\n                 *ngIf=\\\"formModel.value.method !== METHODS.INSURANCE_LEAVE && listShifts\\\">\\r\\n                <label ghmLabel=\\\"Chọn ca nghỉ\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                    <table class=\\\"table table-bordered table-striped table-hover table-main\\\">\\r\\n                        <thead>\\r\\n                        <tr>\\r\\n                            <th class=\\\"center middle\\\" [attr.rowspan]=\\\"listShifts.length\\\">Ngày</th>\\r\\n                            <th class=\\\"center middle\\\" [attr.colspan]=\\\"listShifts.length\\\">Ca làm việc</th>\\r\\n                        </tr>\\r\\n                        <tr>\\r\\n                            <th class=\\\"center middle\\\" *ngFor=\\\"let shift of listShifts\\\">\\r\\n                                {{shift.reportName}}\\r\\n                            </th>\\r\\n                        </tr>\\r\\n                        </thead>\\r\\n                        <tbody>\\r\\n                        <tr *ngFor=\\\"let date of listDates\\\">\\r\\n                            <td class=\\\"center\\\">\\r\\n                                <div class=\\\"bold\\\">{{date.dateText}}</div>\\r\\n                                <label class=\\\"label-color\\\">({{date.dateName}})</label>\\r\\n                            </td>\\r\\n                            <td *ngFor=\\\"let shift of date.shifts\\\"\\r\\n                                class=\\\"center middle\\\">\\r\\n                                <nh-select *ngIf=\\\"shift.isShowDay && !shift.isHoliday\\\"\\r\\n                                           [data]=\\\"listShortMethod\\\" [title]=\\\"'-'\\\"\\r\\n                                           [(value)]=\\\"shift.method\\\"\\r\\n                                           (onSelectItem)=\\\"onDayMethodSelect(shift, $event)\\\"></nh-select>\\r\\n                            </td>\\r\\n                        </tr>\\r\\n                        </tbody>\\r\\n                    </table><!-- END: table -->\\r\\n                    <ul>\\r\\n                        <li *ngFor=\\\"let item of listStats\\\">\\r\\n                            {{item.name}}: <b>{{item.quantity}} Ngày</b>\\r\\n                        </li>\\r\\n                    </ul>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Lý do xin nghỉ\\\" class=\\\"col-md-3 col-sm-4 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                    <textarea rows=\\\"4\\\" class=\\\"form-control\\\" placeholder=\\\"Vui lòng nhập lý do xin nghỉ\\\"\\r\\n                              (keydown.enter)=\\\"save()\\\" formControlName=\\\"reason\\\"></textarea>\\r\\n                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.reason\\\">\\r\\n                        {{ formErrors.reason }}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </nh-modal-content>\\r\\n        <nh-modal-footer>\\r\\n            <button mat-raised-button color=\\\"primary\\\">\\r\\n                <nh-icon-loading [isLoading]=\\\"isSaving\\\"></nh-icon-loading>\\r\\n                {{isUpdate ? 'Cập nhật' : 'Đăng ký'}}\\r\\n            </button>\\r\\n            <button type=\\\"button\\\" nh-dismiss=\\\"true\\\" mat-raised-button>\\r\\n                <i class=\\\"fa fa-times\\\"></i>\\r\\n                Hủy\\r\\n            </button>\\r\\n        </nh-modal-footer>\\r\\n    </form>\\r\\n</nh-modal>\\r\\n\"","/**\r\n * Created by HoangIT21 on 7/20/2017.\r\n */\r\nimport { Component, EventEmitter, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { BaseComponent } from '../../../base.component';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport * as moment from 'moment';\r\nimport * as _ from 'lodash';\r\nimport { Moment } from 'moment';\r\nimport { TimekeepingDayOffService } from './timekeeping-dayoff.service';\r\nimport { TimekeepingHolidayService } from '../config/holiday/timekeeping-holiday.service';\r\nimport { DestroySubscribers } from '../../../shareds/decorator/destroy-subscribes.decorator';\r\nimport { NhModalComponent } from '../../../shareds/components/nh-modal/nh-modal.component';\r\nimport { DayOff, DayOffDate, IDateDisplay, IDayOffShiftDisplay } from './day-off.model';\r\nimport { AppService } from '../../../shareds/services/app.service';\r\nimport { UtilService } from '../../../shareds/services/util.service';\r\nimport { TimekeepingWorkScheduleService } from '../config/work-schedule/timekeeping-work-schedule.service';\r\nimport { Holiday } from '../config/holiday/holiday.model';\r\nimport { finalize } from 'rxjs/operators';\r\n\r\n@Component({\r\n    selector: 'app-timekeeping-day-off-register',\r\n    templateUrl: './timekeeping-day-off-register.component.html',\r\n    providers: [TimekeepingDayOffService, TimekeepingHolidayService]\r\n})\r\n\r\n@DestroySubscribers()\r\nexport class TimekeepingDayOffRegisterComponent extends BaseComponent implements OnInit {\r\n    @ViewChild('dayOffRegisterModal') dayOffRegisterModal: NhModalComponent;\r\n    @Output() onSaveSuccess = new EventEmitter();\r\n    listMethod: any = [];\r\n    listShortMethod: any = [];\r\n    listStats: any = [];\r\n    listHolidays = [];\r\n    model = new DayOff();\r\n    dayOffDate = new DayOffDate();\r\n    formModel: FormGroup;\r\n    errorMessage = '';\r\n    listShifts = [];\r\n    listDates: IDateDisplay[] = [];\r\n    warningMessage = '';\r\n    isLockForm = false;\r\n\r\n    // Stats\r\n    totalAnnualLeave;\r\n    totalUnpaidLeave;\r\n    totalInsuranceLeave;\r\n    totalCompensatory;\r\n    totalEntitlement;\r\n\r\n    METHODS = {\r\n        ANNUAL_LEAVE: 0,\r\n        UNPAID_LEAVE: 1,\r\n        COMPENSATORY_LEAVE: 2,\r\n        INSURANCE_LEAVE: 3,\r\n        ENTITLEMENT: 4,\r\n        WEEK_LEAVE: 5,\r\n        HOLIDAY_LEAVE: 6\r\n    };\r\n\r\n    MOMENT_DAY_OF_WEEK = {\r\n        SUNDAY: 0,\r\n        MONDAY: 1,\r\n        TUESDAY: 2,\r\n        WEDNESDAY: 3,\r\n        THURSDAY: 4,\r\n        FRIDAY: 5,\r\n        SATURDAY: 6\r\n    };\r\n\r\n    constructor(private fb: FormBuilder,\r\n                private toastr: ToastrService,\r\n                private appService: AppService,\r\n                private dayOffService: TimekeepingDayOffService,\r\n                public utilService: UtilService,\r\n                private workScheduleService: TimekeepingWorkScheduleService,\r\n                private holidayService: TimekeepingHolidayService) {\r\n        super();\r\n        // this.currentUser = this.appService.currentUser;\r\n\r\n        this.listMethod = [\r\n            {id: 0, name: 'Nghỉ phép (NP)'},\r\n            {id: 1, name: 'Nghỉ không lương (NKL)'},\r\n            {id: 2, name: 'Nghỉ bù (NB)'},\r\n            {id: 3, name: 'Nghỉ bào hiểm (NBH)'},\r\n            {id: 4, name: 'Nghỉ chế độ (NCĐ)'}\r\n        ];\r\n\r\n        this.listShortMethod = [\r\n            {id: 0, name: 'NP'},\r\n            {id: 1, name: 'NKL'},\r\n            {id: 2, name: 'NB'},\r\n            {id: 3, name: 'NBH'},\r\n            {id: 4, name: 'NCĐ'}\r\n        ];\r\n\r\n        this.formErrors = this.utilService.renderFormError(['fromDate', 'reason']);\r\n        this.validationMessages = {\r\n            'fromDate': {\r\n                'required': 'Vui lòng chọn nghỉ từ ngày'\r\n            },\r\n            'reason': {\r\n                'required': 'Vui lòng nhập lý do nghỉ',\r\n                'maxLength': 'Lý do nghỉ không được phép vượt quá 500 ký tự.'\r\n            }\r\n        };\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.buildForm();\r\n        this.subscribers.onDayOffRegisterShow = this.dayOffRegisterModal.onShown.subscribe(() => {\r\n            this.workScheduleService.getMyWorkSchedule()\r\n                .pipe(finalize(() => this.isSearching = false))\r\n                .subscribe((result: any) => {\r\n                    this.isLockForm = false;\r\n                    this.warningMessage = '';\r\n                    this.listShifts = result.shifts;\r\n                }, (errorResult: any) => {\r\n                    this.isLockForm = true;\r\n                    this.warningMessage = errorResult.error.message;\r\n                });\r\n        });\r\n\r\n        this.subscribers.getListHolidays = this.holidayService.getYearHolidays()\r\n            .subscribe((result: any) => {\r\n                this.listHolidays = result;\r\n            });\r\n    }\r\n\r\n    onSelectFromDate(date) {\r\n        this.calculateListDate();\r\n    }\r\n\r\n    onSelectToDate(date) {\r\n        this.calculateListDate();\r\n    }\r\n\r\n    onSelectMethod(method) {\r\n        this.listDates.forEach((date: any) => {\r\n            date.shifts.forEach((shift: any) => {\r\n                shift.method = !shift.isHoliday ? method.id : this.METHODS.HOLIDAY_LEAVE;\r\n            });\r\n        });\r\n        this.calculateStats();\r\n    }\r\n\r\n    onDayMethodSelect(shift: any, method: any) {\r\n        shift.method = !shift.isHoliday ? method.id : this.METHODS.HOLIDAY_LEAVE;\r\n        this.calculateStats();\r\n    }\r\n\r\n    showModal() {\r\n        this.dayOffRegisterModal.show();\r\n    }\r\n\r\n    setUpdate(dayOffRegister: DayOff) {\r\n        this.isUpdate = true;\r\n        _.each(dayOffRegister.dates, (date: DayOffDate) => {\r\n            date.date = moment(date.date, this.appService.momentDateTimeLocalFormat[this.appService.locale].shortDate);\r\n            date.dateText = `${date.date.date()}/${date.date.month() + 1}`;\r\n            date.dateName = this.getDayName(date.date.day());\r\n            date.isShowDay = this.utilService.bitwiseCheck(date.shiftWorkingDaysValue, this.getDayValue(date.date.day()));\r\n            date.isHoliday = this.checkDayIsHoliday(date.date);\r\n        });\r\n        this.renderListDates(dayOffRegister.dates);\r\n        this.formModel.patchValue(dayOffRegister);\r\n        this.calculateStats();\r\n        this.showModal();\r\n    }\r\n\r\n    save() {\r\n        this.model = this.formModel.value;\r\n        // Nếu là nghỉ phép sẽ kiểm tra với số ngày phép còn lại.\r\n        if (this.model.method === this.METHODS.ANNUAL_LEAVE && this.model.toDate) {\r\n            // TODO: Check this\r\n            // Check total annual leave days\r\n            // if (this.totalAnnualLeave > this.currentUser.holidayRemain) {\r\n            //     this.errorMessage = 'Số ngày nghỉ phép không được phép lớn hơn số ngày phép còn lại';\r\n            //     return;\r\n            // }\r\n        }\r\n\r\n        if (!this.isUpdate && (this.model.method == null || this.model.method === undefined)) {\r\n            this.toastr.error('Vui lòng chọn hình thức nghỉ');\r\n            return;\r\n        }\r\n\r\n        const isValid = this.utilService.onValueChanged(this.formModel, this.formErrors, this.validationMessages, true);\r\n        if (isValid) {\r\n            const listDayOffDate = this.convertListDatesDisplayToListDates();\r\n            this.model.dates = listDayOffDate;\r\n\r\n            this.isSaving = true;\r\n            if (this.isUpdate) {\r\n                this.dayOffService.update(this.model)\r\n                    .pipe(finalize(() => this.isSaving = false))\r\n                    .subscribe(() => {\r\n                        this.toastr.success('Cập nhật thông tin nghỉ phép thành công.');\r\n                        this.dayOffRegisterModal.dismiss();\r\n                        this.formModel.reset();\r\n                        this.onSaveSuccess.emit(false);\r\n                    });\r\n            } else {\r\n                this.dayOffService.insert(this.model)\r\n                    .pipe(finalize(() => this.isSaving = false))\r\n                    .subscribe(() => {\r\n                        this.toastr.success('Đăng ký nghỉ phép thành công. Vui lòng chờ cấp trên phê duyệt.');\r\n                        this.dayOffRegisterModal.dismiss();\r\n                        this.formModel.reset();\r\n                        this.onSaveSuccess.emit(true);\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    private buildForm() {\r\n        this.formModel = this.fb.group({\r\n            'id': [this.model.id],\r\n            'fromDate': [this.model.fromDate],\r\n            'toDate': [this.model.toDate],\r\n            'method': [this.model.method],\r\n            'dayOff': [this.model.dayOff],\r\n            'dayWork': [this.model.dayWork],\r\n            'reason': [this.model.reason, [\r\n                Validators.required,\r\n                Validators.maxLength(500)\r\n            ]],\r\n            // 'shifts': [this.model.shifts],\r\n            'dates': this.fb.array([])\r\n        });\r\n        this.formModel.valueChanges.subscribe(data =>\r\n            this.utilService.onValueChanged(this.formModel, this.formErrors, this.validationMessages));\r\n    }\r\n\r\n    private getDayName(dayOfWeek: number) {\r\n        return dayOfWeek === this.MOMENT_DAY_OF_WEEK.SUNDAY ? 'CN' : 'Thứ ' + (dayOfWeek + 1);\r\n    }\r\n\r\n    private getDayValue(dayOfWeek: number) {\r\n        switch (dayOfWeek) {\r\n            case this.MOMENT_DAY_OF_WEEK.SUNDAY:\r\n                return 1;\r\n            case this.MOMENT_DAY_OF_WEEK.MONDAY:\r\n                return 2;\r\n            case this.MOMENT_DAY_OF_WEEK.TUESDAY:\r\n                return 4;\r\n            case this.MOMENT_DAY_OF_WEEK.WEDNESDAY:\r\n                return 8;\r\n            case this.MOMENT_DAY_OF_WEEK.THURSDAY:\r\n                return 16;\r\n            case this.MOMENT_DAY_OF_WEEK.FRIDAY:\r\n                return 32;\r\n            case this.MOMENT_DAY_OF_WEEK.SATURDAY:\r\n                return 64;\r\n        }\r\n    }\r\n\r\n    private calculateListDate() {\r\n        const formValue = this.formModel.value;\r\n        const fromDate = moment(formValue.fromDate, this.appService.momentDateTimeLocalFormat[this.appService.locale].shortDate);\r\n        const toDate = formValue.toDate ? moment(formValue.toDate,\r\n            this.appService.momentDateTimeLocalFormat[this.appService.locale].shortDate) : fromDate;\r\n        const diff = fromDate.diff(toDate, 'days');\r\n\r\n        if (!this.listShifts) {\r\n            this.toastr.error('Bạn chưa được cấu hình ca làm việc. Vui lòng liên hệ với bộ phận nhân sự.');\r\n            return;\r\n        }\r\n\r\n        if (diff > 0) {\r\n            this.toastr.error('Đến ngày không được phép trước từ ngày.');\r\n            return;\r\n        }\r\n\r\n        const datesArray = [];\r\n        if (diff !== 0) {\r\n            this.listShifts.forEach((shift: any) => {\r\n                for (let i = 0; i <= Math.abs(diff); i++) {\r\n                    const newDay = moment(fromDate).add(i, 'days');\r\n                    const weekDay = newDay.day();\r\n                    datesArray.push({\r\n                        shiftId: shift.id,\r\n                        shiftCode: shift.code,\r\n                        shiftReportName: shift.reportName,\r\n                        shiftWorkUnit: shift.workUnit,\r\n                        shiftWorkingDaysValue: shift.workingDaysValue,\r\n                        date: newDay,\r\n                        dateText: `${newDay.date()}/${newDay.month() + 1}`,\r\n                        dateName: this.getDayName(weekDay),\r\n                        value: this.getDayValue(weekDay),\r\n                        method: this.formModel.value.method ? this.formModel.value.method : null,\r\n                        methodName: this.getMethodShortName(this.formModel.value.method),\r\n                        isShowDay: this.utilService.bitwiseCheck(shift.workingDaysValue, this.getDayValue(weekDay)),\r\n                        isHoliday: this.checkDayIsHoliday(newDay)\r\n                    });\r\n                }\r\n            });\r\n        } else {\r\n            this.listShifts.forEach((shift: any) => {\r\n                const weekday = fromDate.day();\r\n                datesArray.push({\r\n                    shiftId: shift.id,\r\n                    shiftCode: shift.code,\r\n                    shiftReportName: shift.reportName,\r\n                    shiftWorkUnit: shift.workUnit,\r\n                    shiftWorkingDaysValue: shift.workingDaysValue,\r\n                    date: fromDate,\r\n                    dateText: `${fromDate.date()}/${fromDate.month() + 1}`,\r\n                    dateName: this.getDayName(weekday),\r\n                    value: this.getDayValue(weekday),\r\n                    method: this.formModel.value.method ? this.formModel.value.method : null,\r\n                    methodName: this.getMethodShortName(this.formModel.value.method),\r\n                    isShowDay: this.utilService.bitwiseCheck(shift.workingDaysValue, this.getDayValue(weekday)),\r\n                    isHoliday: this.checkDayIsHoliday(fromDate)\r\n                });\r\n            });\r\n        }\r\n        this.renderListDates(datesArray);\r\n    }\r\n\r\n    private calculateStats() {\r\n        this.totalAnnualLeave = 0;\r\n        this.totalUnpaidLeave = 0;\r\n        this.totalInsuranceLeave = 0;\r\n        this.totalCompensatory = 0;\r\n        this.totalEntitlement = 0;\r\n\r\n        _.each(this.listDates, (date: any) => {\r\n            _.each(date.shifts, (shift: any) => {\r\n                this.totalAnnualLeave += shift.method === this.METHODS.ANNUAL_LEAVE\r\n                && (shift.workingDaysValue & shift.value) === shift.value && !shift.isHoliday ? shift.workUnit : 0;\r\n\r\n                this.totalUnpaidLeave += shift.method === this.METHODS.UNPAID_LEAVE\r\n                && (shift.workingDaysValue & shift.value) === shift.value && !shift.isHoliday ? shift.workUnit : 0;\r\n\r\n                this.totalInsuranceLeave += shift.method === this.METHODS.INSURANCE_LEAVE\r\n                && (shift.workingDaysValue & shift.value) === shift.value && !shift.isHoliday ? shift.workUnit : 0;\r\n\r\n                this.totalCompensatory += shift.method === this.METHODS.COMPENSATORY_LEAVE\r\n                && (shift.workingDaysValue & shift.value) === shift.value && !shift.isHoliday ? shift.workUnit : 0;\r\n\r\n                this.totalEntitlement += shift.method === this.METHODS.ENTITLEMENT\r\n                && (shift.workingDaysValue & shift.value) === shift.value && !shift.isHoliday ? shift.workUnit : 0;\r\n            });\r\n        });\r\n\r\n        this.listStats = [\r\n            {name: 'Nghỉ phép', quantity: this.totalAnnualLeave},\r\n            {name: 'Nghỉ không lương', quantity: this.totalUnpaidLeave},\r\n            {name: 'Nghỉ bảo hiểm', quantity: this.totalInsuranceLeave},\r\n            {name: 'Nghỉ bù', quantity: this.totalCompensatory},\r\n            {name: 'Nghỉ chế độ', quantity: this.totalEntitlement}\r\n        ];\r\n    }\r\n\r\n    private checkDayIsHoliday(day: Moment) {\r\n        const thisYear = moment().year();\r\n        const holiday = _.find(this.listHolidays, (holidayConfig: Holiday) => {\r\n            if (holidayConfig.toDay != null && holidayConfig.toDay.day != null && holidayConfig.toDay.month != null) {\r\n                const fromDay = new Date(thisYear, holidayConfig.fromDay.month - 1, holidayConfig.fromDay.day);\r\n                const toDay = new Date(thisYear, holidayConfig.toDay.month - 1, holidayConfig.toDay.day);\r\n\r\n                const dateDiff = moment(toDay).diff(fromDay, 'days');\r\n                for (let i = 0; i <= dateDiff; i++) {\r\n                    const currentDay = moment(fromDay).add(i, 'day');\r\n                    return currentDay.date() === day.date() && currentDay.month() === day.month();\r\n                }\r\n            } else {\r\n                return holidayConfig.fromDay.day === day.date() && holidayConfig.fromDay.month === day.month() + 1;\r\n            }\r\n        });\r\n\r\n        return holiday != null && holiday !== undefined;\r\n    }\r\n\r\n    private renderListDates(dates: any): void {\r\n        const groupDates = _.groupBy(dates, (date: DayOffDate) => {\r\n            return date.date;\r\n        });\r\n        if (groupDates) {\r\n            const datesGroupArray = [];\r\n            for (const key in groupDates) {\r\n                if (groupDates.hasOwnProperty(key)) {\r\n                    const firstDate = groupDates[key][0];\r\n                    const newDate = {\r\n                        date: firstDate.date,\r\n                        dateText: firstDate.dateText,\r\n                        dateName: firstDate.dateName,\r\n                        shifts: []\r\n                    };\r\n                    _.each(groupDates[key], (groupDate: DayOffDate) => {\r\n                        newDate.shifts.push({\r\n                            id: groupDate.shiftId,\r\n                            code: groupDate.shiftCode,\r\n                            reportName: groupDate.shiftReportName,\r\n                            method: groupDate.method,\r\n                            methodName: groupDate.methodName,\r\n                            workUnit: groupDate.shiftWorkUnit,\r\n                            isShowDay: groupDate.isShowDay,\r\n                            isHoliday: groupDate.isHoliday,\r\n                            value: groupDate.value,\r\n                            workingDaysValue: groupDate.shiftWorkingDaysValue\r\n                        } as IDayOffShiftDisplay);\r\n                    });\r\n                    datesGroupArray.push(newDate);\r\n                }\r\n            }\r\n            this.listDates = datesGroupArray;\r\n        }\r\n    }\r\n\r\n    private convertListDatesDisplayToListDates(): DayOffDate[] {\r\n        const listDayOff: DayOffDate[] = [];\r\n        _.each(this.listDates, (date: IDateDisplay) => {\r\n            _.each(date.shifts, (shift: IDayOffShiftDisplay) => {\r\n                const dayOff = new DayOffDate();\r\n                dayOff.date = date.date.format(this.appService.momentDateTimeLocalFormat[this.appService.locale].shortDate);\r\n                dayOff.dateText = date.dateText;\r\n                dayOff.dateName = date.dateName;\r\n                dayOff.value = shift.value;\r\n                dayOff.shiftWorkUnit = shift.workUnit;\r\n                dayOff.shiftId = shift.id;\r\n                dayOff.shiftWorkUnit = shift.workUnit;\r\n                dayOff.shiftReportName = shift.reportName;\r\n                dayOff.shiftCode = shift.code;\r\n                dayOff.shiftWorkingDaysValue = shift.workingDaysValue;\r\n                dayOff.method = shift.method;\r\n                listDayOff.push(dayOff);\r\n            });\r\n        });\r\n        return listDayOff;\r\n    }\r\n\r\n    private getMethodShortName(method: number) {\r\n        switch (method) {\r\n            case 0:\r\n                return 'NP';\r\n            case 1:\r\n                return 'NKL';\r\n            case 2:\r\n                return 'NB';\r\n            case 3:\r\n                return 'NBH';\r\n            case 4:\r\n                return 'NCĐ';\r\n            case 5:\r\n                return 'NT';\r\n            default:\r\n                return 'Đi làm';\r\n        }\r\n    }\r\n}\r\n","module.exports = \"<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <!--<div class=\\\"btn-group cm-mgb-10\\\" role=\\\"group\\\" *ngIf=\\\"currentUser?.isLeader\\\">-->\\r\\n            <!--<button type=\\\"button\\\" class=\\\"btn btn-default\\\" (click)=\\\"search(1, 0)\\\"-->\\r\\n                    <!--[class.active]=\\\"searchType === 0\\\">-->\\r\\n                <!--Bản đăng ký của tôi-->\\r\\n            <!--</button>-->\\r\\n            <!--<button type=\\\"button\\\" class=\\\"btn btn-default\\\" (click)=\\\"search(1, 1)\\\"-->\\r\\n                    <!--[class.active]=\\\"searchType === 1\\\">-->\\r\\n                <!--Nhân viên do tôi quản lý-->\\r\\n            <!--</button>-->\\r\\n            <!--<button type=\\\"button\\\" class=\\\"btn btn-default\\\" (click)=\\\"search(1, 2)\\\"-->\\r\\n                    <!--[class.active]=\\\"searchType === 2\\\">-->\\r\\n                <!--Nhân viên do tôi phê duyệt-->\\r\\n            <!--</button>-->\\r\\n        <!--</div>-->\\r\\n\\r\\n        <div class=\\\"row\\\">\\r\\n            <form class=\\\"cm-mgb-10 form-inline\\\" (ngSubmit)=\\\"search(1)\\\">\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <input class=\\\"form-control\\\" placeholder=\\\"Nhập tên nhân viên cần tìm\\\"\\r\\n                           (keypress)=\\\"keyword = keywordInput.value\\\"\\r\\n                           #keywordInput>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <nh-date\\r\\n                        [type]=\\\"'inputButton'\\\"\\r\\n                        [title]=\\\"'Lọc từ ngày'\\\"\\r\\n                        (selectedDateEvent)=\\\"onSelectFromDate($event)\\\"></nh-date>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <nh-date\\r\\n                        [type]=\\\"'inputButton'\\\"\\r\\n                        [title]=\\\"'Lọc đến ngày ngày'\\\"\\r\\n                        (selectedDateEvent)=\\\"onSelectToDate($event)\\\"></nh-date>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <nh-select\\r\\n                        [data]=\\\"[\\r\\n                                    {id: 0, name: 'Mới'},\\r\\n                                    {id: 1, name: 'Chờ QLTT duyệt'},\\r\\n                                    {id: 2, name: 'QLTT duyệt chờ QLPD duyệt'},\\r\\n                                    {id: 3, name: 'QLTT không duyệt'},\\r\\n                                    {id: 4, name: 'QLPD duyệt'},\\r\\n                                    {id: 5, name: 'QLPD không duyệt'}\\r\\n                                ]\\\"\\r\\n                        [title]=\\\"'-- Tất cả trạng thái --'\\\"\\r\\n                        (onSelectItem)=\\\"onSelectStatus($event)\\\"\\r\\n                    ></nh-select>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <button mat-raised-button color=\\\"primary\\\">\\r\\n                        <i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSearching\\\"></i>\\r\\n                        <i class=\\\"fa fa-search\\\" *ngIf=\\\"!isSearching\\\"></i>\\r\\n                        Tìm kiếm\\r\\n                    </button>\\r\\n                </div>\\r\\n\\r\\n                <div class=\\\"form-group pull-right\\\" (click)=\\\"showRegisterModal()\\\">\\r\\n                    <button mat-raised-button color=\\\"primary\\\">\\r\\n                        <i class=\\\"fa fa-plus\\\"></i>\\r\\n                        Đăng ký\\r\\n                    </button>\\r\\n                </div>\\r\\n            </form>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"table-responsive\\\">\\r\\n            <table class=\\\"table table-bordered table-striped table-hover table-main\\\">\\r\\n                <thead>\\r\\n                <tr>\\r\\n                    <th class=\\\"center middle w50\\\">#</th>\\r\\n                    <th class=\\\"center middle\\\">Tên nhân viên</th>\\r\\n                    <th class=\\\"center middle\\\">Từ ngày</th>\\r\\n                    <th class=\\\"center middle\\\">Đến ngày</th>\\r\\n                    <th class=\\\"center middle\\\">Số ngày</th>\\r\\n                    <th class=\\\"center middle\\\">Ngày đăng ký</th>\\r\\n                    <th class=\\\"center middle\\\">Trạng thái</th>\\r\\n                    <th class=\\\"center middle w150\\\">Hành động</th>\\r\\n                </tr>\\r\\n                </thead>\\r\\n                <tbody *ngIf=\\\"isSearching; else contentTemplate\\\">\\r\\n                <tr>\\r\\n                    <td colspan=\\\"9\\\">\\r\\n                        <div class=\\\"spinner\\\">\\r\\n                            <div class=\\\"rect1\\\"></div>\\r\\n                            <div class=\\\"rect2\\\"></div>\\r\\n                            <div class=\\\"rect3\\\"></div>\\r\\n                            <div class=\\\"rect4\\\"></div>\\r\\n                            <div class=\\\"rect5\\\"></div>\\r\\n                        </div>\\r\\n                    </td>\\r\\n                </tr>\\r\\n                </tbody>\\r\\n                <ng-template #contentTemplate>\\r\\n                    <tbody>\\r\\n                    <tr *ngFor=\\\"let item of listDayOff; let i = index\\\">\\r\\n                        <td class=\\\"center middle\\\">{{ (currentPage - 1) * pageSize + i + 1 }}</td>\\r\\n                        <td class=\\\"middle bold\\\">\\r\\n                            <a href=\\\"javascript://\\\" (click)=\\\"showDetail(item)\\\">{{item.fullName}}</a>\\r\\n                        </td>\\r\\n                        <td class=\\\"middle\\\">{{item.fromDate | dateTimeFormat:'DD/MM/YYYY':true}}</td>\\r\\n                        <td class=\\\"middle\\\">{{item.toDate | dateTimeFormat:'DD/MM/YYYY':true}}</td>\\r\\n                        <td class=\\\"middle text-right bold\\\">{{item.totalDays}}</td>\\r\\n                        <td class=\\\"middle\\\">{{item.registerDate | dateTimeFormat:'DD/MM/YYYY'}}</td>\\r\\n                        <td class=\\\"middle\\\"\\r\\n                            [class.color-blue]=\\\"item.status === 0 || item.status === 2\\\"\\r\\n                            [class.color-green]=\\\"item.status === 1 || item.status=== 4\\\"\\r\\n                            [class.color-red]=\\\"item.status === 3 || item.status === 5\\\">\\r\\n                            {{item.statusText}}\\r\\n                        </td>\\r\\n                        <td class=\\\"center middle\\\">\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"primary\\\"\\r\\n                                    *ngIf=\\\"(currentUser?.id === item.userId || currentUser?.id === item.creatorId)\\r\\n                                    && (item.status === DAYOFF_STATUS.WAIT_MANAGER_APPROVE || item.status === DAYOFF_STATUS.MANAGER_DECLINE)\\\"\\r\\n                                    matTooltip=\\\"Chỉnh sửa\\\" matTooltipPosition=\\\"above\\\"\\r\\n                                    (click)=\\\"edit(item)\\\">\\r\\n                                <i class=\\\"fa fa-edit\\\"></i>\\r\\n                            </button>\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"warn\\\"\\r\\n                                    *ngIf=\\\"(currentUser?.id === item.userId || currentUser?.id === item.creatorId)\\r\\n                                    && (item.status === DAYOFF_STATUS.WAIT_MANAGER_APPROVE || item.status === DAYOFF_STATUS.MANAGER_DECLINE)\\\"\\r\\n                                    matTooltip=\\\"Xóa\\\" matTooltipPosition=\\\"above\\\"\\r\\n                                    (click)=\\\"delete(item)\\\">\\r\\n                                <i class=\\\"fa fa-trash-o\\\"></i>\\r\\n                            </button>\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"default\\\"\\r\\n                                    matTooltip=\\\"Chi tiết\\\" matTooltipPosition=\\\"above\\\"\\r\\n                                    (click)=\\\"showDetail(item)\\\">\\r\\n                                <i class=\\\"fa fa-eye\\\"></i>\\r\\n                            </button>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                    </tbody>\\r\\n                </ng-template>\\r\\n            </table>\\r\\n        </div>\\r\\n\\r\\n        <ghm-paging [totalRows]=\\\"totalRows\\\" [currentPage]=\\\"currentPage\\\" [pageShow]=\\\"6\\\"\\r\\n                (pageClick)=\\\"search(1, searchType)\\\"\\r\\n                [isDisabled]=\\\"isSearching\\\" [pageName]=\\\"'đơn xin nghỉ'\\\"></ghm-paging>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<nh-modal #dayOffDetailModal size=\\\"lg\\\">\\r\\n    <nh-modal-header [showCloseButton]=\\\"true\\\">\\r\\n        <h4>\\r\\n            <i class=\\\"fa fa-check\\\"></i>\\r\\n            Chi tiết đơn xin nghỉ\\r\\n        </h4>\\r\\n    </nh-modal-header>\\r\\n    <nh-modal-content [isLoading]=\\\"isGettingDetail\\\">\\r\\n        <div class=\\\"form\\\">\\r\\n            <div class=\\\"form-horizontal form-bordered\\\">\\r\\n                <div class=\\\"form-body\\\">\\r\\n                    <div class=\\\"col-sm-12\\\">\\r\\n                        <div class=\\\"portlet light bordered\\\">\\r\\n                            <div class=\\\"portlet-title\\\">\\r\\n                                <div class=\\\"caption font-green-sharp\\\">\\r\\n                                    <i class=\\\"icon-share font-green-sharp\\\"></i>\\r\\n                                    <span class=\\\"caption-subject bold uppercase\\\"> Thông tin đơn xin nghỉ</span>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"portlet-body\\\">\\r\\n                                <div class=\\\"form-group\\\">\\r\\n                                    <label class=\\\"col-md-3 col-sm-4 control-label label-color\\\"\\r\\n                                           ghmLabel=\\\"Nhân viên\\\"></label>\\r\\n                                    <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                        {{dayOffDetail?.fullName}}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                <div class=\\\"form-group\\\">\\r\\n                                    <label class=\\\"col-md-3 col-sm-4 control-label label-color\\\"\\r\\n                                           ghmLabel=\\\"Từ ngày\\\" [required]=\\\"true\\\"></label>\\r\\n                                    <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                        {{dayOffDetail?.fromDate | dateTimeFormat:'DD/MM/YYYY':true}}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                <div class=\\\"form-group\\\">\\r\\n                                    <label class=\\\"col-md-3 col-sm-4 control-label label-color\\\"\\r\\n                                           ghmLabel=\\\"Đến ngày\\\" [required]=\\\"true\\\"></label>\\r\\n                                    <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                        {{dayOffDetail?.toDate | dateTimeFormat:'DD/MM/YYYY':true}}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                <div class=\\\"form-group\\\">\\r\\n                                    <label class=\\\"col-md-3 col-sm-4 control-label label-color\\\"\\r\\n                                           ghmLabel=\\\"Tổng số ngày\\\"></label>\\r\\n                                    <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                        <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                            {{dayOffDetail?.totalDays}}\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"form-group\\\">\\r\\n                                        <label class=\\\"col-md-3 col-sm-4 control-label label-color\\\"\\r\\n                                               ghmLabel=\\\"Tổng số ngày được duyệt\\\"></label>\\r\\n                                        <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                            {{dayOffDetail?.totalApprovedDays}}\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"form-group\\\">\\r\\n                                        <label class=\\\"col-md-3 col-sm-4 control-label label-color\\\"\\r\\n                                               ghmLabel=\\\"Trạng thái đơn\\\"></label>\\r\\n                                        <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                            <div class=\\\"bold\\\"\\r\\n                                                 [class.color-blue]=\\\"dayOffDetail?.status === DAYOFF_STATUS.WAIT_MANAGER_APPROVE || dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE\\\"\\r\\n                                                 [class.color-green]=\\\"dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE || dayOffDetail?.status=== DAYOFF_STATUS.APPROVER_APPROVE\\\"\\r\\n                                                 [class.color-red]=\\\"dayOffDetail?.status === DAYOFF_STATUS.MANAGER_DECLINE || dayOffDetail?.status === DAYOFF_STATUS.APPROVER_DECLINE\\\">\\r\\n                                                {{dayOffDetail?.statusText}}\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"form-group\\\">\\r\\n                                        <label class=\\\"col-md-3 col-sm-4 control-label label-color\\\"\\r\\n                                               ghmLabel=\\\"QLTT ghi chú\\\"></label>\\r\\n                                        <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                            <div\\r\\n                                                *ngIf=\\\"(searchType === 1 && (dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE\\r\\n                                            || dayOffDetail?.status === DAYOFF_STATUS.APPROVER_APPROVE\\r\\n                                            || dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE\\r\\n                                            || dayOffDetail?.status === DAYOFF_STATUS.MANAGER_DECLINE))\\r\\n                                            || ((searchType === 2 || searchType == 0) && dayOffDetail.managerNote)\\\"\\r\\n                                            >{{dayOffDetail?.managerNote}}\\r\\n                                            </div>\\r\\n                                            <textarea\\r\\n                                                *ngIf=\\\"searchType === 1 && (dayOffDetail?.status === DAYOFF_STATUS.WAIT_MANAGER_APPROVE\\r\\n                                            || dayOffDetail?.status === DAYOFF_STATUS.APPROVER_DECLINE)\\\"\\r\\n                                                name=\\\"managerNote\\\" class=\\\"form-control\\\" rows=\\\"3\\\"\\r\\n                                                placeholder=\\\"Nhập nội dung ghi chú\\\"\\r\\n                                                [(ngModel)]=\\\"dayOffDetail.managerNote\\\"\\r\\n                                            ></textarea>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"form-group\\\">\\r\\n                                        <label class=\\\"col-md-3 col-sm-4 control-label label-color\\\"\\r\\n                                               ghmLabel=\\\"QLPD ghi chú\\\"></label>\\r\\n                                        <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                            <div\\r\\n                                                *ngIf=\\\"dayOffDetail?.status === DAYOFF_STATUS.APPROVER_APPROVE\\r\\n                                            || dayOffDetail?.status === DAYOFF_STATUS.APPROVER_DECLINE\\\">\\r\\n                                                {{dayOffDetail?.approverNote}}\\r\\n                                            </div>\\r\\n                                            <textarea\\r\\n                                                *ngIf=\\\"searchType === 2 && dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE\\\"\\r\\n                                                name=\\\"approverNote\\\" class=\\\"form-control\\\" rows=\\\"3\\\"\\r\\n                                                placeholder=\\\"Nhập nội dung ghi chú\\\"\\r\\n                                                [(ngModel)]=\\\"dayOffDetail.approverNote\\\"\\r\\n                                            ></textarea>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"form-group\\\" *ngIf=\\\"dayOffDetail?.managerDeclineReason\\\">\\r\\n                                        <label class=\\\"col-md-3 col-sm-4 control-label label-color\\\"\\r\\n                                               ghmLabel=\\\"Lý do QLTT không duyệt\\\" [required]=\\\"true\\\"></label>\\r\\n                                        <div class=\\\"col-sm-8 col-md-9 color-red bold\\\">\\r\\n                                            <div class=\\\"bold\\\">{{dayOffDetail?.managerDeclineReason}}</div>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"form-group\\\" *ngIf=\\\"dayOffDetail?.approverDeclineReason\\\">\\r\\n                                        <label class=\\\"col-md-3 col-sm-4 control-label label-color\\\"\\r\\n                                               ghmLabel=\\\"Lý do QLPD không duyệt\\\" [required]=\\\"true\\\"></label>\\r\\n                                        <div class=\\\"col-sm-8 col-md-9 color-red bold\\\">\\r\\n                                            <div class=\\\"bold\\\">{{dayOffDetail?.approverDeclineReason}}</div>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"form-group\\\">\\r\\n                                        <label class=\\\"col-md-3 col-sm-4 control-label label-color\\\"\\r\\n                                               ghmLabel=\\\"Lý do xin nghỉ\\\" [required]=\\\"true\\\"></label>\\r\\n                                        <div class=\\\"col-sm-8 col-md-9\\\">\\r\\n                                            <div class=\\\"bold\\\">\\r\\n                                                {{dayOffDetail?.reason ? dayOffDetail?.reason : 'Không có lý do'}}\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-sm-12\\\">\\r\\n                            <div class=\\\"portlet light bordered\\\">\\r\\n                                <div class=\\\"portlet-title\\\">\\r\\n                                    <div class=\\\"caption font-green-sharp\\\">\\r\\n                                        <i class=\\\"icon-share font-green-sharp\\\"></i>\\r\\n                                        <span class=\\\"caption-subject bold uppercase\\\"> Chi tiết ca xin nghỉ</span>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"actions\\\"\\r\\n                                         *ngIf=\\\"\\r\\n                                        (currentUser?.id === dayOffDetail?.managerUserId && (dayOffDetail?.status === DAYOFF_STATUS.WAIT_MANAGER_APPROVE || dayOffDetail?.status === DAYOFF_STATUS.APPROVER_DECLINE))\\r\\n                                        || (currentUser?.id === dayOffDetail?.approverUserId && (dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE))\\r\\n                                    \\\">\\r\\n                                        <a href=\\\"javascript:;\\\" class=\\\"btn btn-circle btn-success btn-sm\\\"\\r\\n                                           (click)=\\\"approveAll(true)\\\"\\r\\n                                           [class.disabled]=\\\"isSaving\\\">\\r\\n                                            <i class=\\\"fa fa-check\\\"></i>\\r\\n                                            Duyệt tất cả </a>\\r\\n                                        <a href=\\\"javascript:;\\\" class=\\\"btn btn-circle btn-danger btn-sm\\\"\\r\\n                                           (click)=\\\"declineAll()\\\"\\r\\n                                           [class.disabled]=\\\"isSaving\\\">\\r\\n                                            <i class=\\\"fa fa-times\\\"></i> Không duyệt tất cả </a>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                <div class=\\\"portlet-body\\\">\\r\\n                                    <ul>\\r\\n                                        <li *ngFor=\\\"let item of listStats\\\">\\r\\n                                            {{item?.name}}: <b>{{item?.quantity}} Ngày</b>\\r\\n                                        </li>\\r\\n                                    </ul>\\r\\n                                    <div class=\\\"alert alert-warning\\\">\\r\\n                                        <div class=\\\"bold\\\">Lưu ý:</div>\\r\\n                                        <ul>\\r\\n                                            <li>Trường hợp không chọn mặc định sẽ là không duyệt.</li>\\r\\n                                            <li>Trong trường hợp không duyệt vui lòng nêu rõ lý\\r\\n                                                do vì sao không duyệt.\\r\\n                                            </li>\\r\\n                                        </ul>\\r\\n                                    </div>\\r\\n                                    <table class=\\\"table table-bordered table-striped table-hover table-main\\\">\\r\\n                                        <thead>\\r\\n                                        <tr>\\r\\n                                            <th class=\\\"center middle w70\\\">Ngày</th>\\r\\n                                            <th class=\\\"center middle w100\\\">Ca</th>\\r\\n                                            <th class=\\\"center middle\\\">Hình thức nghỉ</th>\\r\\n                                            <th class=\\\"center middle w150\\\">Trạng thái</th>\\r\\n                                            <th class=\\\"center middle w150\\\">Ghi chú</th>\\r\\n                                            <th class=\\\"center middle w150\\\">Lý do không duyệt</th>\\r\\n                                            <th class=\\\"center middle\\\"\\r\\n                                                *ngIf=\\\"currentUser?.id === dayOffDetail?.managerUserId || currentUser?.id === dayOffDetail?.approverUserId\\\">\\r\\n                                                Hành động\\r\\n                                            </th>\\r\\n                                        </tr>\\r\\n                                        </thead>\\r\\n                                        <tbody>\\r\\n                                        <ng-container *ngFor=\\\"let date of listDates\\\">\\r\\n                                            <tr *ngFor=\\\"let shift of date.shifts; let shiftIndex = index\\\">\\r\\n                                                <td class=\\\"center middle\\\" *ngIf=\\\"shiftIndex === 0\\\"\\r\\n                                                    [attr.rowspan]=\\\"date.shifts?.length\\\">\\r\\n                                                    <div class=\\\"bold\\\">{{date.dateText}}</div>\\r\\n                                                    <label for=\\\"\\\" class=\\\"label-color\\\">({{date.dateName}})</label>\\r\\n                                                </td>\\r\\n                                                <td class=\\\"center middle\\\">\\r\\n                                                    <div class=\\\"bold\\\">{{shift.reportName}}</div>\\r\\n                                                </td>\\r\\n                                                <td class=\\\"center middle w100 bold\\\">{{shift.methodName}}</td>\\r\\n                                                <td class=\\\"middle\\\">\\r\\n                                                    <div [class.color-green]=\\\"shift?.isManagerApprove\\\"\\r\\n                                                         [class.color-red]=\\\"shift?.isManagerApprove === false\\\">{{\\r\\n                                                        dayOffDetail?.status == dayOffDetail?.status ===\\r\\n                                                        DAYOFF_STATUS.WAIT_MANAGER_APPROVE ? 'Chờ QLTT duyệt' :\\r\\n                                                        shift?.isManagerApprove === true ? 'QLTT đã duyệt' :\\r\\n                                                        shift?.isManagerApprove === false ? 'QLTT không duyệt' : ''}}\\r\\n                                                    </div>\\r\\n                                                    <div [class.color-green]=\\\"shift?.isApproverApprove\\\"\\r\\n                                                         [class.color-red]=\\\"shift?.isApproverApprove === false\\\">{{\\r\\n                                                        dayOffDetail?.status == dayOffDetail?.status ===\\r\\n                                                        DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE\\r\\n                                                        ? 'QLTT đã duyệt chờ QLPD duyệt' :\\r\\n                                                        shift?.isApproverApprove === true ? 'QLPD đã duyệt' :\\r\\n                                                        shift?.isApproverApprove === false ? 'QLPD không duyệt' : ''}}\\r\\n                                                    </div>\\r\\n                                                </td>\\r\\n                                                <td class=\\\"w150\\\">\\r\\n                                                    <div *ngIf=\\\"shift.managerNote && (\\r\\n                                                    searchType === 0 || searchType === 2 || (\\r\\n                                                    searchType === 1 && shift.managerNote &&\\r\\n                                                    (dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE\\r\\n                                                    || dayOffDetail?.status === DAYOFF_STATUS.MANAGER_DECLINE\\r\\n                                                    || dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE)))\\\">\\r\\n                                                        QLTT:\\r\\n                                                        {{shift.managerNote}}\\r\\n                                                    </div>\\r\\n                                                    <div *ngIf=\\\"shift.approverNote && (\\r\\n                                                    searchType === 0 || searchType === 1 || (searchType === 2 && shift.approverNote &&\\r\\n                                                    (dayOffDetail?.status === DAYOFF_STATUS.APPROVER_APPROVE || dayOffDetail?.status === DAYOFF_STATUS.APPROVER_DECLINE)))\\\">\\r\\n                                                        QLPD:\\r\\n                                                        {{shift.approverNote}}\\r\\n                                                    </div>\\r\\n                                                    <ng-container *ngIf=\\\"shift.method !== DAYOFF_METHOD.WEEK_LEAVE\\r\\n                                                && shift.method\\r\\n                                                && shift.method !== DAYOFF_METHOD.HOLIDAY_LEAVE\\r\\n                                                && shift.method !== DAYOFF_METHOD.UNAUTHORIZED_LEAVE\\r\\n&& ((searchType === 1 && (dayOffDetail?.status === DAYOFF_STATUS.WAIT_MANAGER_APPROVE || dayOffDetail?.status === DAYOFF_STATUS.APPROVER_DECLINE))\\r\\n|| (searchType === 2 && (dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE)))\\\">\\r\\n                                                    <textarea\\r\\n                                                        *ngIf=\\\"searchType === 1 && (dayOffDetail?.status === DAYOFF_STATUS.WAIT_MANAGER_APPROVE\\r\\n                                                    || dayOffDetail?.status === DAYOFF_STATUS.APPROVER_DECLINE)\\\"\\r\\n                                                        [attr.name]=\\\"'manager-note' + shiftIndex\\\" class=\\\"form-control\\\"\\r\\n                                                        placeholder=\\\"Nhập nội dung ghi chú\\\"\\r\\n                                                        rows=\\\"3\\\" [(ngModel)]=\\\"shift.managerNote\\\"></textarea>\\r\\n                                                        <textarea\\r\\n                                                            *ngIf=\\\"searchType === 2 && dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE\\\"\\r\\n                                                            [attr.name]=\\\"'approver-note' + shiftIndex\\\"\\r\\n                                                            class=\\\"form-control\\\"\\r\\n                                                            placeholder=\\\"Nhập nội dung ghi chú\\\"\\r\\n                                                            rows=\\\"3\\\" [(ngModel)]=\\\"shift.approverNote\\\"></textarea>\\r\\n                                                    </ng-container>\\r\\n                                                </td>\\r\\n                                                <td class=\\\"w150 color-red\\\">\\r\\n                                                    <div *ngIf=\\\"shift.managerDeclineReason && (\\r\\n                                                    searchType === 0 || searchType === 2 || (\\r\\n                                                    searchType === 1 &&\\r\\n                                                    (dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE\\r\\n                                                    || dayOffDetail?.status === DAYOFF_STATUS.MANAGER_DECLINE\\r\\n                                                    || dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE)))\\\">\\r\\n                                                        QLTT:\\r\\n                                                        {{shift.managerDeclineReason}}\\r\\n                                                    </div>\\r\\n                                                    <div *ngIf=\\\"shift.approverDeclineReason && (\\r\\n                                                    searchType === 0 || searchType === 1 || (searchType === 2 &&\\r\\n                                                    (dayOffDetail?.status === DAYOFF_STATUS.APPROVER_APPROVE || dayOffDetail?.status === DAYOFF_STATUS.APPROVER_DECLINE)))\\\">\\r\\n                                                        QLPD:\\r\\n                                                        {{shift.approverDeclineReason}}\\r\\n                                                    </div>\\r\\n                                                    <ng-container *ngIf=\\\"shift.method !== DAYOFF_METHOD.WEEK_LEAVE\\r\\n                                                && shift.method\\r\\n                                                && shift.method !== DAYOFF_METHOD.HOLIDAY_LEAVE\\r\\n                                                && shift.method !== DAYOFF_METHOD.UNAUTHORIZED_LEAVE\\r\\n&& ((searchType === 1 && (dayOffDetail?.status === DAYOFF_STATUS.WAIT_MANAGER_APPROVE || dayOffDetail?.status === DAYOFF_STATUS.APPROVER_DECLINE))\\r\\n|| (searchType === 2 && (dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE)))\\\">\\r\\n                                                    <textarea\\r\\n                                                        *ngIf=\\\"searchType === 1 && (dayOffDetail?.status === DAYOFF_STATUS.WAIT_MANAGER_APPROVE\\r\\n                                                    || dayOffDetail?.status === DAYOFF_STATUS.APPROVER_DECLINE)\\\"\\r\\n                                                        [attr.name]=\\\"'manager-decline-reason-' + shiftIndex\\\"\\r\\n                                                        class=\\\"form-control\\\"\\r\\n                                                        [attr.id]=\\\"'manager-decline-reason-' + shiftIndex\\\"\\r\\n                                                        placeholder=\\\"Nhập nội dung ghi chú\\\"\\r\\n                                                        rows=\\\"3\\\" [(ngModel)]=\\\"shift.managerDeclineReason\\\"\\r\\n                                                        [readonly]=\\\"shift.isManagerApprove\\\"\\r\\n                                                    ></textarea>\\r\\n                                                        <textarea\\r\\n                                                            *ngIf=\\\"searchType === 2 && dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE\\\"\\r\\n                                                            [attr.name]=\\\"'approver-decline-reason' + shiftIndex\\\"\\r\\n                                                            [attr.id]=\\\"'approver-decline-reason-' + shiftIndex\\\"\\r\\n                                                            class=\\\"form-control\\\"\\r\\n                                                            placeholder=\\\"Nhập nội dung ghi chú\\\"\\r\\n                                                            [readonly]=\\\"shift.isApproverApprove\\\"\\r\\n                                                            rows=\\\"3\\\"\\r\\n                                                            [(ngModel)]=\\\"shift.approverDeclineReason\\\"></textarea>\\r\\n                                                    </ng-container>\\r\\n                                                </td>\\r\\n                                                <td class=\\\"center middle w100\\\"\\r\\n                                                    *ngIf=\\\"currentUser?.id === dayOffDetail?.managerUserId || currentUser?.id === dayOffDetail?.approverUserId\\\">\\r\\n                                                    <ng-container *ngIf=\\\"shift.method !== DAYOFF_METHOD.WEEK_LEAVE\\r\\n                                                && shift.method !== DAYOFF_METHOD.HOLIDAY_LEAVE\\r\\n                                                && shift.method !== DAYOFF_METHOD.UNAUTHORIZED_LEAVE\\r\\n&& ((searchType === 1 && (dayOffDetail?.status === DAYOFF_STATUS.WAIT_MANAGER_APPROVE || dayOffDetail?.status === DAYOFF_STATUS.APPROVER_DECLINE))\\r\\n|| (searchType === 2 && (dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE)))\\\">\\r\\n                                                        <button mat-mini-fab color=\\\"primary\\\"\\r\\n                                                                matTooltip=\\\"Duyệt\\\" matTooltipPosition=\\\"above\\\"\\r\\n                                                                *ngIf=\\\"\\r\\n                                                            ((searchType === 1 && (shift.isManagerApprove == null || shift.isManagerApprove === false))\\r\\n                                                            || (searchType === 2 && (shift.isApproverApprove === null || shift.isApproverApprove === false)))\\r\\n                                                            && (dayOffDetail?.status === DAYOFF_STATUS.WAIT_MANAGER_APPROVE\\r\\n                                                            || dayOffDetail?.status === DAYOFF_STATUS.MANAGER_DECLINE\\r\\n                                                            || dayOffDetail?.status === DAYOFF_STATUS.APPROVER_DECLINE)\\\"\\r\\n                                                                (click)=\\\"approve(shift, true, shiftIndex)\\\">\\r\\n                                                            <i class=\\\"fa fa-check\\\"></i>\\r\\n                                                        </button>\\r\\n                                                        <button mat-mini-fab color=\\\"warn\\\"\\r\\n                                                                matTooltip=\\\"Không duyệt\\\" matTooltipPosition=\\\"above\\\"\\r\\n                                                                *ngIf=\\\"\\r\\n                                                            ((searchType === 1 && (shift.isManagerApprove == null || shift.isManagerApprove === true))\\r\\n                                                            || (searchType === 2 && (shift.isApproverApprove === null || shift.isApproverApprove === true)))\\r\\n                                                            && dayOffDetail?.method !== DAYOFF_METHOD.WEEK_LEAVE\\r\\n&& dayOffDetail?.method !== DAYOFF_METHOD.HOLIDAY_LEAVE && dayOffDetail?.method !== DAYOFF_METHOD.UNAUTHORIZED_LEAVE\\\"\\r\\n                                                                (click)=\\\"approve(shift, false, shiftIndex)\\\">\\r\\n                                                            <i class=\\\"fa fa-times\\\"></i>\\r\\n                                                        </button>\\r\\n                                                    </ng-container>\\r\\n                                                </td>\\r\\n                                            </tr>\\r\\n                                        </ng-container>\\r\\n                                        </tbody>\\r\\n                                    </table><!-- END: table -->\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div><!-- END: .form-body -->\\r\\n                </div><!-- END: .form-horizontal -->\\r\\n            </div>\\r\\n        </div>\\r\\n    </nh-modal-content>\\r\\n    <nh-modal-footer>\\r\\n        <button type=\\\" button\\r\\n                            \\\" class=\\\"btn btn-default disabled\\\"\\r\\n                *ngIf=\\\"currentUser?.id === dayOffDetail?.managerUserId && dayOffDetail?.status ===\\r\\n                            DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE\\\">\\r\\n            <i class=\\\"icon-clock\\\"></i>\\r\\n            {{dayOffDetail?.statusText}}\\r\\n        </button>\\r\\n\\r\\n        <ng-container *ngIf=\\\"(currentUser?.id === dayOffDetail?.managerUserId || currentUser?.id === dayOffDetail?.approverUserId)\\r\\n            && ((dayOffDetail?.managerUserId === currentUser?.id && (dayOffDetail?.status === DAYOFF_STATUS.WAIT_MANAGER_APPROVE || dayOffDetail?.status === DAYOFF_STATUS.APPROVER_DECLINE))\\r\\n            || (dayOffDetail?.approverUserId == currentUser?.id && dayOffDetail?.status === DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE))\\\">\\r\\n            <button type=\\\"button\\\" mat-raised-button color=\\\"primary\\\" (click)=\\\"confirm()\\\">\\r\\n                <i class=\\\"fa fa-check\\\"></i>\\r\\n                {{(dayOffDetail?.status === DAYOFF_STATUS.WAIT_MANAGER_APPROVE || dayOffDetail?.status ===\\r\\n                DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE\\r\\n                ? 'Xác nhận' : 'Gửi lại')}}\\r\\n            </button>\\r\\n        </ng-container>\\r\\n        <button type=\\\"button\\\" nh-dismiss=\\\"true\\\" mat-raised-button>\\r\\n            <i class=\\\"fa fa-times\\\"></i>\\r\\n            Đóng lại\\r\\n        </button>\\r\\n    </nh-modal-footer>\\r\\n</nh-modal>\\r\\n\\r\\n<!-- TODO: Check this -->\\r\\n<!--<timekeeping-day-off-register-->\\r\\n    <!--(onSaveSuccess)=\\\"$event ? search(1) : search(currentPage)\\\"-->\\r\\n<!--&gt;</timekeeping-day-off-register>-->\\r\\n\"","/**\r\n * Created by HoangIT21 on 7/22/2017.\r\n */\r\nimport {\r\n    AfterViewInit, Component, Inject, OnInit,\r\n    ViewChild\r\n} from '@angular/core';\r\nimport { Location, LocationStrategy, PathLocationStrategy } from '@angular/common';\r\nimport * as moment from 'moment';\r\nimport * as _ from 'lodash';\r\nimport { BaseComponent } from '../../../base.component';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { IAppConfig } from '../../../interfaces/iapp-config';\r\nimport { Title } from '@angular/platform-browser';\r\nimport swal from 'sweetalert2';\r\nimport { TimekeepingDayOffRegisterComponent } from './timekeeping-day-off-register.component';\r\nimport { IActionResultResponse } from '../../../interfaces/iaction-result-response.result';\r\nimport { DestroySubscribers } from '../../../shareds/decorator/destroy-subscribes.decorator';\r\nimport { NhModalComponent } from '../../../shareds/components/nh-modal/nh-modal.component';\r\nimport { DayOff, DayOffDate, IDateDisplay, IDayOffShiftDisplay } from './day-off.model';\r\nimport { APP_CONFIG } from '../../../configs/app.config';\r\nimport { IPageId, PAGE_ID } from '../../../configs/page-id.config';\r\nimport { AppService } from '../../../shareds/services/app.service';\r\nimport { TimekeepingWorkScheduleService } from '../config/work-schedule/timekeeping-work-schedule.service';\r\nimport { TimekeepingDayOffService } from './timekeeping-dayoff.service';\r\nimport { UtilService } from '../../../shareds/services/util.service';\r\nimport { FilterLink } from '../../../shareds/models/filter-link.model';\r\nimport { finalize } from 'rxjs/internal/operators';\r\nimport { CheckPermission } from '../../../shareds/decorator/check-permission.decorator';\r\n\r\n@Component({\r\n    selector: 'app-timekeeping-day-off',\r\n    templateUrl: './timekeeping-day-off.component.html',\r\n    providers: [Location, {provide: LocationStrategy, useClass: PathLocationStrategy}]\r\n})\r\n\r\n@DestroySubscribers()\r\n@CheckPermission()\r\nexport class TimekeepingDayOffComponent extends BaseComponent implements OnInit, AfterViewInit {\r\n    @ViewChild('dayOffDetailModal') detailModal: NhModalComponent;\r\n    @ViewChild(TimekeepingDayOffRegisterComponent) dayOffRegisterComponent: TimekeepingDayOffRegisterComponent;\r\n    listDayOff: DayOff[] = [];\r\n    dayOffDetail: DayOff = new DayOff();\r\n    fromDateSearch: string;\r\n    toDateSearch: string;\r\n    searchType: number;\r\n    statusSearch: number;\r\n    isGettingDetail = false;\r\n    listDates: IDateDisplay[] = [];\r\n    listShifts = [];\r\n    totalDates = 0;\r\n    isApprove = false;\r\n    listStats = [];\r\n\r\n    // Stats\r\n    totalAnnualLeave;\r\n    totalUnpaidLeave;\r\n    totalInsuranceLeave;\r\n    totalCompensatory;\r\n    totalEntitlement;\r\n\r\n    DAYOFF_STATUS = {\r\n        WAIT_MANAGER_APPROVE: 0,\r\n        MANAGER_APPROVE: 1,\r\n        MANAGER_APPROVE_WAIT_APPROVER_APPROVE: 2,\r\n        MANAGER_DECLINE: 3,\r\n        APPROVER_APPROVE: 4,\r\n        APPROVER_DECLINE: 5,\r\n        CANCEL: 6\r\n    };\r\n\r\n    MOMENT_DAY_OF_WEEK = {\r\n        SUNDAY: 0,\r\n        MONDAY: 1,\r\n        TUESDAY: 2,\r\n        WEDNESDAY: 3,\r\n        THURSDAY: 4,\r\n        FRIDAY: 5,\r\n        SATURDAY: 6\r\n    };\r\n\r\n    DAYOFF_METHOD = {\r\n        ANNUAL_LEAVE: 0, // Nghỉ phép\r\n        UNPAID_LEAVE: 1, // Nghỉ không lương\r\n        COMPENSATORY_LEAVE: 2, // Nghỉ bù\r\n        INSURANCE_LEAVE: 3, // Nghỉ bảo hiểm\r\n        ENTITLEMENT_LEAVE: 4, // Nghỉ chế độ\r\n        WEEK_LEAVE: 5, // Nghỉ tuần\r\n        HOLIDAY_LEAVE: 6, // Nghỉ lễ\r\n        UNAUTHORIZED_LEAVE: 7, // Nghỉ không phép\r\n    };\r\n\r\n    constructor(@Inject(APP_CONFIG) appConfig: IAppConfig,\r\n                @Inject(PAGE_ID) pageId: IPageId,\r\n                private location: Location,\r\n                private title: Title,\r\n                private route: ActivatedRoute,\r\n                private toastr: ToastrService,\r\n                private appService: AppService,\r\n                private workScheduleService: TimekeepingWorkScheduleService,\r\n                private dayOffService: TimekeepingDayOffService,\r\n                private utilService: UtilService) {\r\n        super();\r\n        this.title.setTitle('Duyệt đăng ký nghỉ.');\r\n        // this.currentUser = this.appService.currentUser;\r\n        this.appService.setupPage(pageId.HR, pageId.TIMEKEEPING_DAY_OFF_APPROVE, 'Chấm công', 'Đăng ký nghỉ');\r\n        // this.getPermission(this.appService);\r\n\r\n        this.subscribers.queryParams = this.route.queryParams.subscribe(params => {\r\n            this.keyword = params.keyword ? params.keyword : '';\r\n            this.statusSearch = params.status ? params.status : '';\r\n            this.fromDateSearch = params.fromDate ? params.fromDate : '';\r\n            this.toDateSearch = params.toDate ? params.toDate : '';\r\n            this.searchType = params.type != null && params.type !== undefined ? params.type : 0;\r\n            this.currentPage = params.page ? params.page : 1;\r\n            this.pageSize = params.pageSize ? params.pageSize : appConfig.pageSize;\r\n        });\r\n\r\n        this.workScheduleService.getMyWorkSchedule()\r\n            .pipe(finalize(() => this.isSearching = false))\r\n            .subscribe((result: any) => {\r\n                this.listShifts = result.shifts;\r\n            });\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.subscribers.routeData = this.route.data.subscribe((result: { data: any }) => {\r\n            const data = result.data;\r\n            if (data) {\r\n                this.renderListRegister(data);\r\n            }\r\n        });\r\n\r\n        this.subscribers.queryParams = this.route.queryParams.subscribe(params => {\r\n            if (params.type) {\r\n                this.searchType = parseInt(params.type);\r\n            }\r\n\r\n            if (params.showRegister) {\r\n                setTimeout(() => {\r\n                    this.isUpdate = false;\r\n                    this.dayOffRegisterComponent.showModal();\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.route.queryParams.forEach(params => {\r\n            const id = params.id;\r\n            const role = params.role;\r\n\r\n            // setTimeout(() => {\r\n            if (role === 'user') {\r\n                this.searchType = 0;\r\n            }\r\n\r\n            if (role === 'manager') {\r\n                this.searchType = 1;\r\n            }\r\n\r\n            if (role === 'approver') {\r\n                this.searchType = 2;\r\n            }\r\n            // }, 500);\r\n\r\n            if (id) {\r\n                setTimeout(() => {\r\n                    this.detailModal.show();\r\n                    this.isGettingDetail = true;\r\n                    this.dayOffService.getDetail(id)\r\n                        .pipe(finalize(() => this.isGettingDetail = false))\r\n                        .subscribe(dayOffRegister => {\r\n                            this.showDetail(dayOffRegister);\r\n                        });\r\n                }, 100);\r\n            }\r\n        });\r\n    }\r\n\r\n    delete(dayOff: DayOff) {\r\n        // swal({\r\n        //     title: '',\r\n        //     text: `Bạn có chắc chắn muốn xoá đăng ký xin nghỉ này?`,\r\n        //     type: 'warning',\r\n        //     showCancelButton: true,\r\n        //     confirmButtonColor: '#DD6B55',\r\n        //     confirmButtonText: 'Đồng ý',\r\n        //     cancelButtonText: 'Hủy bỏ'\r\n        // }).then(() => {\r\n        //     console.log(dayOff.id);\r\n        //     this.dayOffService.delete(dayOff.id)\r\n        //         .subscribe((result: IActionResultResponse) => {\r\n        //             this.toastr.success(result.message);\r\n        //             this.search(this.currentPage, this.searchType);\r\n        //         });\r\n        // }, () => {\r\n        // });\r\n    }\r\n\r\n\r\n    approve(shift: IDayOffShiftDisplay, isApprove: boolean, shiftIndex?: number) {\r\n        if (isApprove) {\r\n            if (this.searchType === 1) {\r\n                shift.isManagerApprove = isApprove;\r\n                shift.managerDeclineReason = '';\r\n            }\r\n            if (this.searchType === 2) {\r\n                shift.isApproverApprove = isApprove;\r\n                shift.approverDeclineReason = '';\r\n            }\r\n        } else {\r\n            if (this.searchType === 1) {\r\n                shift.isManagerApprove = false;\r\n            } else if (this.searchType === 2) {\r\n                shift.isApproverApprove = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    approveAll(isApprove: boolean) {\r\n        this.isApprove = isApprove;\r\n        const note = this.searchType === 1 ? this.dayOffDetail.managerNote : this.dayOffDetail.approverNote;\r\n        const declineReason = this.searchType === 1 ? this.dayOffDetail.managerDeclineReason : this.dayOffDetail.approverDeclineReason;\r\n        this.isSaving = true;\r\n        this.dayOffService.approveAll(this.dayOffDetail.id, this.isApprove, note, declineReason)\r\n            .pipe(finalize(() => this.isSaving = false))\r\n            .subscribe((result: IActionResultResponse<any>) => {\r\n                this.toastr.success(result.message);\r\n                this.dayOffDetail.status = result.data.status;\r\n                this.dayOffDetail.statusText = this.getStatusText(this.dayOffDetail.status);\r\n            });\r\n    }\r\n\r\n    declineAll() {\r\n        this.isApprove = false;\r\n        // swal({\r\n        //     title: '',\r\n        //     text: `Bạn có chắc chắn muốn không duyệt cho tất cả các ngày đăng ký xin nghỉ của nhân viên \"${this.dayOffDetail.fullName}\"`,\r\n        //     type: 'warning',\r\n        //     showCancelButton: true,\r\n        //     confirmButtonColor: '#DD6B55',\r\n        //     confirmButtonText: 'Đồng ý',\r\n        //     cancelButtonText: 'Hủy bỏ'\r\n        // }).then(() => {\r\n        //     swal({\r\n        //         input: 'textarea',\r\n        //         inputPlaceholder: 'Vui lòng nhập lý do không duyệt.',\r\n        //         showCancelButton: true,\r\n        //         confirmButtonColor: '#DD6B55',\r\n        //         confirmButtonText: 'Đồng ý',\r\n        //         cancelButtonText: 'Hủy bỏ'\r\n        //     }).then((text) => {\r\n        //         if (text) {\r\n        //             if (this.searchType === 1) {\r\n        //                 this.dayOffDetail.managerDeclineReason = text;\r\n        //             }\r\n        //             if (this.searchType === 2) {\r\n        //                 this.dayOffDetail.approverDeclineReason = text;\r\n        //             }\r\n        //             this.approveAll(false);\r\n        //         }\r\n        //     }, () => {\r\n        //     });\r\n        // }, () => {\r\n        // });\r\n    }\r\n\r\n    confirm() {\r\n        const dayOffApprove = {\r\n            id: this.dayOffDetail.id,\r\n            type: this.searchType,\r\n            isApprove: this.isApprove,\r\n            managerNote: this.dayOffDetail.managerNote,\r\n            approverNote: this.dayOffDetail.approverNote,\r\n            managerDeclineReason: this.dayOffDetail.managerDeclineReason,\r\n            approverDeclineReason: this.dayOffDetail.approverDeclineReason,\r\n            dates: this.convertListDatesDisplayToListDates()\r\n        };\r\n        const promise = Object.keys(dayOffApprove.dates).map((key, index) => {\r\n            return new Promise((resolve, reject) => {\r\n                const date = dayOffApprove.dates[key];\r\n                if (date.method === this.DAYOFF_METHOD.WEEK_LEAVE || date.method === this.DAYOFF_METHOD.UNAUTHORIZED_LEAVE\r\n                    || date.method === this.DAYOFF_METHOD.HOLIDAY_LEAVE || !date.method) {\r\n                    resolve(true);\r\n                } else if (dayOffApprove.type === 1 && !date.isManagerApprove && !date.managerDeclineReason) {\r\n                    resolve(false);\r\n                } else if (dayOffApprove.type === 2 && !date.isApproverApprove && !date.approverDeclineReason) {\r\n                    resolve(false);\r\n                } else {\r\n                    resolve(true);\r\n                }\r\n            });\r\n        });\r\n        return Promise.all(promise).then(values => {\r\n            const failCount = _.countBy(values, value => {\r\n                return !value;\r\n            }).true;\r\n            if (failCount >= 0) {\r\n                this.toastr.error('Vui lòng nhập lý do không duyệt.');\r\n                return;\r\n            }\r\n            this.dayOffService.confirm(dayOffApprove)\r\n                .subscribe((result: IActionResultResponse<any>) => {\r\n                    this.toastr.success(result.message);\r\n                    this.dayOffDetail.status = result.data.status;\r\n                    this.dayOffDetail.statusText = this.getStatusText(this.dayOffDetail.status);\r\n                    this.dayOffDetail.totalApprovedDays = result.data.totalApprovedDays;\r\n                });\r\n        });\r\n    }\r\n\r\n    showRegisterModal() {\r\n        this.dayOffRegisterComponent.isUpdate = false;\r\n        this.dayOffRegisterComponent.formModel.reset(new DayOff());\r\n        this.dayOffRegisterComponent.listDates = [];\r\n        this.dayOffRegisterComponent.showModal();\r\n    }\r\n\r\n    showDetail(dayOffDetail: DayOff) {\r\n        this.dayOffDetail = dayOffDetail;\r\n        this.dayOffDetail.statusText = this.getStatusText(this.dayOffDetail.status);\r\n        this.renderListDates(this.dayOffDetail.dates);\r\n        this.renderDetailLink();\r\n        this.detailModal.show();\r\n        this.calculateStats();\r\n    }\r\n\r\n    onSelectFromDate(date) {\r\n        this.fromDateSearch = date.currentValue;\r\n        this.search(1);\r\n    }\r\n\r\n    onSelectToDate(date) {\r\n        this.toDateSearch = date.currentValue;\r\n        this.search(1);\r\n    }\r\n\r\n    onSelectStatus(status) {\r\n        this.statusSearch = status.id;\r\n        this.search(1);\r\n    }\r\n\r\n    search(currentPage: number, searchType?: number) {\r\n        this.currentPage = currentPage;\r\n        this.searchType = searchType != null && searchType !== undefined ? searchType : this.searchType;\r\n        this.renderFilterLink();\r\n        this.isSearching = true;\r\n        this.dayOffService.searchDayOff(this.keyword, this.searchType, this.fromDateSearch, this.toDateSearch, this.statusSearch,\r\n            this.currentPage, this.pageSize)\r\n            .pipe(finalize(() => this.isSearching = false))\r\n            .subscribe(result => {\r\n                this.renderListRegister(result);\r\n            });\r\n    }\r\n\r\n    // itemApprove(dayOffRegister: DayOff, isApprove: boolean) {\r\n    //     if (!isApprove) {\r\n    //         swal({\r\n    //             title: '',\r\n    //             text: `Bạn có chắc chắn không duyệt cho đơn xin nghỉ của: \"${dayOffRegister.fullName}\"`,\r\n    //             type: 'warning',\r\n    //             showCancelButton: true,\r\n    //             confirmButtonColor: '#DD6B55',\r\n    //             confirmButtonText: 'Đồng ý',\r\n    //             cancelButtonText: 'Hủy bỏ'\r\n    //         }).then(() => {\r\n    //             swal({\r\n    //                 input: 'textarea',\r\n    //                 inputPlaceholder: 'Vui lòng nhập lý do không duyệt.',\r\n    //                 showCancelButton: true,\r\n    //                 confirmButtonColor: '#DD6B55',\r\n    //                 confirmButtonText: 'Gửi',\r\n    //                 cancelButtonText: 'Hủy bỏ'\r\n    //             }).then((text) => {\r\n    //                 if (text) {\r\n    //                     this.updateApproveStatus(dayOffRegister, isApprove, text);\r\n    //                 }\r\n    //             }, () => {\r\n    //             });\r\n    //         }, () => {\r\n    //         });\r\n    //     } else {\r\n    //         this.updateApproveStatus(dayOffRegister, isApprove);\r\n    //     }\r\n    // }\r\n\r\n    // approve(isApprove: boolean) {\r\n    //     this.isSaving = true;\r\n    //     this.dayOffService.approve(this.dayOffDetail.id, isApprove)\r\n    //         .finally(() => this.isSaving = false)\r\n    //         .subscribe(result => {\r\n    //             this.toastr.success('Cập nhật trạng thái thành công.');\r\n    //             this.search(1, this.searchType);\r\n    //             this.detailModal.dismiss();\r\n    //             this.dayOffDetail = null;\r\n    //         }, error => this.toastr.error(error.message));\r\n    // }\r\n\r\n    cancel(dayOffRegister: DayOff) {\r\n        swal({\r\n            title: '',\r\n            text: `Bạn có chắc chắn muốn xóa bản đăng ký nghỉ này?`,\r\n            type: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonText: 'Đồng ý',\r\n            cancelButtonText: 'Hủy bỏ'\r\n        }).then(() => {\r\n            this.dayOffService.cancel(dayOffRegister.id)\r\n                .subscribe(() => {\r\n                    this.toastr.success('Hủy đăng ký thành công.');\r\n                });\r\n\r\n            dayOffRegister.status = this.DAYOFF_STATUS.CANCEL;\r\n            dayOffRegister.statusText = this.getStatusText(dayOffRegister.status);\r\n        }, () => {\r\n        });\r\n    }\r\n\r\n    edit(dayOffRegister: DayOff) {\r\n        this.dayOffRegisterComponent.setUpdate(dayOffRegister);\r\n    }\r\n\r\n    private renderListRegister(result: any) {\r\n        this.totalRows = result.totalRows;\r\n        result.items.forEach(item => {\r\n            item.statusText = this.getStatusText(item.status);\r\n            item.dates.forEach(date => {\r\n                date.dateText = `${moment(date.day).date()}/${moment(date.day).month()}`;\r\n                date.statusText = this.getStatusText(date.status);\r\n                date.methodName = this.getMethodShortName(date.method);\r\n            });\r\n        });\r\n        this.listDayOff = result.items;\r\n    }\r\n\r\n    private getMethodShortName(method: number) {\r\n        switch (method) {\r\n            case 0:\r\n                return 'NP';\r\n            case 1:\r\n                return 'NKL';\r\n            case 2:\r\n                return 'NB';\r\n            case 3:\r\n                return 'NBH';\r\n            case 4:\r\n                return 'NCĐ';\r\n            case 5:\r\n                return 'NT';\r\n            default:\r\n                return 'Đi làm';\r\n        }\r\n    }\r\n\r\n    private getStatusText(status: number) {\r\n        switch (status) {\r\n            case this.DAYOFF_STATUS.WAIT_MANAGER_APPROVE:\r\n                return 'Chờ QLTT duyệt';\r\n            case this.DAYOFF_STATUS.MANAGER_APPROVE:\r\n                return 'QLTT đã duyệt';\r\n            case this.DAYOFF_STATUS.MANAGER_APPROVE_WAIT_APPROVER_APPROVE:\r\n                return 'QLTT duyệt chờ QLPD duyệt';\r\n            case this.DAYOFF_STATUS.MANAGER_DECLINE:\r\n                return 'QLTT không duyệt';\r\n            case this.DAYOFF_STATUS.APPROVER_APPROVE:\r\n                return 'QLPD đã duyệt';\r\n            case this.DAYOFF_STATUS.APPROVER_DECLINE:\r\n                return 'QLPD không duyệt';\r\n            case this.DAYOFF_STATUS.CANCEL:\r\n                return 'Đã hủy đăng ký';\r\n        }\r\n    }\r\n\r\n    private getDayName(dayOfWeek: number) {\r\n        return dayOfWeek === this.MOMENT_DAY_OF_WEEK.SUNDAY ? 'CN' : 'Thứ ' + (dayOfWeek + 1);\r\n    }\r\n\r\n    private renderListDates(dates: DayOffDate[]): void {\r\n        this.totalDates = _.countBy(dates, (date: DayOffDate) => {\r\n            return date.method === this.DAYOFF_METHOD.ANNUAL_LEAVE || this.DAYOFF_METHOD.COMPENSATORY_LEAVE ||\r\n                this.DAYOFF_METHOD.ENTITLEMENT_LEAVE || this.DAYOFF_METHOD.INSURANCE_LEAVE || this.DAYOFF_METHOD.UNPAID_LEAVE;\r\n        }).true;\r\n        const groupDates = _.groupBy(dates, (date: DayOffDate) => {\r\n            return date.date;\r\n        });\r\n        if (groupDates) {\r\n            const datesGroupArray = [];\r\n            for (const key in groupDates) {\r\n                if (groupDates.hasOwnProperty(key)) {\r\n                    const firstDate = groupDates[key][0];\r\n                    const date = moment(firstDate.date, this.appService.momentDateTimeLocalFormat[this.appService.locale].shortDate);\r\n                    const newDate = {\r\n                        date: firstDate.date,\r\n                        dateText: `${date.date()}/${date.month() + 1}`,\r\n                        dateName: this.getDayName(date.day()),\r\n                        shifts: []\r\n                    };\r\n                    _.each(groupDates[key], (groupDate: DayOffDate) => {\r\n                        newDate.shifts.push({\r\n                            id: groupDate.shiftId,\r\n                            code: groupDate.shiftCode,\r\n                            reportName: groupDate.shiftReportName,\r\n                            method: groupDate.method,\r\n                            methodName: this.getMethodShortName(groupDate.method),\r\n                            workUnit: groupDate.shiftWorkUnit,\r\n                            isShowDay: groupDate.isShowDay,\r\n                            isHoliday: groupDate.isHoliday,\r\n                            value: groupDate.value,\r\n                            workingDaysValue: groupDate.shiftWorkingDaysValue,\r\n                            isManagerApprove: groupDate.isManagerApprove,\r\n                            isApproverApprove: groupDate.isApproverApprove,\r\n                            managerNote: groupDate.managerNote,\r\n                            approverNote: groupDate.approverNote,\r\n                            managerDeclineReason: groupDate.managerDeclineReason,\r\n                            approverDeclineReason: groupDate.approverDeclineReason\r\n                        } as IDayOffShiftDisplay);\r\n                    });\r\n                    datesGroupArray.push(newDate);\r\n                }\r\n            }\r\n            this.listDates = datesGroupArray;\r\n        }\r\n    }\r\n\r\n    private renderDetailLink() {\r\n        const path = '/timekeeping/day-off';\r\n        const query = this.utilService.renderLocationFilter([\r\n            new FilterLink('id', this.dayOffDetail.id),\r\n            new FilterLink('type', this.searchType),\r\n        ]);\r\n        this.location.go(path, query);\r\n    }\r\n\r\n    private renderFilterLink() {\r\n        const path = '/timekeeping/day-off';\r\n        const query = this.utilService.renderLocationFilter([\r\n            new FilterLink('keyword', this.keyword),\r\n            new FilterLink('status', this.statusSearch),\r\n            new FilterLink('fromDate', this.fromDateSearch),\r\n            new FilterLink('toDate', this.toDateSearch),\r\n            new FilterLink('type', this.searchType),\r\n            new FilterLink('page', this.currentPage),\r\n            new FilterLink('pageSize', this.pageSize)\r\n        ]);\r\n        // this.appService.updateTabItem(`${path}?${query}`);\r\n        this.location.go(path, query);\r\n    }\r\n\r\n    private convertListDatesDisplayToListDates(): DayOffDate[] {\r\n        const listDayOff: DayOffDate[] = [];\r\n        _.each(this.listDates, (date: IDateDisplay) => {\r\n            _.each(date.shifts, (shift: IDayOffShiftDisplay) => {\r\n                const dayOff = new DayOffDate();\r\n                dayOff.date = date.date;\r\n                dayOff.dateText = date.dateText;\r\n                dayOff.dateName = date.dateName;\r\n                dayOff.value = shift.value;\r\n                dayOff.shiftWorkUnit = shift.workUnit;\r\n                dayOff.shiftId = shift.id;\r\n                dayOff.shiftWorkUnit = shift.workUnit;\r\n                dayOff.shiftReportName = shift.reportName;\r\n                dayOff.shiftCode = shift.code;\r\n                dayOff.shiftWorkingDaysValue = shift.workingDaysValue;\r\n                dayOff.method = shift.method;\r\n                dayOff.isManagerApprove = shift.isManagerApprove;\r\n                dayOff.isApproverApprove = shift.isApproverApprove;\r\n                dayOff.managerNote = shift.managerNote;\r\n                dayOff.approverNote = shift.approverNote;\r\n                dayOff.managerDeclineReason = shift.managerDeclineReason;\r\n                dayOff.approverDeclineReason = shift.approverDeclineReason;\r\n                listDayOff.push(dayOff);\r\n            });\r\n        });\r\n        return listDayOff;\r\n    }\r\n\r\n    // Hàm này cấn check theo số ngày điều chuyển lên cấp trên được cấu hình theo config. Hiện tại\r\n    // Fix tĩnh <= 3 ngày không gửi, lớn hơn 3 ngày sẽ gửi lên.\r\n    private updateAllApproveStatus(isApprove: boolean) {\r\n        _.each(this.listDates, (dates: IDateDisplay) => {\r\n            _.each(dates.shifts, (shift: IDayOffShiftDisplay) => {\r\n                if (this.searchType === 1) {\r\n                    shift.isManagerApprove = isApprove;\r\n                    shift.managerDeclineReason = '';\r\n                }\r\n\r\n                if (this.searchType === 2) {\r\n                    shift.isApproverApprove = isApprove;\r\n                    shift.approverDeclineReason = '';\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    private calculateStats() {\r\n        this.totalAnnualLeave = 0;\r\n        this.totalUnpaidLeave = 0;\r\n        this.totalInsuranceLeave = 0;\r\n        this.totalCompensatory = 0;\r\n        this.totalEntitlement = 0;\r\n\r\n        _.each(this.listDates, (date: any) => {\r\n            _.each(date.shifts, (shift: any) => {\r\n                this.totalAnnualLeave += shift.method === this.DAYOFF_METHOD.ANNUAL_LEAVE\r\n                && (shift.workingDaysValue & shift.value) === shift.value && !shift.isHoliday\r\n                    ? shift.workUnit : 0;\r\n\r\n                this.totalUnpaidLeave += shift.method === this.DAYOFF_METHOD.UNPAID_LEAVE\r\n                && (shift.workingDaysValue & shift.value) === shift.value && !shift.isHoliday\r\n                    ? shift.workUnit : 0;\r\n\r\n                this.totalInsuranceLeave += shift.method === this.DAYOFF_METHOD.INSURANCE_LEAVE\r\n                && (shift.workingDaysValue & shift.value) === shift.value && !shift.isHoliday\r\n                    ? shift.workUnit : 0;\r\n\r\n                this.totalCompensatory += shift.method === this.DAYOFF_METHOD.COMPENSATORY_LEAVE\r\n                && (shift.workingDaysValue & shift.value) === shift.value && !shift.isHoliday\r\n                    ? shift.workUnit : 0;\r\n\r\n                this.totalEntitlement += shift.method === this.DAYOFF_METHOD.ENTITLEMENT_LEAVE\r\n                && (shift.workingDaysValue & shift.value) === shift.value && !shift.isHoliday\r\n                    ? shift.workUnit : 0;\r\n            });\r\n        });\r\n\r\n        this.listStats = [\r\n            {name: 'Nghỉ phép', quantity: this.totalAnnualLeave},\r\n            {name: 'Nghỉ không lương', quantity: this.totalUnpaidLeave},\r\n            {name: 'Nghỉ bảo hiểm', quantity: this.totalInsuranceLeave},\r\n            {name: 'Nghỉ bù', quantity: this.totalCompensatory},\r\n            {name: 'Nghỉ chế độ', quantity: this.totalEntitlement}\r\n        ];\r\n    }\r\n}\r\n","/**\r\n * Created by HoangIT21 on 7/22/2017.\r\n */\r\nimport { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Resolve } from '@angular/router';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { DayOff, IDayOffConfirm } from './day-off.model';\r\n\r\n@Injectable()\r\nexport class TimekeepingDayOffService implements Resolve<any> {\r\n    url = 'timekeeping-day-off/';\r\n\r\n    constructor(private http: HttpClient) {\r\n\r\n    }\r\n\r\n    resolve(route: ActivatedRouteSnapshot, state: Object) {\r\n        const queryParams = route.queryParams;\r\n        const keyword = queryParams.keyword ? queryParams.keyword : '';\r\n        const fromDate = queryParams.fromDate ? queryParams.fromDate : '';\r\n        const toDate = queryParams.toDate ? queryParams.toDate : '';\r\n        const status = queryParams.status ? queryParams.status : '';\r\n        const type = queryParams.type != null && queryParams.type !== undefined ? queryParams.type : 0;\r\n        const page = queryParams.page ? queryParams.page : 1;\r\n        const pageSize = queryParams.pageSize ? queryParams.pageSize : 20;\r\n\r\n        return this.searchDayOff(keyword, type, fromDate, toDate, status, page, pageSize);\r\n    }\r\n\r\n    save(dayOff: DayOff) {\r\n        return this.http.post(`${this.url}register`, dayOff);\r\n    }\r\n\r\n    approve(dayOffApprove: any) {\r\n        return this.http.post(`${this.url}approve`, dayOffApprove);\r\n    }\r\n\r\n    approveAll(id: string, isApprove: boolean, note?: string, reason?: string) {\r\n        return this.http.post(`${this.url}approve-all`, {\r\n            id: id,\r\n            isApprove: isApprove,\r\n            note: note,\r\n            reason: reason\r\n        });\r\n    }\r\n\r\n    searchDayOff(keyword: string, type: number, fromDate: string, toDate: string, status: number, page: number, pageSize) {\r\n        return this.http.get(`${this.url}search`, {\r\n            params: new HttpParams().set('keyword', keyword)\r\n                .set('fromDate', fromDate)\r\n                .set('toDate', toDate)\r\n                .set('status', status != null && status !== undefined ? status.toString() : '')\r\n                .set('type', type != null && type !== undefined ? type.toString() : '')\r\n                .set('page', page.toString())\r\n                .set('pageSize', pageSize.toString())\r\n        });\r\n    }\r\n\r\n    getMyWorkSchedule() {\r\n        return this.http.get(`${this.url}get-my-work-schedule`);\r\n    }\r\n\r\n    insert(dayOffRegister) {\r\n        return this.http.post(`${this.url}register`, dayOffRegister);\r\n    }\r\n\r\n    update(dayOffRegister) {\r\n        return this.http.post(`${this.url}update`, dayOffRegister);\r\n    }\r\n\r\n    cancel(id: string) {\r\n        return this.http.post(`${this.url}cancel`, '', {\r\n            params: new HttpParams().set('id', id)\r\n        });\r\n    }\r\n\r\n    getDetail(id: string) {\r\n        return this.http.get<DayOff>(`${this.url}get-detail`, {\r\n            params: new HttpParams().set('id', id)\r\n        });\r\n    }\r\n\r\n\r\n    confirm(dayOffConfirm: IDayOffConfirm) {\r\n        return this.http.post(`${this.url}approve`, dayOffConfirm);\r\n    }\r\n\r\n    delete(id: string) {\r\n        return this.http.delete(`${this.url}delete`, {\r\n            params: new HttpParams().set('id', id)\r\n        });\r\n    }\r\n}\r\n","export class ForgotCheckIn {\r\n    id: string;\r\n    registerDate: string;\r\n    userId: string;\r\n    fullName: string;\r\n    officeId: number;\r\n    officeName: string;\r\n    officeIdPath: string;\r\n    titleId: number;\r\n    titleName: string;\r\n    note?: string;\r\n    createTime: string;\r\n    isApprove: boolean;\r\n    status: number;\r\n    statusText: string;\r\n    managerUserId: number;\r\n    declineReason: string;\r\n    shiftId: string;\r\n    shiftReportName: string;\r\n    isCheckIn: boolean;\r\n\r\n    constructor() {\r\n        this.isCheckIn = true;\r\n    }\r\n}\r\n","module.exports = \"<div class=\\\"row cm-mgb-10\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <div class=\\\"btn-group\\\" role=\\\"group\\\">\\r\\n            <button type=\\\"button\\\" class=\\\"btn btn-default\\\" [class.active]=\\\"type === 0\\\" (click)=\\\"changeType(0)\\\">\\r\\n                Đơn của tôi\\r\\n            </button>\\r\\n            <!--<button type=\\\"button\\\" class=\\\"btn btn-default\\\"-->\\r\\n                    <!--*ngIf=\\\"currentUser?.isLeader\\\"-->\\r\\n                    <!--[class.active]=\\\"type === 1\\\" (click)=\\\"changeType(1)\\\">-->\\r\\n                <!--Duyệt đăng ký-->\\r\\n            <!--</button>-->\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"row cm-mgb-10\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <form action=\\\"\\\" class=\\\"form-inline\\\" (ngSubmit)=\\\"search(1)\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Vui lòng nhập tên nhân viên cần tìm\\\"\\r\\n                       (keyup)=\\\"keyword = keywordInput.value\\\" #keywordInput/>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <nh-select\\r\\n                    title=\\\"-- Chọn tháng\\\"\\r\\n                    [data]=\\\"listMonth\\\"\\r\\n                    [(value)]=\\\"month\\\"\\r\\n                    (onSelectItem)=\\\"onSelectMonth($event)\\\"></nh-select>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <nh-select\\r\\n                    title=\\\"-- Chọn năm --\\\"\\r\\n                    [data]=\\\"listYear\\\"\\r\\n                    [(value)]=\\\"year\\\"\\r\\n                    (onSelectItem)=\\\"onSelectYear($event)\\\"></nh-select>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <nh-select\\r\\n                    title=\\\"-- Trạng thái --\\\"\\r\\n                    [data]=\\\"[{id: 0, name: 'Mới'},{id: 1, name: 'QLTT đã duyệt'},{id: 2, name: 'QLTT không duyệt'}]\\\"\\r\\n                    (onSelectItem)=\\\"onSelectStatus($event)\\\"></nh-select>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <button mat-raised-button color=\\\"primary\\\">\\r\\n                    <i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSearching\\\"></i>\\r\\n                    <i class=\\\"fa fa-search\\\" *ngIf=\\\"!isSearching\\\"></i>\\r\\n                </button>\\r\\n            </div>\\r\\n            <div class=\\\"form-group pull-right\\\">\\r\\n                <button type=\\\"button\\\" mat-raised-button color=\\\"primary\\\" (click)=\\\"showRegisterModal()\\\">\\r\\n                    <i class=\\\"fa fa-plus\\\"></i>\\r\\n                    Đăng ký\\r\\n                </button>\\r\\n            </div>\\r\\n        </form>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <div class=\\\"table-responsive\\\">\\r\\n            <table class=\\\"table table-bordered table-hover table-striped table-main\\\">\\r\\n                <thead>\\r\\n                <tr>\\r\\n                    <th class=\\\"center w50\\\">#</th>\\r\\n                    <th class=\\\"center\\\">Nhân viên</th>\\r\\n                    <th class=\\\"center\\\">Ngày đăng ký</th>\\r\\n                    <th class=\\\"center\\\">Hình thức</th>\\r\\n                    <th class=\\\"center w150\\\">Trạng thái</th>\\r\\n                    <th class=\\\"center\\\">Hành động</th>\\r\\n                </tr>\\r\\n                </thead>\\r\\n                <tbody>\\r\\n                <tr *ngFor=\\\"let item of listForgotCheckIn$ | async; let i = index\\\">\\r\\n                    <td class=\\\"center middle\\\">{{(currentPage - 1) * pageSize + i + 1}}</td>\\r\\n                    <td class=\\\"middle\\\">\\r\\n                        <a href=\\\"javascript://\\\" (click)=\\\"detail(item)\\\">{{item.fullName}}</a>\\r\\n                    </td>\\r\\n                    <td class=\\\"middle\\\">{{item.registerDate | dateTimeFormat:'DD/MM/YYYY'}}</td>\\r\\n                    <td class=\\\"middle\\\">{{item.isCheckIn ? 'Quên chấm công vào' : 'Quên chấm công ra'}}</td>\\r\\n                    <td class=\\\"middle\\\"\\r\\n                        [class.color-red]=\\\"item.status === STATUS.MANAGER_DECLINE\\\"\\r\\n                        [class.color-green]=\\\"item.status === STATUS.MANAGER_APPROVE\\\"\\r\\n                    >{{item.statusText}}\\r\\n                    </td>\\r\\n                    <td class=\\\"center middle w150\\\">\\r\\n                        <button type=\\\"button\\\" mat-mini-fab color=\\\"default\\\" (click)=\\\"detail(item)\\\"><i\\r\\n                            class=\\\"fa fa-eye\\\"></i></button>\\r\\n\\r\\n                        <ng-container\\r\\n                            *ngIf=\\\"currentUser?.id === item.managerUserId && item.status === STATUS.WAITING_MANAGER_APPROVE\\\">\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"primary\\\"\\r\\n                                    (click)=\\\"approve(item, true)\\\">\\r\\n                                <i class=\\\"fa fa-check\\\"></i>\\r\\n                            </button>\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"warn\\\"\\r\\n                                    (click)=\\\"approve(item, false)\\\">\\r\\n                                <i class=\\\"fa fa-times\\\"></i>\\r\\n                            </button>\\r\\n                        </ng-container>\\r\\n\\r\\n                        <ng-container\\r\\n                            *ngIf=\\\"currentUser?.id === item.userId && item.status === STATUS.WAITING_MANAGER_APPROVE\\\">\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"primary\\\" (click)=\\\"edit(item)\\\">\\r\\n                                <i class=\\\"fa fa-edit\\\"></i></button>\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"warn\\\" (click)=\\\"delete(item)\\\"><i\\r\\n                                class=\\\"fa fa-trash-o\\\"></i></button>\\r\\n                        </ng-container>\\r\\n                    </td>\\r\\n                </tr>\\r\\n                </tbody>\\r\\n            </table>\\r\\n        </div>\\r\\n    </div>\\r\\n    <ghm-paging [totalRows]=\\\"totalRows$ | async\\\" [currentPage]=\\\"currentPage\\\" [pageShow]=\\\"6\\\" (pageClick)=\\\"search($event)\\\"\\r\\n            [isDisabled]=\\\"isSearching\\\" [pageName]=\\\"'đăng ký làm thêm giờ'\\\"></ghm-paging>\\r\\n</div>\\r\\n\\r\\n<nh-modal #registerFormModal size=\\\"md\\\">\\r\\n    <nh-modal-header>\\r\\n        <h4 class=\\\"title\\\">\\r\\n            <i class=\\\"fa fa-calendar-times-o\\\"></i>\\r\\n            Đăng ký quên chấm công.\\r\\n        </h4>\\r\\n    </nh-modal-header>\\r\\n    <form class=\\\"form-horizontal\\\" (ngSubmit)=\\\"save()\\\" [formGroup]=\\\"model\\\">\\r\\n        <nh-modal-content>\\r\\n            <div class=\\\"form-group\\\" *ngIf=\\\"isHasApprovePermission\\\">\\r\\n                <label ghmLabel=\\\"Nhân viên\\\" class=\\\"col-md-2 col-sm-3 control-label\\\"></label>\\r\\n                <div class=\\\"col-sm-8\\\">\\r\\n                    <!-- TODO: Check this -->\\r\\n                    <!--<nh-suggestion-->\\r\\n                        <!--url=\\\"/forgot-checkin/search-user\\\"-->\\r\\n                        <!--placeholder=\\\"Chọn nhân viên.\\\"-->\\r\\n                        <!--formControlName=\\\"userId\\\"-->\\r\\n                    <!--&gt;</nh-suggestion>-->\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Ngày\\\" class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                    <nh-date\\r\\n                        title=\\\"Chọn thời gian\\\"\\r\\n                        formControlName=\\\"registerDate\\\"\\r\\n                        [type]=\\\"'inputButton'\\\"></nh-date>\\r\\n                    <div class=\\\"alert alert-danger\\\"\\r\\n                         *ngIf=\\\"formErrors.registerDate\\\">\\r\\n                        {{ formErrors.registerDate}}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Ca làm việc\\\" class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                    <div class=\\\"btn-group\\\" role=\\\"group\\\" *ngFor=\\\"let shift of listShift$ | async\\\">\\r\\n                        <button type=\\\"button\\\" class=\\\"btn btn-default\\\"\\r\\n                                [class.active]=\\\"model.value.shiftId === shift.id\\\"\\r\\n                                (click)=\\\"model.patchValue({shiftId: shift.id})\\\">{{shift.reportName}}\\r\\n                        </button>\\r\\n                    </div>\\r\\n                    <div class=\\\"alert alert-danger\\\"\\r\\n                         *ngIf=\\\"formErrors.shiftId\\\">\\r\\n                        {{ formErrors.shiftId}}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Hình thức\\\" class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                    <div class=\\\"btn-group\\\" role=\\\"group\\\">\\r\\n                        <button type=\\\"button\\\" class=\\\"btn btn-default\\\" [class.active]=\\\"model.value.isCheckIn\\\"\\r\\n                                (click)=\\\"model.patchValue({isCheckIn: true})\\\"> Quên chấm công vào\\r\\n                        </button>\\r\\n                        <button type=\\\"button\\\" class=\\\"btn btn-default\\\" [class.active]=\\\"!model.value.isCheckIn\\\"\\r\\n                                (click)=\\\"model.patchValue({isCheckIn: false})\\\"> Quên chấm công ra\\r\\n                        </button>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Ghi chú\\\" class=\\\"col-md-2 col-sm-3 control-label\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                    <textarea class=\\\"form-control\\\" rows=\\\"3\\\" placeholder=\\\"Nội dung ghi chú\\\"\\r\\n                              formControlName=\\\"note\\\"></textarea>\\r\\n                </div>\\r\\n            </div>\\r\\n        </nh-modal-content>\\r\\n        <nh-modal-footer>\\r\\n            <button mat-raised-button color=\\\"primary\\\">\\r\\n                <i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSaving\\\"></i>\\r\\n                <i class=\\\"fa fa-save\\\" *ngIf=\\\"!isSaving\\\"></i>\\r\\n                Đăng ký\\r\\n            </button>\\r\\n            <button mat-raised-button type=\\\"button\\\" nh-dismiss=\\\"true\\\">\\r\\n                <i class=\\\"fa fa-times\\\"></i>\\r\\n                Đóng lại\\r\\n            </button>\\r\\n        </nh-modal-footer>\\r\\n    </form>\\r\\n</nh-modal>\\r\\n\\r\\n<nh-modal #detailModal size=\\\"md\\\">\\r\\n    <nh-modal-header>\\r\\n        <h4 class=\\\"title\\\">\\r\\n            <i class=\\\"fa fa-register\\\"></i>\\r\\n            Chi tiết đăng ký quên chấm công nhân viên: \\\"{{forgotCheckIn?.fullName}}\\\" ngày {{forgotCheckIn?.registerDate\\r\\n            | dateTimeFormat:'DD/MM/YYYY'}}\\r\\n        </h4>\\r\\n    </nh-modal-header>\\r\\n\\r\\n    <nh-modal-content class=\\\"form\\\">\\r\\n        <div class=\\\"form-horizontal form-bordered\\\">\\r\\n            <div class=\\\"form-body\\\">\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label ghmLabel=\\\"Ngày\\\" class=\\\"col-md-2 col-sm-3 control-label\\\"></label>\\r\\n                    <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                        <div class=\\\"bold\\\">\\r\\n                            {{forgotCheckIn?.registerDate | dateTimeFormat:'DD/MM/YYYY'}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label ghmLabel=\\\"Ca làm việc\\\" class=\\\"col-md-2 col-sm-3 control-label\\\"></label>\\r\\n                    <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                        <div class=\\\"bold\\\">\\r\\n                            {{forgotCheckIn?.shiftReportName}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label ghmLabel=\\\"Hình thức\\\" class=\\\"col-md-2 col-sm-3 control-label\\\"></label>\\r\\n                    <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                        <div class=\\\"bold\\\">\\r\\n                            {{forgotCheckIn?.isCheckIn ? 'Quên chấm công vào' : 'Quên chấm công ra'}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label ghmLabel=\\\"Ghi chú\\\" class=\\\"col-md-2 col-sm-3 control-label\\\"></label>\\r\\n                    <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                        <div class=\\\"bold height-auto\\\">\\r\\n                            {{forgotCheckIn?.note}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label ghmLabel=\\\"Trạng thái\\\" class=\\\"col-md-2 col-sm-3 control-label\\\"></label>\\r\\n                    <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                        <div class=\\\"bold\\\"\\r\\n                             [class.color-green]=\\\"forgotCheckIn?.status === STATUS.MANAGER_APPROVE\\\"\\r\\n                             [class.color-red]=\\\"forgotCheckIn?.status === STATUS.MANAGER_DECLINE\\\">\\r\\n                            {{forgotCheckIn?.statusText}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\" *ngIf=\\\"forgotCheckIn.status === STATUS.MANAGER_DECLINE\\\">\\r\\n                    <label ghmLabel=\\\"Lý do\\\" class=\\\"col-md-2 col-sm-3 control-label\\\"></label>\\r\\n                    <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                        <div class=\\\"bold auto-height\\\">\\r\\n                            {{forgotCheckIn?.declineReason}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </nh-modal-content>\\r\\n    <nh-modal-footer>\\r\\n        <button mat-raised-button color=\\\"primary\\\"\\r\\n                *ngIf=\\\"currentUser?.id === forgotCheckIn?.managerUserId && forgotCheckIn?.status === STATUS.WAITING_MANAGER_APPROVE\\\"\\r\\n                (click)=\\\"approve(forgotCheckIn, true, true)\\\">\\r\\n            <i class=\\\"fa fa-check\\\"></i>\\r\\n            Duyệt\\r\\n        </button>\\r\\n        <button mat-raised-button color=\\\"warn\\\"\\r\\n                *ngIf=\\\"currentUser?.id === forgotCheckIn?.managerUserId && forgotCheckIn?.status === STATUS.WAITING_MANAGER_APPROVE\\\"\\r\\n                (click)=\\\"approve(forgotCheckIn, false, true)\\\">\\r\\n            <i class=\\\"fa fa-times\\\"></i>\\r\\n            Không duyệt\\r\\n        </button>\\r\\n        <button type=\\\"button\\\" mat-raised-button color=\\\"default\\\" nh-dismiss=\\\"true\\\">\\r\\n            <i class=\\\"fa fa-times\\\"></i>\\r\\n            Đóng lại\\r\\n        </button>\\r\\n    </nh-modal-footer>\\r\\n</nh-modal>\\r\\n\"","import { Component, Inject, OnInit, ViewChild } from '@angular/core';\r\nimport { BaseComponent } from '../../../base.component';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { Location, LocationStrategy, PathLocationStrategy } from '@angular/common';\r\nimport { IResponseResult } from '../../../interfaces/iresponse-result';\r\nimport { DestroySubscribers } from '../../../shareds/decorator/destroy-subscribes.decorator';\r\nimport { TimekeepingForgotCheckinService } from './timekeeping-forgot-checkin.service';\r\nimport { TimekeepingWorkScheduleService } from '../config/work-schedule/timekeeping-work-schedule.service';\r\nimport { NhModalComponent } from '../../../shareds/components/nh-modal/nh-modal.component';\r\nimport { ForgotCheckIn } from './forgot-checkin.model';\r\nimport { FilterLink } from '../../../shareds/models/filter-link.model';\r\nimport { IPageId, PAGE_ID } from '../../../configs/page-id.config';\r\nimport { AppService } from '../../../shareds/services/app.service';\r\nimport { UtilService } from '../../../shareds/services/util.service';\r\nimport { ISearchResult } from '../../../interfaces/isearch.result';\r\nimport { OvertimeRegister } from '../overtime-register/overtime-register.model';\r\nimport { map, finalize } from 'rxjs/operators';\r\nimport { CheckPermission } from '../../../shareds/decorator/check-permission.decorator';\r\n\r\n@Component({\r\n    selector: 'app-timekeeping-forgot-checkin',\r\n    templateUrl: './timekeeping-forgot-checkin.component.html',\r\n    providers: [TimekeepingForgotCheckinService, TimekeepingWorkScheduleService,\r\n        Location, {provide: LocationStrategy, useClass: PathLocationStrategy}]\r\n})\r\n\r\n@DestroySubscribers()\r\n@CheckPermission()\r\nexport class TimekeepingForgotCheckinComponent extends BaseComponent implements OnInit {\r\n    @ViewChild('registerFormModal') registerFormModal: NhModalComponent;\r\n    @ViewChild('detailModal') detailModal: NhModalComponent;\r\n    listMonth = [];\r\n    listYear = [];\r\n    listShift$: Observable<any>;\r\n    listForgotCheckIn$: Observable<ForgotCheckIn[]>;\r\n    listType = [{id: 0, name: 'Đánh máy'},\r\n        {id: 1, name: 'Làm thủ thuật'},\r\n        {id: 2, name: 'Tăng cường'},\r\n        {id: 3, name: 'Trực trưa'}];\r\n    forgotCheckIn = new ForgotCheckIn();\r\n    model: FormGroup;\r\n    month: number;\r\n    year: number;\r\n    type = 0;\r\n    userId: string;\r\n    status: number;\r\n    totalMinutes;\r\n    isGettingDetail = false;\r\n    research = false;\r\n\r\n    STATUS = {\r\n        WAITING_MANAGER_APPROVE: 0,\r\n        MANAGER_APPROVE: 1,\r\n        MANAGER_DECLINE: 2\r\n    };\r\n\r\n    constructor(@Inject(PAGE_ID) pageId: IPageId,\r\n                private location: Location,\r\n                private title: Title,\r\n                private route: ActivatedRoute,\r\n                private fb: FormBuilder,\r\n                private toastr: ToastrService,\r\n                private appService: AppService,\r\n                private utilService: UtilService,\r\n                private forgotCheckInService: TimekeepingForgotCheckinService,\r\n                private workscheduleService: TimekeepingWorkScheduleService) {\r\n        super();\r\n        this.title.setTitle('Danh sách quên chấm công.');\r\n        this.appService.setupPage(pageId.HR, pageId.TIMEKEEPING_FORGOT_CHECK_IN, 'Chấm công', 'Danh sách quên chấm công.');\r\n        // this.getPermission(this.appService);\r\n        // this.currentUser = this.appService.currentUser;\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.subscribers.queryParams = this.route.queryParams.subscribe(params => {\r\n            if (params.type) {\r\n                setTimeout(() => {\r\n                    this.type = parseInt(params.type);\r\n                }, 500);\r\n            }\r\n\r\n            if (params.id) {\r\n                this.getDetail(params.id);\r\n            }\r\n\r\n            if (params.showRegister) {\r\n                setTimeout(() => {\r\n                    this.isUpdate = false;\r\n                    this.registerFormModal.show();\r\n                }, 100);\r\n            }\r\n\r\n            if (params.month) {\r\n                this.month = parseInt(params.month);\r\n            } else {\r\n                this.month = new Date().getMonth() + 1;\r\n            }\r\n\r\n            if (params.year) {\r\n                this.year = parseInt(params.year);\r\n            } else {\r\n                this.year = new Date().getFullYear();\r\n            }\r\n        });\r\n\r\n        this.listShift$ = this.workscheduleService.getMyWorkScheduleShift()\r\n            .pipe(map((result: any) => {\r\n                return result;\r\n            }));\r\n\r\n        this.listForgotCheckIn$ = this.route.data\r\n            .pipe(map((result: { data: any }) => {\r\n                const overtimes = result.data;\r\n                this.totalRows$ = new Observable(o => o.next(overtimes.totalRows));\r\n                return overtimes.items.map((item) => {\r\n                    item.statusText = this.getStatusText(item.status);\r\n                    return item;\r\n                });\r\n            }));\r\n\r\n        this.builForm();\r\n\r\n        this.utilService.initListMonth().forEach((month: number) => {\r\n            this.listMonth = [...this.listMonth, {id: month, name: `Tháng ${month}`}];\r\n        });\r\n\r\n        this.utilService.initListYear().forEach((year: number) => {\r\n            this.listYear = [...this.listYear, {id: year, name: `Năm ${year}`}];\r\n        });\r\n    }\r\n\r\n    getDetail(id: string) {\r\n        setTimeout(() => {\r\n            this.isGettingDetail = true;\r\n            this.detailModal.show();\r\n            this.forgotCheckInService.getDetail(id)\r\n                .pipe(finalize(() => this.isGettingDetail = false))\r\n                .subscribe((forgotCheckIn: ForgotCheckIn) => {\r\n                    this.forgotCheckIn = forgotCheckIn;\r\n                    this.forgotCheckIn.statusText = this.getStatusText(forgotCheckIn.status);\r\n                });\r\n        }, 500);\r\n    }\r\n\r\n    onSelectMonth(month) {\r\n        this.month = month.id;\r\n        this.search(1);\r\n    }\r\n\r\n    onSelectYear(year) {\r\n        this.year = year.id;\r\n        this.search(1);\r\n    }\r\n\r\n    onSelectStatus(status) {\r\n        this.status = status.id;\r\n        this.search(1);\r\n    }\r\n\r\n    search(currentPage: number) {\r\n        this.currentPage = currentPage;\r\n        this.isSearching = true;\r\n        this.renderFilterLink();\r\n\r\n        this.listForgotCheckIn$ = this.forgotCheckInService\r\n            .search(this.month, this.year, this.type, this.userId, this.status, this.currentPage, this.pageSize)\r\n            .pipe(finalize(() => this.isSearching = false),\r\n                map((result: ISearchResult<ForgotCheckIn>) => {\r\n                    this.totalRows$ = new Observable(o => o.next(result.totalRows));\r\n                    return result.items.map((item) => {\r\n                        item.statusText = this.getStatusText(item.status);\r\n                        return item;\r\n                    });\r\n                }));\r\n    }\r\n\r\n    showRegisterModal() {\r\n        this.isUpdate = false;\r\n        this.registerFormModal.show();\r\n    }\r\n\r\n    edit(overtimeRegister: ForgotCheckIn) {\r\n        this.isUpdate = true;\r\n        this.model.patchValue(overtimeRegister);\r\n        this.registerFormModal.show();\r\n    }\r\n\r\n    detail(overtimeRegister: ForgotCheckIn) {\r\n        this.forgotCheckIn = overtimeRegister;\r\n        this.forgotCheckIn.statusText = this.getStatusText(this.forgotCheckIn.status);\r\n        this.detailModal.show();\r\n    }\r\n\r\n    delete(overtimeRegister: OvertimeRegister) {\r\n        // swal({\r\n        //     title: ``,\r\n        //     text: `Bạn có chắc chắn muốn xóa đơn đăng ký làm thêm giờ này?`,\r\n        //     type: 'warning',\r\n        //     showCancelButton: true,\r\n        //     confirmButtonColor: '#DD6B55',\r\n        //     confirmButtonText: 'Đồng ý',\r\n        //     cancelButtonText: 'Hủy bỏ'\r\n        // }).then((isConfirm: boolean) => {\r\n        //     if (isConfirm) {\r\n        //         this.forgotCheckInService.delete(overtimeRegister.id)\r\n        //             .finally(() => this.isSearching = false)\r\n        //             .subscribe(() => {\r\n        //                 this.search(1);\r\n        //             });\r\n        //     }\r\n        // }, () => {\r\n        // });\r\n    }\r\n\r\n    approve(forgotCheckIn: ForgotCheckIn, isApprove: boolean, fromDetailModal?: boolean) {\r\n        this.research = fromDetailModal;\r\n        if (!isApprove) {\r\n            // swal({\r\n            //     title: ``,\r\n            //     text: `Bạn có chắc chắn muốn không duyệt cho đơn đăng ký làm thêm giờ của: \"${forgotCheckIn.fullName}\"`,\r\n            //     type: 'warning',\r\n            //     showCancelButton: true,\r\n            //     confirmButtonColor: '#DD6B55',\r\n            //     confirmButtonText: 'Đồng ý',\r\n            //     cancelButtonText: 'Hủy bỏ'\r\n            // }).then((isConfirm: boolean) => {\r\n            //     if (isConfirm) {\r\n            //         swal({\r\n            //             input: 'textarea',\r\n            //             inputPlaceholder: 'Vui lòng nhập lý do không duyệt!',\r\n            //             showCancelButton: true,\r\n            //             confirmButtonColor: '#DD6B55',\r\n            //             confirmButtonText: 'Gửi',\r\n            //             cancelButtonText: 'Hủy bỏ'\r\n            //         }).then((text) => {\r\n            //             if (text) {\r\n            //                 this.updateApproveStatus(forgotCheckIn, isApprove, text);\r\n            //             }\r\n            //         });\r\n            //     }\r\n            // }, () => {\r\n            // });\r\n        } else {\r\n            this.updateApproveStatus(forgotCheckIn, isApprove);\r\n        }\r\n    }\r\n\r\n    save() {\r\n        this.forgotCheckIn = this.model.value;\r\n        const isValid = this.utilService.onValueChanged(this.model, this.formErrors, this.validationMessages, true);\r\n        if (isValid) {\r\n            if (this.totalMinutes === '') {\r\n                this.toastr.error('Giá trị thời gian \"từ\" không được phép lớn hơn giá trị thời gian \"đến\".');\r\n                return;\r\n            }\r\n\r\n            this.forgotCheckIn = this.model.value;\r\n            this.isSaving = true;\r\n\r\n            if (this.isUpdate) {\r\n                this.subscribers.update = this.forgotCheckInService.update(this.forgotCheckIn)\r\n                    .pipe(finalize(() => this.isSaving = false))\r\n                    .subscribe((result: IResponseResult) => {\r\n                        this.toastr.success(result.message, result.title);\r\n                        this.registerFormModal.dismiss();\r\n                        this.search(this.currentPage);\r\n                    });\r\n            } else {\r\n                this.subscribers.insert = this.forgotCheckInService.insert(this.forgotCheckIn)\r\n                    .pipe(finalize(() => this.isSaving = false))\r\n                    .subscribe((result: IResponseResult) => {\r\n                        this.toastr.success(result.message, result.title);\r\n                        this.model.reset();\r\n                        this.search(this.currentPage);\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    changeType(type: number) {\r\n        this.type = type;\r\n        this.search(1);\r\n    }\r\n\r\n    private updateApproveStatus(forgotCheckIn: ForgotCheckIn, isApprove: boolean, note?: string) {\r\n        this.forgotCheckInService.approve(forgotCheckIn.id, isApprove, note)\r\n            .subscribe(() => {\r\n                this.toastr.success(isApprove ? 'Duyệt đăng ký làm thêm giờ thành công.' : 'Không duyệt đăng ký làm thêm giờ thành công.');\r\n                forgotCheckIn.status = isApprove ? this.STATUS.MANAGER_APPROVE : this.STATUS.MANAGER_DECLINE;\r\n                forgotCheckIn.statusText = this.getStatusText(forgotCheckIn.status);\r\n                forgotCheckIn.declineReason = note;\r\n            });\r\n    }\r\n\r\n    private builForm() {\r\n        this.renderFormValidation();\r\n        this.model = this.fb.group({\r\n            'id': [this.forgotCheckIn.id],\r\n            'userId': [this.forgotCheckIn.userId],\r\n            'registerDate': [this.forgotCheckIn.registerDate, [\r\n                Validators.required\r\n            ]],\r\n            'shiftId': [this.forgotCheckIn.shiftId, [\r\n                Validators.required\r\n            ]],\r\n            'note': [this.forgotCheckIn.note, [\r\n                Validators.maxLength(500)\r\n            ]],\r\n            'isCheckIn': [this.forgotCheckIn.isCheckIn]\r\n        });\r\n\r\n        this.model.valueChanges.subscribe(values => this.utilService.onValueChanged(this.model, this.formErrors, this.validationMessages));\r\n    }\r\n\r\n    private renderFormValidation() {\r\n        this.formErrors = {\r\n            'shiftId': '',\r\n            'registerDate': '',\r\n            'note': '',\r\n            'isCheckIn': ''\r\n        };\r\n\r\n        this.validationMessages = {\r\n            'shiftId': {\r\n                'required': 'Vui lòng chọn ca làm việc.'\r\n            },\r\n            'registerDate': {\r\n                'required': 'Vui lòng chọn ngày làm thêm.'\r\n            },\r\n            'note': {\r\n                'maxLength': 'Ghi chú không được phép vượt quá 500 ký tự'\r\n            },\r\n            'isCheckIn': {\r\n                'required': 'Vui lòng chọn hình thức.'\r\n            }\r\n        };\r\n    }\r\n\r\n    private renderFilterLink() {\r\n        const path = '/timekeeping/forgot-checkin';\r\n        const query = this.utilService.renderLocationFilter([\r\n            new FilterLink('type', this.type),\r\n            new FilterLink('month', this.month),\r\n            new FilterLink('year', this.year),\r\n            new FilterLink('userId', this.userId),\r\n            new FilterLink('status', this.status)\r\n        ]);\r\n\r\n        this.location.go(path, query);\r\n    }\r\n\r\n    private getStatusText(status: number) {\r\n        return status === this.STATUS.WAITING_MANAGER_APPROVE ? 'Chờ QLTT duyệt'\r\n            : status === this.STATUS.MANAGER_APPROVE ? 'QLTT đã duyệt'\r\n                : status === this.STATUS.MANAGER_DECLINE ? 'QLTT không duyệt' : '';\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { ActivatedRouteSnapshot } from '@angular/router';\r\nimport { ForgotCheckIn } from './forgot-checkin.model';\r\n\r\n@Injectable()\r\nexport class TimekeepingForgotCheckinService {\r\n    url = 'forgot-checkin/';\r\n\r\n    constructor(private http: HttpClient) {\r\n    }\r\n\r\n    resolve(route: ActivatedRouteSnapshot, state: Object) {\r\n        const params = route.queryParams;\r\n        return this.search(params.month, params.year, params.type, params.userId, params.status, params.page, params.pageSize);\r\n    }\r\n\r\n    search(month: number, year: number, type: number, userId: string, status?: number, page = 1, pageSize = 20) {\r\n        return this.http.get<{ items: ForgotCheckIn[], totalRows: number }>(`${this.url}search`, {\r\n            params: new HttpParams()\r\n                .set('month', month ? month.toString() : (new Date().getMonth() + 1).toString())\r\n                .set('year', year ? year.toString() : (new Date().getFullYear()).toString())\r\n                .set('type', type != null && type != undefined ? type.toString() : '0')\r\n                .set('userId', userId ? userId : '')\r\n                .set('status', status != null && status != undefined ? status.toString() : '')\r\n                .set('page', page ? page.toString() : '1')\r\n                .set('pageSize', pageSize ? pageSize.toString() : '20')\r\n        });\r\n    }\r\n\r\n    insert(inOut: ForgotCheckIn) {\r\n        return this.http.post(`${this.url}insert`, inOut);\r\n    }\r\n\r\n    update(inOut: ForgotCheckIn) {\r\n        return this.http.post(`${this.url}update`, inOut);\r\n    }\r\n\r\n    delete(id: string) {\r\n        return this.http.post(`${this.url}delete`, '', {\r\n            params: new HttpParams().set('id', id)\r\n        });\r\n    }\r\n\r\n    approve(id: string, isApprove: boolean, note?: string) {\r\n        return this.http.post(`${this.url}approve`, '', {\r\n            params: new HttpParams().set('id', id)\r\n                .set('isApprove', isApprove.toString())\r\n                .set('note', note ? note : '')\r\n        });\r\n    }\r\n\r\n    getDetail(id: string) {\r\n        return this.http.get(`${this.url}get-detail`, {\r\n            params: new HttpParams().set('id', id)\r\n        });\r\n    }\r\n}\r\n","export class InLateOutEarlyUpdateApproveStatusModel {\r\n    id: string;\r\n    shifts: InLateOutEarlyUpdateApproveStatusShiftModel[];\r\n}\r\n\r\nexport class InLateOutEarlyUpdateApproveStatusShiftModel {\r\n    constructor(public shiftId: string, public isInLate: boolean, public isApprove: boolean, public declineReason?: string) {\r\n    }\r\n}\r\n","import { TimeObject } from '../../../shareds/models/time-object.model';\r\n\r\nexport class InOut {\r\n    id: string;\r\n    userId: string;\r\n    fullName: string;\r\n    officeId: number;\r\n    officeName: string;\r\n    titleId: number;\r\n    titleName: string;\r\n    avatar: string;\r\n    registerDate: string;\r\n    createTime: string;\r\n    creatorId: string;\r\n    creatorFullName: string;\r\n    managerUserId: string;\r\n    managerFullName: string;\r\n    reason: string;\r\n    isConfirmed: boolean;\r\n    shifts: InLateOutEarlyShift[];\r\n    confirmDateTime: string;\r\n    month: number;\r\n    year: number;\r\n\r\n    constructor() {\r\n    }\r\n}\r\n\r\nexport class InLateOutEarlyShift {\r\n    isInLate: boolean;\r\n    shiftId: string;\r\n    shiftCode: string;\r\n    shiftReportName: string;\r\n    startTime: TimeObject;\r\n    endTime: TimeObject;\r\n    totalMin: number;\r\n    reason: string;\r\n    declineReason: string;\r\n    isUse: boolean;\r\n    timeText: string;\r\n    isApprove?: boolean;\r\n\r\n    constructor() {\r\n        this.startTime = new TimeObject();\r\n        this.endTime = new TimeObject();\r\n        this.isUse = false;\r\n        this.reason = '';\r\n    }\r\n}\r\n","module.exports = \"<div class=\\\"row cm-mgb-10\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <div class=\\\"btn-group\\\" role=\\\"group\\\">\\r\\n            <button type=\\\"button\\\" class=\\\"btn btn-default\\\" [class.active]=\\\"type === 0\\\" (click)=\\\"changeType(0)\\\">\\r\\n                Đơn của tôi\\r\\n            </button>\\r\\n            <!--<button type=\\\"button\\\" class=\\\"btn btn-default\\\"-->\\r\\n                    <!--*ngIf=\\\"currentUser?.isLeader\\\"-->\\r\\n                    <!--[class.active]=\\\"type === 1\\\" (click)=\\\"changeType(1)\\\">-->\\r\\n                <!--Duyệt đăng ký-->\\r\\n            <!--</button>-->\\r\\n            <!--<button type=\\\"button\\\" class=\\\"btn btn-default\\\"-->\\r\\n                    <!--*ngIf=\\\"isHasApprovePermission || currentUser?.isAdmin\\\"-->\\r\\n                    <!--[class.active]=\\\"type === 2\\\" (click)=\\\"changeType(2)\\\">-->\\r\\n                <!--Đơn do tôi tạo-->\\r\\n            <!--</button>-->\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"row cm-mgb-10\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <form action=\\\"\\\" class=\\\"form-inline\\\" (ngSubmit)=\\\"search(1)\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <nh-select\\r\\n                    [data]=\\\"listMonth\\\"\\r\\n                    title=\\\"-- Chọn tháng --\\\"\\r\\n                    [(value)]=\\\"month\\\"\\r\\n                    (onSelectItem)=\\\"search(1)\\\"\\r\\n                ></nh-select>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <nh-select\\r\\n                    [data]=\\\"listYear\\\"\\r\\n                    title=\\\"-- Chọn năm --\\\"\\r\\n                    [(value)]=\\\"year\\\"\\r\\n                    (onSelectItem)=\\\"search(1)\\\"\\r\\n                ></nh-select>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <nh-select\\r\\n                    [data]=\\\"[{id: true, name: 'Đã xác nhận'}, {id: false, name: 'Chưa xác nhận'}]\\\"\\r\\n                    title=\\\"-- Chọn trạng thái --\\\"\\r\\n                    [(value)]=\\\"isConfirm\\\"\\r\\n                    (onSelectItem)=\\\"search(1)\\\"\\r\\n                ></nh-select>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <button mat-raised-button color=\\\"primary\\\" title=\\\"Tìm kiếm\\\">\\r\\n                    <!--<i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSearching\\\"></i>-->\\r\\n                    <i class=\\\"fa fa-search\\\"></i>\\r\\n                </button>\\r\\n            </div>\\r\\n            <div class=\\\"form-group pull-right\\\">\\r\\n                <button type=\\\"button\\\" mat-raised-button color=\\\"primary\\\" (click)=\\\"showRegisterForm()\\\">\\r\\n                    <i class=\\\"fa fa-plus\\\"></i>\\r\\n                    Đăng ký\\r\\n                </button>\\r\\n            </div>\\r\\n        </form>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <!-- BEGIN: table.list-in-out -->\\r\\n        <div class=\\\"table-responsive\\\">\\r\\n            <table class=\\\"table table-bordered table-striped table-hover list-in-out table-main\\\">\\r\\n                <thead>\\r\\n                <tr>\\r\\n                    <th class=\\\"center w50\\\">#</th>\\r\\n                    <th class=\\\"center\\\">Nhân viên</th>\\r\\n                    <th class=\\\"center\\\">Ngày</th>\\r\\n                    <th class=\\\"center\\\">Nhân viên đăng ký</th>\\r\\n                    <th class=\\\"center\\\">Trạng thái</th>\\r\\n                    <th class=\\\"center w150\\\">Hành động</th>\\r\\n                </tr>\\r\\n                </thead>\\r\\n                <tbody>\\r\\n                <tr *ngFor=\\\"let item of listInOut$ | async; let i = index\\\">\\r\\n                    <td class=\\\"center middle\\\">{{ (currentPage - 1) * pageSize + i + 1 }}</td>\\r\\n                    <td class=\\\"middle\\\">\\r\\n                        <a href=\\\"javascript://\\\" (click)=\\\"detail(item)\\\">{{item.fullName}}</a>\\r\\n                    </td>\\r\\n                    <td class=\\\"middle\\\">{{item.registerDate | dateTimeFormat:'DD/MM/YYYY'}}</td>\\r\\n                    <td class=\\\"middle\\\">{{item.creatorFullName}}</td>\\r\\n                    <td class=\\\"center middle\\\">{{item.isConfirmed ? 'Đã xác nhận' : 'Chưa xác nhận'}}</td>\\r\\n                    <td class=\\\"center middle\\\">\\r\\n                        <button type=\\\"button\\\" mat-mini-fab color=\\\"default\\\" (click)=\\\"detail(item)\\\">\\r\\n                            <i class=\\\"fa fa-eye\\\"></i>\\r\\n                        </button>\\r\\n                        <ng-container\\r\\n                            *ngIf=\\\"(type === 0 || (type === 2 && item.creatorId === currentUser?.id)) && !item.isConfirmed\\\">\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"primary\\\" (click)=\\\"edit(item)\\\">\\r\\n                                <i class=\\\"fa fa-edit\\\"></i>\\r\\n                            </button>\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"warn\\\" (click)=\\\"delete(item)\\\">\\r\\n                                <i class=\\\"fa fa-trash\\\"></i>\\r\\n                            </button>\\r\\n                        </ng-container>\\r\\n                    </td>\\r\\n                </tr>\\r\\n                </tbody>\\r\\n            </table>\\r\\n        </div>\\r\\n        <!-- END: table.list-in-out -->\\r\\n        <ghm-paging [totalRows]=\\\"totalRows$ | async\\\" [currentPage]=\\\"currentPage\\\" [pageShow]=\\\"6\\\" (pageClick)=\\\"search($event)\\\"\\r\\n                [isDisabled]=\\\"isSearching\\\" [pageName]=\\\"'đi muộn về sớm'\\\"></ghm-paging>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<nh-modal #formModal size=\\\"md\\\" (onHidden)=\\\"onFormModalHidden()\\\">\\r\\n    <nh-modal-header>\\r\\n        <i class=\\\"fa fa-clock-o\\\"></i>\\r\\n        {{isUpdate ? 'Cập nhật đi muộn về sớm' : 'đăng ký đi muộn về sớm'}}\\r\\n    </nh-modal-header>\\r\\n    <div class=\\\"form\\\">\\r\\n        <form action=\\\"\\\" class=\\\"form-horizontal form-bordered\\\" (ngSubmit)=\\\"save()\\\" [formGroup]=\\\"model\\\">\\r\\n            <nh-modal-content>\\r\\n                <div class=\\\"form-body\\\">\\r\\n                    <div class=\\\"form-group\\\" *ngIf=\\\"listShift.length === 0\\\">\\r\\n                        <div class=\\\"col-sm-12\\\">\\r\\n                            <div class=\\\"alert alert-danger\\\">\\r\\n                                Xin lỗi: Bạn chưa được cấu hình ca làm việc. Vui lòng liên hệ với bộ phận nhân sự để\\r\\n                                được trợ giúp.\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <div class=\\\"col-sm-12\\\">\\r\\n                            <div class=\\\"alert alert-warning\\\">\\r\\n                                Sô phút xin phép đi muộn về sớm tối đa là {{maxInOutMin}} phút\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <div class=\\\"col-sm-12\\\">\\r\\n                            <div class=\\\"alert alert-success\\\" *ngIf=\\\"totalApprovedTimes < maxInOutTimes\\\">\\r\\n                                Bạn còn {{maxInOutTimes}} lần được phép đi muộn về sớm trong tháng này.\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group\\\" *ngIf=\\\"isHasApprovePermission\\\">\\r\\n                        <label ghmLabel=\\\"Nhân viên\\\" class=\\\"control-label col-sm-4\\\"></label>\\r\\n                        <div class=\\\"col-sm-8\\\">\\r\\n                            <ghm-user-suggestion\\r\\n                                [sources]=\\\"listUserSuggestion\\\"\\r\\n                                [selectedUsers]=\\\"selectedUser\\\"\\r\\n                                [isLoading]=\\\"isSearchingUser\\\"\\r\\n                                (onSelectUser)=\\\"onSelectUser($event)\\\"\\r\\n                                (onRemoveUser)=\\\"onRemoveUser()\\\"\\r\\n                                (onKeyUp)=\\\"onUserSuggestionKeyUp($event)\\\"\\r\\n                                placeholder=\\\"Nhập tên nhân viên\\\"\\r\\n                            ></ghm-user-suggestion>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <label ghmLabel=\\\"Ngày\\\" class=\\\"control-label col-sm-4\\\" [required]=\\\"true\\\"></label>\\r\\n                        <div class=\\\"col-sm-8\\\">\\r\\n                            <nh-date formControlName=\\\"registerDate\\\"\\r\\n                                     [type]=\\\"'inputButton'\\\"\\r\\n                                     [title]=\\\"'Chọn ngày xin đi muộn về sớm'\\\"\\r\\n                            ></nh-date>\\r\\n                            <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.registerDate\\\">\\r\\n                                {{ formErrors.registerDate }}\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <label ghmLabel=\\\"Hình thức\\\" class=\\\"control-label col-sm-4\\\" [required]=\\\"true\\\"></label>\\r\\n                        <div class=\\\"col-sm-8\\\">\\r\\n                            <div class=\\\"\\\" formArrayName=\\\"shifts\\\"\\r\\n                                 *ngFor=\\\"let shift of shifts.controls; let shiftIndex = index\\\">\\r\\n                                <div class=\\\"portlet light bordered\\\">\\r\\n                                    <div class=\\\"portlet-title\\\">\\r\\n                                        <div class=\\\"caption\\\">\\r\\n                                            <i class=\\\"icon-speech font-green\\\"></i>\\r\\n                                            <span class=\\\"caption-subject bold font-green uppercase\\\">Hình thức đi muộn về sớm.</span>\\r\\n                                        </div>\\r\\n                                        <div class=\\\"actions\\\">\\r\\n                                            <a class=\\\"btn btn-circle btn-icon-only btn-default\\\" href=\\\"javascript://\\\"\\r\\n                                               (click)=\\\"removeMethod(shiftIndex)\\\">\\r\\n                                                <i class=\\\"fa fa-times\\\"></i>\\r\\n                                            </a>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"portlet-body\\\" [formGroupName]=\\\"shiftIndex\\\">\\r\\n                                        <div class=\\\"form-group border-none cm-mgb-10\\\">\\r\\n                                            <mat-slide-toggle color=\\\"primary\\\"\\r\\n                                                              [checked]=\\\"shift.value.isInLate\\\"\\r\\n                                                              (change)=\\\"onChangeIsInLate(shift)\\\">\\r\\n                                                {{shift.value.isInLate ? 'Đi muộn' : 'Về sớm'}}\\r\\n                                            </mat-slide-toggle>\\r\\n                                            <div class=\\\"alert alert-danger\\\"\\r\\n                                                 *ngIf=\\\"formErrors.shifts.isInLate\\\">\\r\\n                                                {{ formErrors.shifts.isInLate }}\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                        <div class=\\\"form-group border-none cm-mgb-10\\\">\\r\\n                                            <label for=\\\"\\\" class=\\\"\\\">Ca làm việc</label>\\r\\n                                            <nh-select\\r\\n                                                title=\\\"-- Chọn ca làm việc --\\\"\\r\\n                                                [data]=\\\"listShift\\\"\\r\\n                                                formControlName=\\\"shiftId\\\"\\r\\n                                            ></nh-select>\\r\\n                                            <div class=\\\"alert alert-danger\\\"\\r\\n                                                 *ngIf=\\\"formErrors.shifts.shiftId\\\">\\r\\n                                                {{ formErrors.shifts.shiftId }}\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                        <div class=\\\"form-group border-none cm-mgb-10\\\">\\r\\n                                            <label for=\\\"\\\" class=\\\"\\\">Số phút</label>\\r\\n                                            <input type=\\\"text\\\" class=\\\"form-control\\\"\\r\\n                                                   placeholder=\\\"Nhập số phút\\\"\\r\\n                                                   autocomplete=\\\"off\\\"\\r\\n                                                   formControlName=\\\"totalMin\\\"\\r\\n                                                   [attr.id]=\\\"'totalMin' + shift.value.shiftId + shift.value.isInLate\\\"\\r\\n                                            >\\r\\n                                            <div *ngIf=\\\"shift.value.timeText\\\"\\r\\n                                                 [class.bold]=\\\"shift.value.isUse\\\"\\r\\n                                                 [class.hint-color]=\\\"!shift.value.isUse\\\">\\r\\n                                                {{shift.value.timeText}}\\r\\n                                            </div>\\r\\n                                            <div class=\\\"alert alert-danger\\\"\\r\\n                                                 *ngIf=\\\"formErrors.shifts.totalMin\\\">\\r\\n                                                {{ formErrors.shifts.totalMin }}\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                        <div class=\\\"form-group border-none cm-mgb-10\\\">\\r\\n                                            <label for=\\\"\\\" class=\\\"\\\">\\r\\n                                                Lý do {{shift.value.isInLate ? 'đi muộn' : 'về sớm'}}\\r\\n                                            </label>\\r\\n                                            <textarea class=\\\"form-control\\\" rows=\\\"3\\\"\\r\\n                                                      placeholder=\\\"Vui lòng nhập lý do\\\"\\r\\n                                                      formControlName=\\\"reason\\\"\\r\\n                                                      [attr.id]=\\\"'reason' + shift.value.shiftId + shift.value.isInLate\\\">\\r\\n                                            </textarea>\\r\\n                                            <div *ngIf=\\\"formErrors.shifts.reason\\\"\\r\\n                                                 class=\\\"alert alert-danger\\\">\\r\\n                                                {{formErrors.shifts.reason}}\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <button type=\\\"button\\\" mat-raised-button color=\\\"primary\\\" (click)=\\\"addNewMethod()\\\"\\r\\n                                    *ngIf=\\\"totalApprovedTimes < maxInOutTimes; else notEnoughTimesTemplate\\\">\\r\\n                                <i class=\\\"fa fa-plus\\\"></i>\\r\\n                                Thêm hình thức nghỉ\\r\\n                            </button>\\r\\n                            <ng-template #notEnoughTimesTemplate>\\r\\n                                <span\\r\\n                                    class=\\\"color-red\\\">Rất tiếc. Bạn đã sử dụng hết số lần được phép đi muộn về sớm trong tháng này.</span>\\r\\n                            </ng-template>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </nh-modal-content>\\r\\n            <nh-modal-footer>\\r\\n                <button mat-raised-button color=\\\"primary\\\">\\r\\n                    <!--<i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSaving\\\"></i>-->\\r\\n                    <i class=\\\"fa fa-save\\\"></i>\\r\\n                    Lưu lại\\r\\n                </button>\\r\\n                <button type=\\\"button\\\" mat-raised-button nh-dismiss=\\\"true\\\">\\r\\n                    <i class=\\\"fa fa-times\\\"></i>\\r\\n                    Đóng lại\\r\\n                </button>\\r\\n            </nh-modal-footer>\\r\\n        </form>\\r\\n    </div>\\r\\n</nh-modal>\\r\\n\\r\\n<nh-modal #detailModal size=\\\"md\\\">\\r\\n    <nh-modal-header>\\r\\n        <i class=\\\"fa fa-clock-o\\\"></i>\\r\\n        Chi tiết đi muộn về sớm: \\\"{{inOut?.fullName}}\\\"\\r\\n    </nh-modal-header>\\r\\n    <nh-modal-content>\\r\\n        <div class=\\\"form-horizontal\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <div class=\\\"col-sm-12\\\">\\r\\n                    <div class=\\\"alert alert-info\\\" *ngIf=\\\"totalApprovedInLateOutEarly > 0\\\">\\r\\n                        {{inOut?.fullName}} đã được duyệt {{totalApprovedInLateOutEarly}} lần đi muộn về sớm trong\\r\\n                        tháng {{inOut?.month}} năm {{inOut?.year}}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <div class=\\\"col-sm-12\\\">\\r\\n                    <label class=\\\"label-color\\\">Ngày:</label>\\r\\n                    <span class=\\\"\\\">\\r\\n                        {{inOut?.registerDate | dateTimeFormat:'DD/MM/YYYY'}}\\r\\n                        </span>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\" *ngFor=\\\"let shift of inOut?.shifts\\\">\\r\\n                <div class=\\\"col-sm-12 cm-mgt-20\\\">\\r\\n                    <div class=\\\"portlet light bordered\\\">\\r\\n                        <div class=\\\"portlet-title\\\">\\r\\n                            <div class=\\\"caption\\\">\\r\\n                                <i class=\\\"fa fa-clock-o\\\"></i>\\r\\n                                <span class=\\\"caption-subject bold uppercase\\\"> {{shift?.isInLate ? 'Đi muộn' : 'Về sớm'}} {{shift.shiftReportName}}</span>\\r\\n                            </div>\\r\\n                            <div class=\\\"actions\\\">\\r\\n                                <a href=\\\"javascript:;\\\" class=\\\"btn btn-circle btn-sm btn-success\\\"\\r\\n                                   *ngIf=\\\"!inOut?.isConfirmed && (inOut?.managerUserId === currentUser?.id) && (shift.isApprove == null || shift.isApprove === undefined)\\\"\\r\\n                                   (click)=\\\"approve(shift, true)\\\">\\r\\n                                    <i class=\\\"fa fa-check\\\"></i> Duyệt </a>\\r\\n                                <a href=\\\"javascript:;\\\" class=\\\"btn btn-circle btn-sm btn-danger\\\"\\r\\n                                   *ngIf=\\\"!inOut?.isConfirmed && (inOut?.managerUserId === currentUser?.id) && shift.isApprove !== false\\\"\\r\\n                                   (click)=\\\"approve(shift, false)\\\">\\r\\n                                    <i class=\\\"fa fa-times\\\"></i>\\r\\n                                    {{shift.isApprove == true ? 'Hủy duyệt' : 'Không duyệt'}}\\r\\n                                </a>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"portlet-body\\\">\\r\\n                            <div class=\\\"row\\\">\\r\\n                                <div class=\\\"col-sm-8\\\">\\r\\n                                    <div class=\\\"form-group\\\">\\r\\n                                        <div class=\\\"col-sm-12\\\">\\r\\n                                            <label for=\\\"\\\" class=\\\"label-color\\\">Lý do\\r\\n                                                {{shift.isInLate ? 'đi muộn' : 'về sớm'}}:</label>\\r\\n                                            <div class=\\\"form-control\\\">\\r\\n                                                {{shift.reason}}\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"form-group cm-mgt-10\\\" *ngIf=\\\"shift.declineReason\\\">\\r\\n                                        <div class=\\\"col-sm-12\\\">\\r\\n                                            <label for=\\\"\\\" class=\\\"label-color\\\">Lý do không duyệt:</label>\\r\\n                                            <div class=\\\"color-red form-control\\\">\\r\\n                                                {{shift.declineReason}}\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                <div class=\\\"col-sm-4\\\">\\r\\n                                    <div class=\\\"form-group\\\">\\r\\n                                        <div class=\\\"col-sm-12\\\">\\r\\n                                            <label for=\\\"\\\" class=\\\"label-color\\\">Số phút:</label>\\r\\n                                            <span>{{shift.totalMin}}</span>\\r\\n                                            <span class=\\\"bold\\\">({{shift.timeText}})</span>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"form-group\\\">\\r\\n                                        <div class=\\\"col-sm-12\\\">\\r\\n                                            <label for=\\\"\\\" class=\\\"label-color\\\">Trạng thái:</label>\\r\\n                                            <span\\r\\n                                                [class.color-green]=\\\"shift.isApprove\\\"\\r\\n                                                [class.color-red]=\\\"shift.isApprove === false\\\"\\r\\n                                            >\\r\\n                                    {{shift.isApprove === undefined || shift.isApprove == null ? 'Chờ QLTT duyệt' : shift.isApprove ? 'QLTT đã duyệt' : 'QLTT không duyệt'}}\\r\\n                                </span>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"form-group\\\" *ngIf=\\\"inOut?.isConfirmed\\\">\\r\\n                                        <div class=\\\"col-sm-12\\\">\\r\\n                                            <label for=\\\"\\\" class=\\\"label-color\\\">Ngày xác nhận:</label>\\r\\n                                            {{inOut?.confirmDateTime | dateTimeFormat:'DD/MM/YYYY'}}\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </nh-modal-content>\\r\\n    <nh-modal-footer>\\r\\n        <button type=\\\"button\\\" mat-raised-button color=\\\"primary\\\"\\r\\n                *ngIf=\\\"!inOut?.isConfirmed && (inOut?.managerUserId === currentUser?.id)\\\"\\r\\n                (click)=\\\"confirm()\\\">\\r\\n            <i class=\\\"fa fa-check\\\"></i>\\r\\n            <!--<i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSaving\\\"></i>-->\\r\\n            Xác nhận\\r\\n        </button>\\r\\n        <button type=\\\"button\\\" mat-raised-button nh-dismiss=\\\"true\\\">\\r\\n            <i class=\\\"fa fa-times\\\"></i>\\r\\n            Đóng lại\\r\\n        </button>\\r\\n    </nh-modal-footer>\\r\\n</nh-modal>\\r\\n\"","import { Component, Inject, OnInit, ViewChild } from '@angular/core';\r\nimport * as _ from 'lodash';\r\nimport * as moment from 'moment';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { BaseComponent } from '../../../base.component';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { debounceTime, distinctUntilChanged, map } from 'rxjs/operators';\r\nimport { Location, LocationStrategy, PathLocationStrategy } from '@angular/common';\r\nimport { IActionResultResponse } from '../../../interfaces/iaction-result-response.result';\r\nimport { SpinnerService } from '../../../core/spinner/spinner.service';\r\nimport { NumberValidator } from '../../../validators/number.validator';\r\nimport { DestroySubscribers } from '../../../shareds/decorator/destroy-subscribes.decorator';\r\nimport { NhModalComponent } from '../../../shareds/components/nh-modal/nh-modal.component';\r\nimport { InLateOutEarlyShift, InOut } from './in-out.model';\r\nimport { UserSuggestion } from '../../../shareds/components/ghm-user-suggestion/ghm-user-suggestion.component';\r\nimport { IPageId, PAGE_ID } from '../../../configs/page-id.config';\r\nimport { AppService } from '../../../shareds/services/app.service';\r\nimport { UtilService } from '../../../shareds/services/util.service';\r\nimport { UserService } from '../../hr/user/services/user.service';\r\nimport { TimekeepingInOutService } from './timekeeping-in-out.service';\r\nimport { TimekeepingConfigService } from '../config/timekeeping-config.service';\r\nimport { TimekeepingWorkScheduleService } from '../config/work-schedule/timekeeping-work-schedule.service';\r\nimport { NhSelectData } from '../../../shareds/components/nh-select/nh-select.component';\r\nimport {\r\n    InLateOutEarlyUpdateApproveStatusModel,\r\n    InLateOutEarlyUpdateApproveStatusShiftModel\r\n} from './in-late-out-early-update-approve-status.model';\r\nimport { FilterLink } from '../../../shareds/models/filter-link.model';\r\nimport { finalize } from 'rxjs/internal/operators';\r\nimport { CheckPermission } from '../../../shareds/decorator/check-permission.decorator';\r\n\r\n@Component({\r\n    selector: 'app-timkeeping-in-out',\r\n    templateUrl: './timekeeping-in-out.component.html',\r\n    providers: [Location, {provide: LocationStrategy, useClass: PathLocationStrategy},\r\n        NumberValidator]\r\n})\r\n\r\n\r\n@DestroySubscribers()\r\n@CheckPermission()\r\nexport class TimekeepingInOutComponent extends BaseComponent implements OnInit {\r\n    @ViewChild('formModal') formModal: NhModalComponent;\r\n    @ViewChild('detailModal') detailModal: NhModalComponent;\r\n\r\n    private _isInLate = false;\r\n    private _isOutEarly = false;\r\n    listShift = [];\r\n    listInOut$: Observable<InOut[]>;\r\n    type = 0;\r\n    isGettingDetail = false;\r\n    month: number;\r\n    year: number;\r\n    userId: string;\r\n    isConfirm: boolean;\r\n    listMonth = [];\r\n    listYear = [];\r\n    listUserSuggestion: UserSuggestion[];\r\n\r\n    inOut = new InOut();\r\n    shift = new InLateOutEarlyShift();\r\n    model: FormGroup;\r\n    selectedUser: UserSuggestion;\r\n    maxInOutMin = 0;\r\n    maxInOutTimes = 0;\r\n    totalApprovedTimes = 0;\r\n    isSearchingUser = false;\r\n\r\n    STATUS = {\r\n        WAITING_MANAGER_APPROVE: 0,\r\n        MANAGER_APPROVE: 1,\r\n        MANAGER_DECLINE: 2\r\n    };\r\n\r\n    userSuggestionKeyword$ = new Subject<string>();\r\n\r\n    shiftFormError: any;\r\n    shiftValidationMessage: any;\r\n    totalApprovedInLateOutEarly: number;\r\n\r\n    get shifts(): FormArray {\r\n        return <FormArray>this.model.get('shifts');\r\n    }\r\n\r\n    constructor(@Inject(PAGE_ID) pageId: IPageId,\r\n                private location: Location,\r\n                private title: Title,\r\n                private route: ActivatedRoute,\r\n                private fb: FormBuilder,\r\n                private toastr: ToastrService,\r\n                private appService: AppService,\r\n                private numberValidators: NumberValidator,\r\n                private utilService: UtilService,\r\n                private userService: UserService,\r\n                private spinnerService: SpinnerService,\r\n                private inOutService: TimekeepingInOutService,\r\n                private timekeepingConfigService: TimekeepingConfigService,\r\n                private workscheduleService: TimekeepingWorkScheduleService) {\r\n        super();\r\n        this.title.setTitle('Danh sách đăng ký đi muộn về sớm.');\r\n        this.appService.setupPage(pageId.HR, pageId.TIMEKEEPING_IN_LATE_OUT_EARLY, 'Chấm công', 'Danh sách đăng ký đi muộn về sớm.');\r\n        // this.getPermission(this.appService);\r\n        // this.currentUser = this.appService.currentUser;\r\n\r\n        this.userSuggestionKeyword$\r\n            .pipe(debounceTime(500),\r\n                distinctUntilChanged())\r\n            .subscribe(keyword => {\r\n                // TODO: Check this later.\r\n                // this.subscribers.searchUserSuggestion = this.userService.searchForSuggestion(keyword, '', 1, 20)\r\n                //     .finally(() => this.isSearchingUser = false)\r\n                //     .subscribe((result: any) => {\r\n                //         // this.listUserSuggestion = result.users.map(user => new UserSuggestion(user.id, user.fullName,\r\n                //         //     user.titleId, user.titleName, user.officeId, user.officeName, user.image));\r\n                //     });\r\n            });\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.subscribers.queryParams = this.route.queryParams.subscribe(params => {\r\n            if (params.type) {\r\n                this.type = parseInt(params.type);\r\n            }\r\n            if (params.id) {\r\n                this.detailModal.show();\r\n                this.getDetail(params.id);\r\n            }\r\n            if (params.showRegister) {\r\n                setTimeout(() => {\r\n                    this.isUpdate = false;\r\n                    this.formModal.show();\r\n                });\r\n            }\r\n        });\r\n        this.subscribers.listShift = this.workscheduleService.getMyWorkScheduleShift()\r\n            .subscribe((result: any) => {\r\n                _.each(result, (myWorkScheduleShift: any) => {\r\n                    this.listShift = [...this.listShift, new NhSelectData(myWorkScheduleShift.id, myWorkScheduleShift\r\n                        .reportName, myWorkScheduleShift)];\r\n                });\r\n            });\r\n        this.listInOut$ = this.route.data\r\n            .pipe(map((result: { data: any }) => {\r\n                const searchResult = result.data;\r\n                return searchResult.items;\r\n            }));\r\n        this.utilService.initListMonth().forEach((month) => {\r\n            this.listMonth = [...this.listMonth, {id: month, name: `Tháng ${month}`}];\r\n        });\r\n        this.utilService.initListYear().forEach((year) => {\r\n            this.listYear = [...this.listYear, {id: year, name: `Năm ${year}`}];\r\n        });\r\n        this.month = new Date().getMonth() + 1;\r\n        this.year = new Date().getFullYear();\r\n        this.buildForm();\r\n        this.subscribers.timekeepingConfigs = this.timekeepingConfigService.getGeneralConfig()\r\n            .subscribe((result: any) => {\r\n                const maxMin = _.find(result, (item: any) => {\r\n                    return item.key === 'Clinic.TimeKeeping.Models.MaxInOutMin';\r\n                });\r\n                const maxTimes = _.find(result, (item: any) => {\r\n                    return item.key === 'Clinic.TimeKeeping.Models.MaxInOutTimes';\r\n                });\r\n                if (maxMin) {\r\n                    this.maxInOutMin = maxMin.value;\r\n                }\r\n                if (maxTimes) {\r\n                    this.maxInOutTimes = maxTimes.value;\r\n                }\r\n            });\r\n\r\n        // Get total approved times\r\n        this.getTotalApprovedTimes(this.currentUser.id);\r\n    }\r\n\r\n    onChangeIsInLate(shiftModel: FormGroup) {\r\n        shiftModel.patchValue({isInLate: !shiftModel.value.isInLate});\r\n    }\r\n\r\n    onSelectUser(user: any) {\r\n        this.model.patchValue({userId: user.id});\r\n        this.getTotalApprovedTimes(user.id);\r\n    }\r\n\r\n    onRemoveUser() {\r\n        this.model.patchValue({userId: null});\r\n    }\r\n\r\n    onUserSuggestionKeyUp(keyword: string) {\r\n        this.userSuggestionKeyword$.next(keyword);\r\n    }\r\n\r\n    onFormModalHidden() {\r\n        const shiftLength = this.shifts.length;\r\n        for (let i = 0; i < shiftLength; i++) {\r\n            this.shifts.removeAt(0);\r\n        }\r\n        this.model.reset();\r\n    }\r\n\r\n    addNewMethod() {\r\n        const shiftModel = this.buildShiftForm();\r\n        this.shifts.push(shiftModel);\r\n    }\r\n\r\n    removeMethod(index: number) {\r\n        this.shifts.removeAt(index);\r\n    }\r\n\r\n    changeType(type) {\r\n        this.type = type;\r\n        this.search(1);\r\n    }\r\n\r\n    showRegisterForm() {\r\n        this.isUpdate = false;\r\n        this.model.reset(new InOut());\r\n        this.formModal.show();\r\n    }\r\n\r\n    edit(inOut: InOut) {\r\n        this.isUpdate = true;\r\n        this.inOut = inOut;\r\n        // TODO: Check this later.\r\n        // this.selectedUser = new UserSuggestion(inOut.userId, inOut.fullName, inOut.titleId, inOut.titleName, inOut.officeId,\r\n        //     inOut.officeName, inOut.avatar);\r\n        this.model.patchValue(inOut);\r\n        setTimeout(() => {\r\n            _.each(this.inOut.shifts, (shift: InLateOutEarlyShift) => {\r\n                const shiftModel = this.buildShiftForm();\r\n                shiftModel.patchValue({\r\n                    shiftId: shift.shiftId,\r\n                    shiftCode: shift.shiftCode,\r\n                    isInLate: shift.isInLate,\r\n                    totalMin: shift.totalMin,\r\n                    reason: shift.reason\r\n                });\r\n                this.shifts.push(shiftModel);\r\n            });\r\n            this.formModal.show();\r\n        }, 100);\r\n\r\n    }\r\n\r\n    detail(inOut: InOut) {\r\n        _.each(inOut.shifts, (shift: InLateOutEarlyShift) => {\r\n            shift.timeText = this.utilService.addTimeToTimeObject(shift.isInLate\r\n                ? shift.startTime : shift.endTime, shift.totalMin, shift.isInLate);\r\n        });\r\n        this.inOut = inOut;\r\n        this.detailModal.show();\r\n    }\r\n\r\n    getDetail(id: string) {\r\n        this.isGettingDetail = true;\r\n        this.subscribers.getInOutDetail = this.inOutService.getDetail(id)\r\n            .pipe(finalize(() => this.isGettingDetail = false))\r\n            .subscribe((result: { info: InOut, totalApprovedInLateOutEarly: number }) => {\r\n                _.each(result.info.shifts, (shift: InLateOutEarlyShift) => {\r\n                    shift.timeText = this.utilService.addTimeToTimeObject(shift.startTime, shift.totalMin, shift.isInLate);\r\n                });\r\n                this.inOut = result.info;\r\n                this.totalApprovedInLateOutEarly = result.totalApprovedInLateOutEarly;\r\n            });\r\n    }\r\n\r\n    delete(inOut: InOut) {\r\n        // swal({\r\n        //     title: '',\r\n        //     text: `Bạn có chắc chắn muốn xóa bản đăng ký thời gian xin đi trễ về sớm này`,\r\n        //     type: 'warning',\r\n        //     showCancelButton: true,\r\n        //     confirmButtonColor: '#DD6B55',\r\n        //     confirmButtonText: 'Đồng ý',\r\n        //     cancelButtonText: 'Hủy bỏ'\r\n        // }).then(() => {\r\n        //     this.inOutService.delete(inOut.id).subscribe(result => {\r\n        //         this.toastr.success(this.formatString(this.message.deleteSuccess, 'đăng ký đi trễ về sớm'));\r\n        //         this.inOut.isConfirmed = true;\r\n        //         this.inOut.confirmDateTime = moment().toISOString();\r\n        //         this.search(this.currentPage);\r\n        //     });\r\n        // }, () => {\r\n        //\r\n        // });\r\n    }\r\n\r\n    search(currentPage: number) {\r\n        this.currentPage = currentPage;\r\n        this.renderFilterLink();\r\n        this.spinnerService.show();\r\n        this.listInOut$ = this.inOutService.search(this.month, this.year, this.type, this.userId, this.isConfirm,\r\n            this.currentPage, this.pageSize)\r\n            .pipe(finalize(() => this.spinnerService.hide()),\r\n                map((result: { items: InOut[], totalRows: number }) => {\r\n                    this.totalRows$ = new Observable(observable => observable.next(result.totalRows));\r\n                    return result.items;\r\n                }));\r\n    }\r\n\r\n    save() {\r\n        const isValid = this.utilService.onValueChanged(this.model, this.formErrors, this.validationMessages, true);\r\n        if (isValid) {\r\n            // Kiểm tra ca đăng ký có bị lặp không.\r\n            this.inOut = this.model.value;\r\n            if (this.shifts.length === 0) {\r\n                this.toastr.error('Vui lòng chọn ít nhất một hình thức đi muộn hoặc về sớm.');\r\n                return;\r\n            }\r\n            this.spinnerService.show();\r\n            if (this.isUpdate) {\r\n                this.inOutService.update(this.inOut)\r\n                    .pipe(finalize(() => this.spinnerService.hide()))\r\n                    .subscribe((result: IActionResultResponse) => {\r\n                        this.toastr.success(result.message);\r\n                        this.model.reset(new InOut());\r\n                        this.search(1);\r\n                        this.formModal.dismiss();\r\n                    });\r\n            } else {\r\n                this.inOutService.insert(this.inOut)\r\n                    .pipe(finalize(() => this.spinnerService.hide()))\r\n                    .subscribe((result: IActionResultResponse) => {\r\n                        this.toastr.success(result.message);\r\n                        this.model.reset();\r\n                        this.search(1);\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    approve(shift: InLateOutEarlyShift, isApprove: boolean) {\r\n        if (!isApprove) {\r\n            // swal({\r\n            //     input: 'textarea',\r\n            //     inputPlaceholder: 'Vui lòng nhập lý do không duyệt.',\r\n            //     showCancelButton: true,\r\n            //     confirmButtonColor: '#DD6B55',\r\n            //     confirmButtonText: 'Đồng ý',\r\n            //     cancelButtonText: 'Hủy bỏ'\r\n            // }).then((text) => {\r\n            //     if (text) {\r\n            //         shift.isApprove = isApprove;\r\n            //         shift.declineReason = text;\r\n            //     }\r\n            // }, () => {\r\n            // });\r\n        } else {\r\n            shift.isApprove = true;\r\n        }\r\n    }\r\n\r\n    confirm() {\r\n        const inLateOutEarlyUpdateApproveStatus = new InLateOutEarlyUpdateApproveStatusModel();\r\n        inLateOutEarlyUpdateApproveStatus.id = this.inOut.id;\r\n        inLateOutEarlyUpdateApproveStatus.shifts = this.inOut.shifts.map((shift: InLateOutEarlyShift) => {\r\n            return new InLateOutEarlyUpdateApproveStatusShiftModel(shift.shiftId, shift.isInLate, shift.isApprove, shift.declineReason);\r\n        });\r\n\r\n        const totalUnApproveInValidCount = _.countBy(inLateOutEarlyUpdateApproveStatus.shifts,\r\n            (shift: InLateOutEarlyUpdateApproveStatusShiftModel) => {\r\n                return !shift.isApprove && !shift.declineReason;\r\n            }).true;\r\n\r\n        if (totalUnApproveInValidCount > 0) {\r\n            this.toastr.error('Vui lòng nhập nội dung không duyệt.');\r\n            return;\r\n        }\r\n\r\n        this.spinnerService.show();\r\n        this.inOutService.approve(inLateOutEarlyUpdateApproveStatus)\r\n            .pipe(finalize(() => this.spinnerService.hide()))\r\n            .subscribe((result: IActionResultResponse) => {\r\n                this.toastr.success(result.message);\r\n                this.inOut.isConfirmed = true;\r\n                this.inOut.confirmDateTime = moment().toISOString();\r\n\r\n                // Research list in late out early.\r\n                this.search(this.currentPage);\r\n            });\r\n    }\r\n\r\n    getTotalApprovedTimes(userId: string) {\r\n        this.subscribers.getTotalApprovedTimes = this.inOutService.getTotalApprovedTimes(userId, moment().month() + 1, moment().year())\r\n            .subscribe(totalApprovedTimes => {\r\n                if (totalApprovedTimes === -1) {\r\n                    this.toastr.error('Bạn không có quyền thực hiện chức năng này.');\r\n                }\r\n                this.totalApprovedTimes = totalApprovedTimes;\r\n            });\r\n    }\r\n\r\n    private buildShiftForm() {\r\n        const shiftForm = this.fb.group({\r\n            'isInLate': [this.shift.isInLate, [\r\n                Validators.required\r\n            ]],\r\n            'shiftId': [this.shift.shiftId, [\r\n                Validators.required\r\n            ]],\r\n            'startTime': [this.shift.startTime],\r\n            'endTime': [this.shift.endTime],\r\n            'totalMin': [this.shift.totalMin, [\r\n                Validators.required,\r\n                this.numberValidators.isValid\r\n            ]],\r\n            'reason': [this.shift.reason, [\r\n                Validators.required,\r\n                Validators.maxLength(500)\r\n            ]],\r\n            'timeText': [this.shift.timeText]\r\n        });\r\n        this.model.valueChanges.subscribe(() => this.utilService.onValueChanged(shiftForm, this.formErrors, this.validationMessages));\r\n        return shiftForm;\r\n    }\r\n\r\n    private buildForm() {\r\n        this.model = this.fb.group({\r\n            'id': [this.inOut.id],\r\n            'userId': [this.inOut.userId],\r\n            'registerDate': [this.inOut.registerDate, [\r\n                Validators.required\r\n            ]],\r\n            'shifts': this.fb.array([])\r\n        });\r\n\r\n        this.formErrors = this.utilService.renderFormError([\r\n            'registerDate',\r\n            {'shifts': ['shiftId', 'totalMin', 'reason']}\r\n        ]);\r\n        this.validationMessages = {\r\n            'registerDate': {\r\n                'required': 'Vui lòng chọn ngày xin đi trễ về sớm.'\r\n            },\r\n            'shifts': {\r\n                'shiftId': {\r\n                    'required': 'Vui lòng chọn ca làm việc',\r\n                },\r\n                'totalMin': {\r\n                    'required': 'Vui lòng nhập số phút xin đi muộn về sớm.',\r\n                    'isValid': 'Số phút xin đi muộn về sớm phải là số.'\r\n                },\r\n                'reason': {\r\n                    'required': 'Vui lòng nhập lý do xin đi muộn về sớm.',\r\n                    'maxlength': 'Lý do xin đi muộn về sớm không được phép vượt quá 500 ký tự.'\r\n                },\r\n            }\r\n        };\r\n        this.model.valueChanges.subscribe(() => this.utilService.onValueChanged(this.model, this.formErrors, this.validationMessages));\r\n    }\r\n\r\n    private getStatusText(status: number) {\r\n        return status === this.STATUS.WAITING_MANAGER_APPROVE ? 'Chờ QLTT phê duyệt'\r\n            : status === this.STATUS.MANAGER_APPROVE ? 'QLTT đã duyệt' : 'QLTT không duyệt';\r\n    }\r\n\r\n    private renderFilterLink() {\r\n        const path = '/timekeeping/in-out';\r\n        const query = this.utilService.renderLocationFilter([\r\n            new FilterLink('type', this.type),\r\n            new FilterLink('month', this.month),\r\n            new FilterLink('year', this.year),\r\n            new FilterLink('userId', this.userId)\r\n        ]);\r\n\r\n        this.location.go(path, query);\r\n    }\r\n\r\n    private initShiftValidators() {\r\n        const validators = {\r\n            totalMin: [\r\n                Validators.required,\r\n                this.numberValidators.isValid\r\n            ],\r\n            reason: [\r\n                Validators.required\r\n            ]\r\n        };\r\n        return validators;\r\n    }\r\n\r\n    private initShiftValidatorMessage() {\r\n        const validatorMessage = {\r\n            'totalMin': {\r\n                'required': 'Số phút không được để trống.',\r\n                'isValid': 'Số phút phải là số'\r\n            },\r\n            'reason': {\r\n                'required': 'Lý do không được để trống'\r\n            }\r\n        };\r\n\r\n        return validatorMessage;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { ActivatedRouteSnapshot, Resolve } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { InOut } from './in-out.model';\r\nimport { InLateOutEarlyUpdateApproveStatusModel } from './in-late-out-early-update-approve-status.model';\r\n\r\n@Injectable()\r\nexport class TimekeepingInOutService implements Resolve<any> {\r\n    url = 'in-out/';\r\n\r\n    constructor(private http: HttpClient) {\r\n    }\r\n\r\n    resolve(route: ActivatedRouteSnapshot, state: Object) {\r\n        const params = route.queryParams;\r\n        return this.search(params.month, params.year, params.type, params.userId, params.status, params.page, params.pageSize);\r\n    }\r\n\r\n    search(month: number, year: number, type: number, userId: string, isConfirm?: boolean, page = 1, pageSize = 20) {\r\n        return this.http.get<{ items: InOut[], totalRows: number }>(`${this.url}search`, {\r\n            params: new HttpParams()\r\n                .set('month', month ? month.toString() : (new Date().getMonth() + 1).toString())\r\n                .set('year', year ? year.toString() : (new Date().getFullYear()).toString())\r\n                .set('type', type != null && type !== undefined ? type.toString() : '0')\r\n                .set('userId', userId ? userId : '')\r\n                .set('isConfirm', isConfirm != null && isConfirm !== undefined ? isConfirm.toString() : '')\r\n                .set('page', page ? page.toString() : '1')\r\n                .set('pageSize', pageSize ? pageSize.toString() : '20')\r\n        });\r\n    }\r\n\r\n    insert(inOut: InOut) {\r\n        return this.http.post(`${this.url}insert`, inOut);\r\n    }\r\n\r\n    update(inOut: InOut) {\r\n        return this.http.post(`${this.url}update`, inOut);\r\n    }\r\n\r\n    delete(id: string) {\r\n        return this.http.delete(`${this.url}delete`, {\r\n            params: new HttpParams().set('id', id)\r\n        });\r\n    }\r\n\r\n    approve(inLateOutEarly: InLateOutEarlyUpdateApproveStatusModel) {\r\n        return this.http.post(`${this.url}approve`, inLateOutEarly);\r\n    }\r\n\r\n    getDetail(id: string) {\r\n        return this.http.get(`${this.url}get-detail`, {\r\n            params: new HttpParams().set('id', id)\r\n        });\r\n    }\r\n\r\n    getTotalApprovedTimes(userId: string, month: number, year: number): Observable<number> {\r\n        return this.http.get(`${this.url}get-total-approved-times`, {\r\n            params: new HttpParams()\r\n                .set('userId', userId)\r\n                .set('month', month.toString())\r\n                .set('year', year.toString())\r\n        }) as Observable<number>;\r\n    }\r\n}\r\n","import { TimeObject } from '../../../shareds/models/time-object.model';\r\n\r\nexport class OvertimeRegister {\r\n    id: string;\r\n    registerDate: string;\r\n    userId: string;\r\n    fullName: string;\r\n    officeId: number;\r\n    officeName: string;\r\n    officeIdPath: string;\r\n    titleId: number;\r\n    titleName: string;\r\n    note?: string;\r\n    totalMinutes: number;\r\n    totalMinutesText: string;\r\n    createTime: string;\r\n    isApprove: boolean;\r\n    registerTime: string;\r\n    status: number;\r\n    statusText: string;\r\n    from?: TimeObject;\r\n    to?: TimeObject;\r\n    type: number;\r\n    typeText: string;\r\n    managerUserId: string;\r\n    declineReason: string;\r\n    shiftId: string;\r\n    shiftReportName: string;\r\n\r\n    constructor() {\r\n        this.from = new TimeObject();\r\n        this.to = new TimeObject();\r\n        this.totalMinutes = 0;\r\n    }\r\n}\r\n","module.exports = \"<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <form action=\\\"\\\" class=\\\"form-inline\\\" (ngSubmit)=\\\"search(1)\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Vui lòng nhập tên nhân viên cần tìm\\\"\\r\\n                       (keyup)=\\\"keyword = keywordInput.value\\\" #keywordInput/>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <nh-select [data]=\\\"listMonth\\\" [title]=\\\"'-- Chọn tháng'\\\"\\r\\n                           (onSelectItem)=\\\"onSelectMonth($event)\\\"></nh-select>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <nh-select [data]=\\\"listYear\\\" [title]=\\\"'-- Chọn năm --'\\\"\\r\\n                           (onSelectItem)=\\\"onSelectYear($event)\\\"></nh-select>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <button class=\\\"btn blue\\\">\\r\\n                    <i class=\\\"fa-spinner fa-pulse\\\" *ngIf=\\\"isSearching\\\"></i>\\r\\n                    <i class=\\\"fa fa-search\\\" *ngIf=\\\"!isSearching\\\"></i>\\r\\n                </button>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <button class=\\\"btn blue\\\" (click)=\\\"showRegisterFormModal()\\\">\\r\\n                    <i class=\\\"fa fa-plus\\\"></i>\\r\\n                    Đăng ký\\r\\n                </button>\\r\\n            </div>\\r\\n        </form>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <div class=\\\"table-responsive\\\">\\r\\n            <table class=\\\"table table-bordered table-hover table-striped\\\">\\r\\n                <thead>\\r\\n                <tr>\\r\\n                    <th class=\\\"center w50\\\">#</th>\\r\\n                    <th class=\\\"center\\\">Nhân viên</th>\\r\\n                    <th class=\\\"center\\\">Ngày đăng ký</th>\\r\\n                    <th class=\\\"center\\\">Thời gian thêm giờ</th>\\r\\n                    <th class=\\\"center w100\\\">Trạng thái</th>\\r\\n                    <th class=\\\"center\\\">Hành động</th>\\r\\n                </tr>\\r\\n                </thead>\\r\\n                <tbody>\\r\\n                <tr *ngFor=\\\"let item of listOvertimeRegisters\\\">\\r\\n                    <td class=\\\"center\\\">{{(currentPage - 1) * pageSize + i + 1}}</td>\\r\\n                    <td>{{item.fullName}}</td>\\r\\n                    <td>{{item.registerTime | dateTimeFormat:'DD/MM/YYYY HH:mm'}}</td>\\r\\n                    <td>{{item.totalMinutes}}</td>\\r\\n                    <td>{{item.statusText}}</td>\\r\\n                    <td>\\r\\n                        <div class=\\\"btn-group btn-group-circle btn-group-solid\\\"\\r\\n                             *ngIf=\\\"currentUser?.id === item.managerUserId && item.status === STATUS.WAITING_FOR_MANAGER_APRPOVE; else readOnlyTemplate\\\">\\r\\n                            <button type=\\\"button\\\" class=\\\"btn red btn-outline\\\"\\r\\n                                    (click)=\\\"approve(item, false)\\\">\\r\\n                                <i class=\\\"fa fa-times\\\"></i>\\r\\n                            </button>\\r\\n                            <button type=\\\"button\\\" class=\\\"btn green btn-outline\\\"\\r\\n                                    (click)=\\\"approve(item, true)\\\">\\r\\n                                <i class=\\\"fa fa-check\\\"></i>\\r\\n                            </button>\\r\\n                            <button type=\\\"button\\\" class=\\\"btn blue btn-outline\\\" (click)=\\\"detail(item)\\\"><i\\r\\n                                class=\\\"fa fa-eye\\\"></i></button>\\r\\n                        </div>\\r\\n\\r\\n                        <ng-template #readOnlyTemplate>\\r\\n                            <button type=\\\"button\\\" class=\\\"btn blue outline\\\" (click)=\\\"showDetail(item)\\\"><i\\r\\n                                class=\\\"fa fa-eye\\\"></i></button>\\r\\n                        </ng-template>\\r\\n                    </td>\\r\\n                </tr>\\r\\n                </tbody>\\r\\n            </table>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<nh-modal #registerFormModal>\\r\\n    <nh-modal-header>\\r\\n        <h4 class=\\\"title\\\">\\r\\n            <i class=\\\"fa fa-calendar\\\"></i>\\r\\n            {{isUpdate ? 'Cập nhật thông tin đăng ký làm thêm giờ.' : 'Thêm mới ca làm thêm giờ.'}}\\r\\n        </h4>\\r\\n    </nh-modal-header>\\r\\n    <form action=\\\"\\\" class=\\\"form-horizontal\\\" (ngSubmit)=\\\"save()\\\">\\r\\n        <nh-modal-content>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Chọn nhân viên\\\" class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Chọn ca làm việc\\\" class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Số giờ làm thêm\\\" class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Ghi chú\\\" class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                    <textarea class=\\\"form-control\\\" rows=\\\"3\\\" placeholder=\\\"Nội dung ghi chú\\\"></textarea>\\r\\n                </div>\\r\\n            </div>\\r\\n        </nh-modal-content>\\r\\n    </form>\\r\\n    <nh-modal-footer></nh-modal-footer>\\r\\n</nh-modal>\\r\\n\\r\\n<nh-modal #detailModal>\\r\\n    <nh-modal-header>\\r\\n        <h4 class=\\\"title\\\">\\r\\n            <i class=\\\"fa fa-register\\\"></i>\\r\\n            Chi tiết đăng ký làm thêm giờ của nhân viên: \\\"{{overtimeRegister?.fullName}}\\\"\\r\\n        </h4>\\r\\n    </nh-modal-header>\\r\\n    <form action=\\\"\\\" class=\\\"form-horizontal\\\" (ngSubmit)=\\\"save()\\\">\\r\\n        <nh-modal-content>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"\\r\\n                       ghmLabel=\\\"Chọn nhân viên\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"\\r\\n                       ghmLabel=\\\"Chọn ca làm việc\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"\\r\\n                       ghmLabel=\\\"Số giờ làm thêm\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"\\r\\n                       ghmLabel=\\\"Ghi chú\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                    <textarea class=\\\"form-control\\\" rows=\\\"3\\\" placeholder=\\\"Nội dung ghi chú\\\"></textarea>\\r\\n                </div>\\r\\n            </div>\\r\\n        </nh-modal-content>\\r\\n    </form>\\r\\n    <nh-modal-footer></nh-modal-footer>\\r\\n</nh-modal>\\r\\n\"","import { Component, Inject, OnInit, ViewChild } from '@angular/core';\r\nimport { BaseComponent } from '../../../base.component';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Title } from '@angular/platform-browser';\r\nimport swal from 'sweetalert2';\r\nimport { NhModalComponent } from '../../../shareds/components/nh-modal/nh-modal.component';\r\nimport { OvertimeRegister } from './overtime-register.model';\r\nimport { IPageId, PAGE_ID } from '../../../configs/page-id.config';\r\nimport { AppService } from '../../../shareds/services/app.service';\r\nimport { UtilService } from '../../../shareds/services/util.service';\r\nimport { CheckPermission } from '../../../shareds/decorator/check-permission.decorator';\r\n\r\n@Component({\r\n    selector: 'app-timekeeping-overtime-register',\r\n    templateUrl: './timekeeping-overtime-register.component.html',\r\n})\r\n@CheckPermission()\r\nexport class TimekeepingOvertimeRegisterComponent extends BaseComponent implements OnInit {\r\n    @ViewChild('registerFormModal') registerFormModal: NhModalComponent;\r\n    @ViewChild('detailModal') detailModal: NhModalComponent;\r\n    listMonth = [];\r\n    listYear = [];\r\n    overtimeRegister = new OvertimeRegister();\r\n    listOvertimeRegisters: OvertimeRegister[] = [];\r\n    model: FormGroup;\r\n\r\n\r\n    STATUS = {\r\n        WAITING_FOR_MANAGER_APRPOVE: 0,\r\n        MANAGER_APPROVE: 1,\r\n        MANAGER_DECLINE: 2\r\n    };\r\n\r\n    constructor( @Inject(PAGE_ID) pageId: IPageId,\r\n        private title: Title,\r\n        private fb: FormBuilder,\r\n        private appService: AppService,\r\n        private utilService: UtilService) {\r\n        super();\r\n        this.title.setTitle('Danh sách làm thêm giờ.');\r\n        this.appService.setupPage(pageId.HR, pageId.TIMEKEEPING_OVERTIME, 'Chấm công', 'Danh sách làm thêm giờ.');\r\n        // this.getPermission(this.appService);\r\n        // this.currentUser = this.appService.currentUser;\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.renderFormValidation();\r\n        this.builForm();\r\n\r\n        this.listMonth = this.utilService.initListMonth();\r\n        this.listYear = this.utilService.initListYear();\r\n    }\r\n\r\n    search(currentPage: number) {\r\n        this.currentPage = currentPage;\r\n        this.isSearching = true;\r\n    }\r\n\r\n    edit(overtimeRegister: OvertimeRegister) {\r\n        this.model.patchValue(overtimeRegister);\r\n        this.registerFormModal.show();\r\n    }\r\n\r\n    detail(overtimeRegister: OvertimeRegister) {\r\n        this.overtimeRegister = overtimeRegister;\r\n        this.detailModal.show();\r\n    }\r\n\r\n    delete(overtimeRegister: OvertimeRegister) {\r\n\r\n    }\r\n\r\n    approve(overtimeRegister: OvertimeRegister, isApprove: boolean) {\r\n        if (!isApprove) {\r\n            swal({\r\n                title: `Bạn có chắc chắn muốn không duyệt cho đơn đăng ký làm thêm giờ của: \"${overtimeRegister.fullName}\"`,\r\n                text: 'Lưu ý: sau khi xóa bạn không thể lấy lại được người dùng này.',\r\n                type: 'warning',\r\n                showCancelButton: true,\r\n                confirmButtonColor: '#DD6B55',\r\n                confirmButtonText: 'Đồng ý',\r\n                cancelButtonText: 'Hủy bỏ'\r\n            }).then(() => {\r\n                swal({\r\n                    input: 'textarea',\r\n                    inputPlaceholder: 'Vui lòng cho biết lý do vì sao không duyệt!',\r\n                    showCancelButton: true,\r\n                    confirmButtonText: 'Gửi',\r\n                    cancelButtonText: 'Hủy bỏ'\r\n                }).then(function(text) {\r\n                    if (text) {\r\n                        this.updateApproveStatus(overtimeRegister.id, isApprove);\r\n                    }\r\n                });\r\n            }, () => {\r\n            });\r\n        } else {\r\n            this.updateApproveStatus(overtimeRegister.id, isApprove);\r\n        }\r\n    }\r\n\r\n    save() {\r\n        this.overtimeRegister = this.model.value;\r\n        const isValid = this.utilService.onValueChanged(this.model, this.formErrors, this.validationMessages);\r\n        if (isValid) {\r\n            if (this.isUpdate) {\r\n\r\n            } else {\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    onSelectYear(value) {\r\n\r\n    }\r\n\r\n    onSelectMonth(value) {\r\n\r\n    }\r\n\r\n    showRegisterFormModal() {\r\n\r\n    }\r\n\r\n    private updateApproveStatus(id: string, isApprove: boolean, note?: string) {\r\n        // this.overtimeRegisterService.approve(id, isApprove, note)\r\n        // .subscribe(() => this.toastr.success(isApprove ? 'Duyệt đăng ký làm thêm giờ thành công.' : 'Không duyệt đăng ký làm thêm giờ thành công.'));\r\n    }\r\n\r\n    private builForm() {\r\n        this.model = this.fb.group({\r\n            'userId': [this.overtimeRegister.userId, [\r\n                Validators.required\r\n            ]],\r\n            'note': [this.overtimeRegister.note, [\r\n                Validators.maxLength(500)\r\n            ]],\r\n            'totalMinutes': [this.overtimeRegister.totalMinutes, [\r\n                Validators.required\r\n            ]]\r\n        });\r\n        this.utilService.onValueChanged(this.model, this.formErrors, this.validationMessages);\r\n    }\r\n\r\n    private renderFormValidation() {\r\n        this.formErrors = this.utilService.renderFormError(['userId', 'shiftId', 'note']);\r\n        this.validationMessages = {\r\n            'userId': {\r\n                'required': 'Vui lòng chọn nhân viên làm thêm giờ.'\r\n            },\r\n            'shiftId': {\r\n                'required': 'Vui lòng chọn ca làm việc.'\r\n            },\r\n            'note': {\r\n                'maxLength': 'Ghi chú không được phép vượt quá 500 ký tự.'\r\n            }\r\n        };\r\n    }\r\n}\r\n","module.exports = \"<div class=\\\"row cm-mgb-10\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <div class=\\\"btn-group\\\" role=\\\"group\\\">\\r\\n            <button type=\\\"button\\\" class=\\\"btn btn-default\\\" [class.active]=\\\"type === 0\\\" (click)=\\\"changeType(0)\\\">\\r\\n                Đơn của tôi\\r\\n            </button>\\r\\n            <!--<button type=\\\"button\\\" class=\\\"btn btn-default\\\"-->\\r\\n                    <!--*ngIf=\\\"currentUser?.isLeader == 1 || currentUser?.isLeader == 2\\\"-->\\r\\n                    <!--[class.active]=\\\"type === 1\\\" (click)=\\\"changeType(1)\\\">-->\\r\\n                <!--Duyệt đăng ký-->\\r\\n            <!--</button>-->\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"row cm-mgb-10\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <form action=\\\"\\\" class=\\\"form-inline\\\" (ngSubmit)=\\\"search(1)\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Vui lòng nhập tên nhân viên cần tìm\\\"\\r\\n                       (keyup)=\\\"keyword = keywordInput.value\\\" #keywordInput/>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <nh-select\\r\\n                    title=\\\"-- Chọn tháng\\\"\\r\\n                    [data]=\\\"listMonth\\\"\\r\\n                    [value]=\\\"month\\\"\\r\\n                    (onSelectItem)=\\\"onSelectMonth($event)\\\"></nh-select>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <nh-select\\r\\n                    title=\\\"-- Chọn năm --\\\"\\r\\n                    [data]=\\\"listYear\\\"\\r\\n                    [value]=\\\"year\\\"\\r\\n                    (onSelectItem)=\\\"onSelectYear($event)\\\"></nh-select>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <nh-select\\r\\n                    title=\\\"-- Trạng thái --\\\"\\r\\n                    [data]=\\\"[{id: 0, name: 'Mới'},{id: 1, name: 'QLTT đã duyệt'},{id: 2, name: 'QLTT không duyệt'}]\\\"\\r\\n                    (onSelectItem)=\\\"onSelectStatus($event)\\\"></nh-select>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <button mat-raised-button color=\\\"primary\\\">\\r\\n                    <i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSearching\\\"></i>\\r\\n                    <i class=\\\"fa fa-search\\\" *ngIf=\\\"!isSearching\\\"></i>\\r\\n                </button>\\r\\n            </div>\\r\\n            <div class=\\\"form-group pull-right\\\">\\r\\n                <button type=\\\"button\\\" mat-raised-button color=\\\"primary\\\" (click)=\\\"showRegisterModal()\\\">\\r\\n                    <i class=\\\"fa fa-plus\\\"></i>\\r\\n                    Đăng ký\\r\\n                </button>\\r\\n            </div>\\r\\n        </form>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <div class=\\\"table-responsive\\\">\\r\\n            <table class=\\\"table table-bordered table-hover table-striped table-main\\\">\\r\\n                <thead>\\r\\n                <tr>\\r\\n                    <th class=\\\"center w50\\\">#</th>\\r\\n                    <th class=\\\"center\\\">Nhân viên</th>\\r\\n                    <th class=\\\"center\\\">Ngày đăng ký</th>\\r\\n                    <th class=\\\"center\\\">Thời gian thêm giờ</th>\\r\\n                    <th class=\\\"center w150\\\">Trạng thái</th>\\r\\n                    <th class=\\\"center\\\">Hành động</th>\\r\\n                </tr>\\r\\n                </thead>\\r\\n                <tbody>\\r\\n                <tr *ngFor=\\\"let item of $listOvertimeRegisters | async; let i = index\\\">\\r\\n                    <td class=\\\"center middle\\\">{{(currentPage - 1) * pageSize + i + 1}}</td>\\r\\n                    <td class=\\\"middle\\\">\\r\\n                        <a href=\\\"javascript://\\\" (click)=\\\"detail(item)\\\">{{item.fullName}}</a>\\r\\n                    </td>\\r\\n                    <td class=\\\"middle\\\">{{item.registerTime | dateTimeFormat:'DD/MM/YYYY HH:mm'}}</td>\\r\\n                    <td class=\\\"middle text-right\\\">{{item.totalMinutesText}}</td>\\r\\n                    <td class=\\\"middle\\\"\\r\\n                        [class.color-red]=\\\"item.status === STATUS.MANAGER_DECLINE\\\"\\r\\n                        [class.color-green]=\\\"item.status === STATUS.MANAGER_APPROVE\\\"\\r\\n                    >{{item.statusText}}\\r\\n                    </td>\\r\\n                    <td class=\\\"center middle w150\\\">\\r\\n                        <button type=\\\"button\\\" mat-mini-fab color=\\\"default\\\" (click)=\\\"detail(item)\\\"><i\\r\\n                            class=\\\"fa fa-eye\\\"></i></button>\\r\\n\\r\\n                        <ng-container\\r\\n                            *ngIf=\\\"currentUser?.id === item.managerUserId && item.status === STATUS.WAITING_MANAGER_APPROVE\\\">\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"primary\\\"\\r\\n                                    (click)=\\\"approve(item, true)\\\">\\r\\n                                <i class=\\\"fa fa-check\\\"></i>\\r\\n                            </button>\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"warn\\\"\\r\\n                                    (click)=\\\"approve(item, false)\\\">\\r\\n                                <i class=\\\"fa fa-times\\\"></i>\\r\\n                            </button>\\r\\n                        </ng-container>\\r\\n\\r\\n                        <ng-container\\r\\n                            *ngIf=\\\"currentUser?.id === item.userId && item.status === STATUS.WAITING_MANAGER_APPROVE\\\">\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"primary\\\" (click)=\\\"edit(item)\\\">\\r\\n                                <i class=\\\"fa fa-edit\\\"></i></button>\\r\\n                            <button type=\\\"button\\\" mat-mini-fab color=\\\"warn\\\" (click)=\\\"delete(item)\\\"><i\\r\\n                                class=\\\"fa fa-trash-o\\\"></i></button>\\r\\n                        </ng-container>\\r\\n                    </td>\\r\\n                </tr>\\r\\n                </tbody>\\r\\n            </table>\\r\\n        </div>\\r\\n    </div>\\r\\n    <ghm-paging [totalRows]=\\\"totalRows$ | async\\\" [currentPage]=\\\"currentPage\\\" [pageShow]=\\\"6\\\" (pageClick)=\\\"search($event)\\\"\\r\\n            [isDisabled]=\\\"isSearching\\\" [pageName]=\\\"'đăng ký làm thêm giờ'\\\"></ghm-paging>\\r\\n</div>\\r\\n\\r\\n<nh-modal #registerFormModal size=\\\"md\\\">\\r\\n    <nh-modal-header>\\r\\n        <h4 class=\\\"title\\\">\\r\\n            <i class=\\\"fa fa-icon-clock\\\"></i>\\r\\n            Đăng ký làm thêm giờ\\r\\n        </h4>\\r\\n    </nh-modal-header>\\r\\n    <form class=\\\"form-horizontal\\\" (ngSubmit)=\\\"save()\\\" [formGroup]=\\\"model\\\">\\r\\n        <nh-modal-content>\\r\\n            <div class=\\\"form-group\\\" *ngIf=\\\"(listShift$ | async)?.length === 0 || (listShift$ | async) == null\\\">\\r\\n                <div class=\\\"col-sm-12\\\">\\r\\n                    <div class=\\\"alert alert-danger\\\">\\r\\n                        Xin lỗi: Bạn chưa được cấu hình ca làm việc. Vui lòng liên hệ với bộ phận nhân sự để được trợ giúp.\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Ngày\\\" class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                    <nh-date\\r\\n                        title=\\\"Chọn thời gian\\\"\\r\\n                        formControlName=\\\"registerDate\\\"\\r\\n                        [type]=\\\"'inputButton'\\\"></nh-date>\\r\\n                    <div class=\\\"alert alert-danger\\\"\\r\\n                         *ngIf=\\\"formErrors.registerDate\\\">\\r\\n                        {{ formErrors.registerDate}}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Ca làm việc\\\" class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                    <div class=\\\"btn-group\\\" role=\\\"group\\\" *ngFor=\\\"let shift of listShift$ | async\\\">\\r\\n                        <button type=\\\"button\\\" class=\\\"btn btn-default\\\"\\r\\n                                [class.active]=\\\"model.value.shiftId === shift.id\\\"\\r\\n                                (click)=\\\"model.patchValue({shiftId: shift.id})\\\">{{shift.name}}\\r\\n                        </button>\\r\\n                    </div>\\r\\n                    <div class=\\\"alert alert-danger\\\"\\r\\n                         *ngIf=\\\"formErrors.shiftId\\\">\\r\\n                        {{ formErrors.shiftId}}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Từ\\\" class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-sm-4\\\">\\r\\n                    <div class=\\\"row\\\" formGroupName=\\\"from\\\">\\r\\n                        <div class=\\\"col-sm-12\\\">\\r\\n                            <div class=\\\"input-group-input\\\" role=\\\"group\\\">\\r\\n                                <input class=\\\"form-control w70\\\" formControlName=\\\"hour\\\" placeholder=\\\"Giờ\\\" type=\\\"text\\\">\\r\\n                                <span class=\\\"cm-pdt-10 cm-pdl-5 cm-pdr-5\\\">:</span>\\r\\n                                <input class=\\\"form-control w70\\\" formControlName=\\\"minute\\\" placeholder=\\\"Phút\\\" type=\\\"text\\\">\\r\\n                            </div>\\r\\n                            <div class=\\\"alert alert-danger\\\"\\r\\n                                 *ngIf=\\\"formErrors.from.hour || formErrors.from.minute\\\">\\r\\n                                {{ formErrors.from.hour }} {{ formErrors.from.minute }}\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <label ghmLabel=\\\"Đến\\\" class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-sm-4\\\">\\r\\n                    <div class=\\\"row\\\" formGroupName=\\\"to\\\">\\r\\n                        <div class=\\\"col-sm-12\\\">\\r\\n                            <div class=\\\"input-group-input\\\" role=\\\"group\\\">\\r\\n                                <input class=\\\"form-control w70\\\" formControlName=\\\"hour\\\" placeholder=\\\"Giờ\\\" type=\\\"text\\\">\\r\\n                                <span class=\\\"cm-pdt-10 cm-pdl-5 cm-pdr-5\\\">:</span>\\r\\n                                <input class=\\\"form-control w70\\\" formControlName=\\\"minute\\\" placeholder=\\\"Phút\\\" type=\\\"text\\\">\\r\\n                            </div>\\r\\n                            <div class=\\\"alert alert-danger\\\"\\r\\n                                 *ngIf=\\\"formErrors.to.hour || formErrors.to.minute\\\">\\r\\n                                {{ formErrors.to.hour }} {{ formErrors.to.minute }}\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <div class=\\\"col-md-10 col-sm-9 col-md-offset-2 col-sm-offset-3\\\">\\r\\n                    Tổng số phút: {{totalMinutes}}\\r\\n                    <span *ngIf=\\\"totalMinutes == ''\\\" class=\\\"color-red\\\">Giá trị thời gian \\\"từ\\\" không được phép lớn hơn giá trị thời gian \\\"đến\\\"</span>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"Hình thức\\\" class=\\\"col-md-2 col-sm-3 control-label\\\" [required]=\\\"true\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                    <nh-select\\r\\n                        title=\\\"-- Chọn hình thức làm thêm --\\\"\\r\\n                        [data]=\\\"listType\\\"\\r\\n                        formControlName=\\\"type\\\">\\r\\n                    </nh-select>\\r\\n                    <div class=\\\"alert alert-danger\\\"\\r\\n                         *ngIf=\\\"formErrors.type\\\">\\r\\n                        {{ formErrors.type}}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label ghmLabel=\\\"\\\" class=\\\"col-md-2 col-sm-3 control-label\\\"></label>\\r\\n                <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                    <textarea class=\\\"form-control\\\" rows=\\\"3\\\" placeholder=\\\"Nội dung ghi chú\\\"\\r\\n                              formControlName=\\\"note\\\"></textarea>\\r\\n                </div>\\r\\n            </div>\\r\\n        </nh-modal-content>\\r\\n        <nh-modal-footer>\\r\\n            <button mat-raised-button color=\\\"primary\\\">\\r\\n                <i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSaving\\\"></i>\\r\\n                <i class=\\\"fa fa-send\\\" *ngIf=\\\"!isSaving\\\"></i>\\r\\n                Gửi\\r\\n            </button>\\r\\n            <button mat-raised-button type=\\\"button\\\" nh-dismiss=\\\"true\\\">\\r\\n                <i class=\\\"fa fa-times\\\"></i>\\r\\n                Đóng lại\\r\\n            </button>\\r\\n        </nh-modal-footer>\\r\\n    </form>\\r\\n</nh-modal>\\r\\n\\r\\n<nh-modal #detailModal size=\\\"md\\\" (onHidden)=\\\"onDetailModalHidden()\\\">\\r\\n    <nh-modal-header>\\r\\n        <h4 class=\\\"title\\\">\\r\\n            <i class=\\\"fa fa-register\\\"></i>\\r\\n            Chi tiết đăng ký làm thêm giờ của nhân viên: \\\"{{overtimeRegister?.fullName}}\\\"\\r\\n        </h4>\\r\\n    </nh-modal-header>\\r\\n\\r\\n    <nh-modal-content class=\\\"form\\\">\\r\\n        <div class=\\\"form-horizontal form-bordered\\\">\\r\\n            <div class=\\\"form-body\\\">\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label for=\\\"\\\" [class]=\\\"'col-md-2 col-sm-3 control-label'\\\"\\r\\n                           text=\\\"Ngày\\\"></label>\\r\\n                    <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                        <div class=\\\"bold\\\">\\r\\n                            {{overtimeRegister?.registerDate | dateTimeFormat:'DD/MM/YYYY hh:mm'}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label for=\\\"\\\" [class]=\\\"'col-md-2 col-sm-3 control-label'\\\"\\r\\n                           text=\\\"Ca làm việc\\\"></label>\\r\\n                    <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                        <div class=\\\"bold\\\">\\r\\n                            {{overtimeRegister?.shiftReportName}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label for=\\\"\\\" [class]=\\\"'col-md-2 col-sm-3 control-label'\\\"\\r\\n                           text=\\\"Từ\\\"></label>\\r\\n                    <div class=\\\"col-sm-2\\\">\\r\\n                        <div class=\\\"bold\\\">\\r\\n                            {{overtimeRegister?.from.hour}}\\r\\n                            <span class=\\\"cm-pdt-10 cm-pdl-5 cm-pdr-5\\\">:</span>\\r\\n                            {{overtimeRegister?.from.minute}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <label for=\\\"\\\" [class]=\\\"'col-sm-2 control-label'\\\"\\r\\n                           text=\\\"Đến\\\"></label>\\r\\n                    <div class=\\\"col-sm-4\\\">\\r\\n                        <div class=\\\"bold\\\">\\r\\n                            {{overtimeRegister?.to.hour}}\\r\\n                            <span class=\\\"cm-pdt-10 cm-pdl-5 cm-pdr-5\\\">:</span>\\r\\n                            {{overtimeRegister?.to.minute}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label [class]=\\\"'col-md-2 col-sm-3 control-label'\\\"\\r\\n                           text=\\\"Tổng số phút\\\"></label>\\r\\n                    <div class=\\\"col-sm-9 col-md-10\\\">\\r\\n                        <div class=\\\"bold\\\">\\r\\n                            {{overtimeRegister?.totalMinutesText}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label for=\\\"\\\" [class]=\\\"'col-md-2 col-sm-3 control-label'\\\"\\r\\n                           text=\\\"Hình thức\\\"></label>\\r\\n                    <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                        <div class=\\\"bold\\\">\\r\\n                            {{overtimeRegister?.typeText}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label for=\\\"\\\" [class]=\\\"'col-md-2 col-sm-3 control-label'\\\"\\r\\n                           text=\\\"Ghi chú\\\"></label>\\r\\n                    <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                        <div class=\\\"bold height-auto\\\">\\r\\n                            {{overtimeRegister?.note}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label for=\\\"\\\" [class]=\\\"'col-md-2 col-sm-3 control-label'\\\"\\r\\n                           text=\\\"Trạng thái\\\"></label>\\r\\n                    <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                        <div class=\\\"bold\\\"\\r\\n                             [class.color-green]=\\\"overtimeRegister?.status === STATUS.MANAGER_APPROVE\\\"\\r\\n                             [class.color-red]=\\\"overtimeRegister?.status === STATUS.MANAGER_DECLINE\\\">\\r\\n                            {{overtimeRegister?.statusText}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\" *ngIf=\\\"overtimeRegister.status === STATUS.MANAGER_DECLINE\\\">\\r\\n                    <label [class]=\\\"'col-md-2 col-sm-3 control-label'\\\"\\r\\n                           text=\\\"Lý do\\\"></label>\\r\\n                    <div class=\\\"col-md-10 col-sm-9\\\">\\r\\n                        <div class=\\\"bold auto-height\\\">\\r\\n                            {{overtimeRegister?.declineReason}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </nh-modal-content>\\r\\n    <nh-modal-footer>\\r\\n        <button mat-raised-button color=\\\"primary\\\"\\r\\n                *ngIf=\\\"currentUser?.id === overtimeRegister?.managerUserId && overtimeRegister?.status === STATUS.WAITING_MANAGER_APPROVE\\\"\\r\\n                (click)=\\\"approve(overtimeRegister, true, true)\\\">\\r\\n            <i class=\\\"fa fa-check\\\"></i>\\r\\n            Duyệt\\r\\n        </button>\\r\\n        <button mat-raised-button color=\\\"warn\\\"\\r\\n                *ngIf=\\\"currentUser?.id === overtimeRegister?.managerUserId && overtimeRegister?.status === STATUS.WAITING_MANAGER_APPROVE\\\"\\r\\n                (click)=\\\"approve(overtimeRegister, false, true)\\\">\\r\\n            <i class=\\\"fa fa-times\\\"></i>\\r\\n            Không duyệt\\r\\n        </button>\\r\\n        <button type=\\\"button\\\" mat-raised-button color=\\\"default\\\" nh-dismiss=\\\"true\\\">\\r\\n            <i class=\\\"fa fa-times\\\"></i>\\r\\n            Đóng lại\\r\\n        </button>\\r\\n    </nh-modal-footer>\\r\\n</nh-modal>\\r\\n\"","import { Component, Inject, OnInit, ViewChild } from '@angular/core';\r\nimport { BaseComponent } from '../../../base.component';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { map, finalize, share } from 'rxjs/operators';\r\nimport { Location, LocationStrategy, PathLocationStrategy } from '@angular/common';\r\nimport * as _ from 'lodash';\r\nimport { IResponseResult } from '../../../interfaces/iresponse-result';\r\nimport { TimekeepingOvertimeService } from './timekeeping-overtime.service';\r\nimport { NumberValidator } from '../../../validators/number.validator';\r\nimport { TimekeepingWorkScheduleService } from '../config/work-schedule/timekeeping-work-schedule.service';\r\nimport { DestroySubscribers } from '../../../shareds/decorator/destroy-subscribes.decorator';\r\nimport { NhModalComponent } from '../../../shareds/components/nh-modal/nh-modal.component';\r\nimport { OvertimeRegister } from './overtime-register.model';\r\nimport { IPageId, PAGE_ID } from '../../../configs/page-id.config';\r\nimport { AppService } from '../../../shareds/services/app.service';\r\nimport { UtilService } from '../../../shareds/services/util.service';\r\nimport { ISearchResult } from '../../../interfaces/isearch.result';\r\nimport { FilterLink } from '../../../shareds/models/filter-link.model';\r\nimport { CheckPermission } from '../../../shareds/decorator/check-permission.decorator';\r\n\r\n@Component({\r\n    selector: 'app-timekeeping-overtime-register',\r\n    templateUrl: './timekeeping-overtime.component.html',\r\n    providers: [TimekeepingOvertimeService, NumberValidator, TimekeepingWorkScheduleService,\r\n        Location, {provide: LocationStrategy, useClass: PathLocationStrategy}]\r\n})\r\n\r\n@DestroySubscribers()\r\n@CheckPermission()\r\nexport class TimekeepingOvertimeComponent extends BaseComponent implements OnInit {\r\n    @ViewChild('registerFormModal') registerFormModal: NhModalComponent;\r\n    @ViewChild('detailModal') detailModal: NhModalComponent;\r\n    listMonth = [];\r\n    listYear = [];\r\n    listShift$: Observable<any>;\r\n    $listOvertimeRegisters: Observable<OvertimeRegister[]>;\r\n    listType = [{id: 0, name: 'Đánh máy'},\r\n        {id: 1, name: 'Làm thủ thuật'},\r\n        {id: 2, name: 'Tăng cường'},\r\n        {id: 3, name: 'Trực trưa'}];\r\n    overtimeRegister = new OvertimeRegister();\r\n    model: FormGroup;\r\n    month: number;\r\n    year: number;\r\n    type = 0;\r\n    userId: string;\r\n    status: number;\r\n    totalMinutes;\r\n    isGettingDetail = false;\r\n    research = false;\r\n\r\n    STATUS = {\r\n        WAITING_MANAGER_APPROVE: 0,\r\n        MANAGER_APPROVE: 1,\r\n        MANAGER_DECLINE: 2\r\n    };\r\n\r\n    constructor(@Inject(PAGE_ID) pageId: IPageId,\r\n                private location: Location,\r\n                private title: Title,\r\n                private route: ActivatedRoute,\r\n                private fb: FormBuilder,\r\n                private toastr: ToastrService,\r\n                private appService: AppService,\r\n                private utilService: UtilService,\r\n                private overtimeService: TimekeepingOvertimeService,\r\n                private numberValidator: NumberValidator,\r\n                private workscheduleService: TimekeepingWorkScheduleService) {\r\n        super();\r\n        this.title.setTitle('Danh sách làm thêm giờ.');\r\n        this.appService.setupPage(pageId.HR, pageId.TIMEKEEPING_OVERTIME, 'Chấm công', 'Danh sách làm thêm giờ.');\r\n        // this.getPermission(this.appService);\r\n        // this.currentUser = this.appService.currentUser;\r\n        this.month = new Date().getMonth() + 1;\r\n        this.year = new Date().getFullYear();\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.subscribers.queryParams = this.route.queryParams.subscribe(params => {\r\n            if (params.type) {\r\n                setTimeout(() => {\r\n                    this.type = parseInt(params.type);\r\n                }, 500);\r\n            }\r\n\r\n            if (params.id) {\r\n                this.getDetail(params.id);\r\n            }\r\n\r\n            if (params.showRegister) {\r\n                setTimeout(() => {\r\n                    this.isUpdate = false;\r\n                    this.model.reset(new OvertimeRegister());\r\n                    this.registerFormModal.show();\r\n                });\r\n            }\r\n        });\r\n\r\n        this.listShift$ = this.workscheduleService.getMyWorkScheduleShift()\r\n            .pipe(map((result: any) => {\r\n                return result;\r\n            }), share());\r\n\r\n        this.$listOvertimeRegisters = this.route.data\r\n            .pipe(map((result: { data: any }) => {\r\n                const overtimes = result.data;\r\n                this.totalRows$ = new Observable(o => o.next(overtimes.totalRows));\r\n                return overtimes.items.map((item) => {\r\n                    item.statusText = this.getStatusText(item.status);\r\n                    const totalHour = Math.floor(item.totalMinutes / 60);\r\n                    const totalMinutes = item.totalMinutes % 60;\r\n                    item.totalMinutesText = `${totalHour}:${totalMinutes}`;\r\n                    return item;\r\n                });\r\n            }));\r\n\r\n        this.builForm();\r\n\r\n        this.utilService.initListMonth().forEach((month: number) => {\r\n            this.listMonth = [...this.listMonth, {id: month, name: `Tháng ${month}`}];\r\n        });\r\n\r\n        this.utilService.initListYear().forEach((year: number) => {\r\n            this.listYear = [...this.listYear, {id: year, name: `năm ${year}`}];\r\n        });\r\n    }\r\n\r\n    onDetailModalHidden() {\r\n        if (this.research) {\r\n            this.search(this.currentPage);\r\n        }\r\n    }\r\n\r\n    getDetail(id: string) {\r\n        setTimeout(() => {\r\n            this.isGettingDetail = true;\r\n            this.detailModal.show();\r\n            this.overtimeService.getDetail(id)\r\n                .pipe(finalize(() => this.isGettingDetail = false))\r\n                .subscribe((overTimeRegister: OvertimeRegister) => {\r\n                    this.overtimeRegister = overTimeRegister;\r\n                    this.overtimeRegister.statusText = this.getStatusText(overTimeRegister.status);\r\n                    this.overtimeRegister.totalMinutesText = this.calculateHour(overTimeRegister.totalMinutes);\r\n                    this.overtimeRegister.typeText = this.getTypeText(overTimeRegister.type);\r\n                });\r\n        }, 500);\r\n    }\r\n\r\n    onSelectMonth(month) {\r\n        this.month = month.id;\r\n        this.search(1);\r\n    }\r\n\r\n    onSelectYear(year) {\r\n        this.year = year.id;\r\n        this.search(1);\r\n    }\r\n\r\n    onSelectStatus(status) {\r\n        this.status = status.id;\r\n        this.search(1);\r\n    }\r\n\r\n    search(currentPage: number) {\r\n        this.currentPage = currentPage;\r\n        this.isSearching = true;\r\n        this.renderFilterLink();\r\n\r\n        this.$listOvertimeRegisters = this.overtimeService.search(this.userId, this.month, this.year, this.type, this.status,\r\n            this.currentPage, this.pageSize)\r\n            .pipe(finalize(() => this.isSearching = false),\r\n                map((result: ISearchResult<OvertimeRegister>) => {\r\n                    this.totalRows$ = new Observable(o => o.next(result.totalRows));\r\n                    return result.items.map((item) => {\r\n                        item.statusText = this.getStatusText(item.status);\r\n                        const totalHour = Math.floor(item.totalMinutes / 60);\r\n                        const totalMinutes = item.totalMinutes % 60;\r\n                        item.totalMinutesText = `${totalHour}:${totalMinutes}`;\r\n                        return item;\r\n                    });\r\n                }));\r\n    }\r\n\r\n    showRegisterModal() {\r\n        this.isUpdate = false;\r\n        this.model.reset(new OvertimeRegister());\r\n        this.registerFormModal.show();\r\n    }\r\n\r\n    edit(overtimeRegister: OvertimeRegister) {\r\n        this.isUpdate = true;\r\n        this.model.patchValue(overtimeRegister);\r\n        this.registerFormModal.show();\r\n    }\r\n\r\n    detail(overtimeRegister: OvertimeRegister) {\r\n        this.overtimeRegister = overtimeRegister;\r\n        this.overtimeRegister.statusText = this.getStatusText(this.overtimeRegister.status);\r\n        this.overtimeRegister.totalMinutesText = this.calculateHour(this.overtimeRegister.totalMinutes);\r\n        this.overtimeRegister.typeText = this.getTypeText(this.overtimeRegister.type);\r\n        this.detailModal.show();\r\n    }\r\n\r\n    delete(overtimeRegister: OvertimeRegister) {\r\n        // swal({\r\n        //     title: ``,\r\n        //     text: `Bạn có chắc chắn muốn xóa đơn đăng ký làm thêm giờ này?`,\r\n        //     type: 'warning',\r\n        //     showCancelButton: true,\r\n        //     confirmButtonColor: '#DD6B55',\r\n        //     confirmButtonText: 'Đồng ý',\r\n        //     cancelButtonText: 'Hủy bỏ'\r\n        // }).then((isConfirm: boolean) => {\r\n        //     if (isConfirm) {\r\n        //         this.overtimeService.delete(overtimeRegister.id)\r\n        //             .finally(() => this.isSearching = false)\r\n        //             .subscribe(() => {\r\n        //                 this.search(1);\r\n        //             });\r\n        //     }\r\n        // }, () => {\r\n        // });\r\n    }\r\n\r\n    approve(overtimeRegister: OvertimeRegister, isApprove: boolean, fromDetailModal?: boolean) {\r\n        this.research = fromDetailModal;\r\n        // if (!isApprove) {\r\n        //     swal({\r\n        //         title: ``,\r\n        //         text: `Bạn có chắc chắn muốn không duyệt cho đơn đăng ký làm thêm giờ của: \"${overtimeRegister.fullName}\"`,\r\n        //         type: 'warning',\r\n        //         showCancelButton: true,\r\n        //         confirmButtonColor: '#DD6B55',\r\n        //         confirmButtonText: 'Đồng ý',\r\n        //         cancelButtonText: 'Hủy bỏ'\r\n        //     }).then((isConfirm: boolean) => {\r\n        //         if (isConfirm) {\r\n        //             swal({\r\n        //                 input: 'textarea',\r\n        //                 inputPlaceholder: 'Vui lòng nhập lý do không duyệt!',\r\n        //                 showCancelButton: true\r\n        //             }).then((text) => {\r\n        //                 if (text) {\r\n        //                     this.updateApproveStatus(overtimeRegister, isApprove, text);\r\n        //                 }\r\n        //             });\r\n        //         }\r\n        //     }, () => {\r\n        //     });\r\n        // } else {\r\n        //     this.updateApproveStatus(overtimeRegister, isApprove);\r\n        // }\r\n    }\r\n\r\n    save() {\r\n        this.overtimeRegister = this.model.value;\r\n        const isValid = this.utilService.onValueChanged(this.model, this.formErrors, this.validationMessages, true);\r\n        if (isValid) {\r\n            if (this.totalMinutes === '') {\r\n                this.toastr.error('Giá trị thời gian \"từ\" không được phép lớn hơn giá trị thời gian \"đến\".');\r\n                return;\r\n            }\r\n\r\n            this.overtimeRegister = this.model.value;\r\n            this.isSaving = true;\r\n\r\n            if (this.isUpdate) {\r\n                this.subscribers.update = this.overtimeService.update(this.overtimeRegister)\r\n                    .pipe(finalize(() => this.isSaving = false))\r\n                    .subscribe((result: IResponseResult) => {\r\n                        this.toastr.success(result.message, result.title);\r\n                        this.registerFormModal.dismiss();\r\n                        this.search(this.currentPage);\r\n                    });\r\n            } else {\r\n                this.subscribers.insert = this.overtimeService.insert(this.overtimeRegister)\r\n                    .pipe(finalize(() => this.isSaving = false))\r\n                    .subscribe((result: IResponseResult) => {\r\n                        this.toastr.success(result.message, result.title);\r\n                        this.model.reset();\r\n                        this.search(this.currentPage);\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    changeType(type: number) {\r\n        this.type = type;\r\n        this.search(1);\r\n    }\r\n\r\n    private updateApproveStatus(overtimeRegister: OvertimeRegister, isApprove: boolean, note?: string) {\r\n        this.overtimeService.approve(overtimeRegister.id, isApprove, note)\r\n            .subscribe(() => {\r\n                this.toastr.success(isApprove ? 'Duyệt đăng ký làm thêm giờ thành công.' : 'Không duyệt đăng ký làm thêm giờ thành công.');\r\n                overtimeRegister.status = isApprove ? this.STATUS.MANAGER_APPROVE : this.STATUS.MANAGER_DECLINE;\r\n                overtimeRegister.statusText = this.getStatusText(overtimeRegister.status);\r\n                overtimeRegister.declineReason = note;\r\n            });\r\n    }\r\n\r\n    private builForm() {\r\n        this.renderFormValidation();\r\n        this.model = this.fb.group({\r\n            'id': [this.overtimeRegister.id],\r\n            'userId': [this.overtimeRegister.userId],\r\n            'registerDate': [this.overtimeRegister.registerDate, [\r\n                Validators.required\r\n            ]],\r\n            'shiftId': [this.overtimeRegister.shiftId, [\r\n                Validators.required\r\n            ]],\r\n            'from': this.fb.group({\r\n                'hour': [this.overtimeRegister.from.hour, [\r\n                    Validators.required,\r\n                    this.numberValidator.isValid,\r\n                    this.numberValidator.range({fromValue: 0, toValue: 23})\r\n                ]],\r\n                'minute': [this.overtimeRegister.from.minute, [\r\n                    Validators.required,\r\n                    this.numberValidator.isValid,\r\n                    this.numberValidator.range({fromValue: 0, toValue: 59})\r\n                ]]\r\n            }),\r\n            'to': this.fb.group({\r\n                'hour': [this.overtimeRegister.to.hour, [\r\n                    Validators.required,\r\n                    this.numberValidator.isValid,\r\n                    this.numberValidator.range({fromValue: 0, toValue: 23})\r\n                ]],\r\n                'minute': [this.overtimeRegister.to.minute, [\r\n                    Validators.required,\r\n                    this.numberValidator.isValid,\r\n                    this.numberValidator.range({fromValue: 0, toValue: 59})\r\n                ]]\r\n            }),\r\n            'totalMinutes': [this.overtimeRegister.totalMinutes, [\r\n                Validators.required\r\n            ]],\r\n            'type': [this.overtimeRegister.type, [\r\n                Validators.required\r\n            ]],\r\n            'note': [this.overtimeRegister.note, [\r\n                Validators.maxLength(500)\r\n            ]]\r\n        });\r\n\r\n        this.model.valueChanges.subscribe(values => {\r\n            this.utilService.onValueChanged(this.model, this.formErrors, this.validationMessages);\r\n            const from = values.from;\r\n            const to = values.to;\r\n            if (from.hour && from.minute && to.hour && to.minute) {\r\n                const totalFromMinute = parseInt(from.hour) * 60 + parseInt(from.minute);\r\n                const totalToMinute = parseInt(to.hour) * 60 + parseInt(to.minute);\r\n                const totalMin = totalToMinute - totalFromMinute;\r\n                this.totalMinutes = !isNaN(totalMin) && totalMin > 0 ? this.calculateHour(totalMin) : '';\r\n            }\r\n        });\r\n    }\r\n\r\n    private renderFormValidation() {\r\n        this.formErrors = {\r\n            'shiftId': '',\r\n            'registerDate': '',\r\n            'note': '',\r\n            'type': '',\r\n            'from': this.utilService.renderFormError(['hour', 'minute']),\r\n            'to': this.utilService.renderFormError(['hour', 'minute'])\r\n        };\r\n\r\n        this.validationMessages = {\r\n            'shiftId': {\r\n                'required': 'Vui lòng chọn ca làm việc.'\r\n            },\r\n            'registerDate': {\r\n                'required': 'Vui lòng chọn ngày làm thêm.'\r\n            },\r\n            'note': {\r\n                'maxLength': 'Ghi chú không được phép vượt quá 500 ký tự.'\r\n            },\r\n            'type': {\r\n                'required': 'Vui lòng chọn hình thức xin nghỉ.'\r\n            },\r\n            'from': {\r\n                'hour': {\r\n                    'required': 'Vui lòng nhập giờ bắt đầu làm thêm.',\r\n                    'isValid': 'Giờ xin nghỉ phải là số bắt đầu làm thêm.',\r\n                    'invalidRange': 'Giờ bắt đầu làm thêm phải từ 0 đến 23 giờ.'\r\n                },\r\n                'minute': {\r\n                    'required': 'Vui lòng nhập phút bắt đầu làm thêm giờ.',\r\n                    'isValid': 'Phút bắt đầu làm thêm giờ phải là số.',\r\n                    'invalidRange': 'Phút bắt làm thêm giờ phải từ 0 đến 59 phút.'\r\n                }\r\n            },\r\n            'to': {\r\n                'hour': {\r\n                    'required': 'Vui lòng nhập giờ kết thúc làm thêm giờ.',\r\n                    'isValid': 'Giờ kết thúc làm thêm giờ phải là số.',\r\n                    'invalidRange': 'Giờ kết thúc làm thêm giờ phải từ 0 đến 23 giờ.'\r\n                },\r\n                'minute': {\r\n                    'required': 'Vui lòng nhập số phút kết thúc làm thêm giờ.',\r\n                    'isValid': 'Phút kết thúc làm thêm giờ phải là số.',\r\n                    'invalidRange': 'Phút làm thêm giờ phải từ 0 đến 59 phút.'\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    private renderFilterLink() {\r\n        const path = '/timekeeping/overtime';\r\n        const query = this.utilService.renderLocationFilter([\r\n            new FilterLink('type', this.type),\r\n            new FilterLink('month', this.month),\r\n            new FilterLink('year', this.year),\r\n            new FilterLink('userId', this.userId),\r\n            new FilterLink('status', this.status)\r\n        ]);\r\n\r\n        this.location.go(path, query);\r\n    }\r\n\r\n    private calculateHour(minutes: number): string {\r\n        const hour = Math.floor(minutes / 60);\r\n        const minute = minutes % 60;\r\n        return `${hour < 10 ? `0${hour}` : hour}:${minute < 10 ? `0${minute}` : minute}`;\r\n    }\r\n\r\n    private getStatusText(status: number) {\r\n        return status === this.STATUS.WAITING_MANAGER_APPROVE ? 'Chờ QLTT duyệt'\r\n            : status === this.STATUS.MANAGER_APPROVE ? 'QLTT đã duyệt'\r\n                : status === this.STATUS.MANAGER_DECLINE ? 'QLTT không duyệt' : '';\r\n    }\r\n\r\n    private getTypeText(type: number) {\r\n        return _.find(this.listType, (item) => {\r\n            return item.id === type;\r\n        }).name;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { ActivatedRouteSnapshot, Resolve } from '@angular/router';\r\nimport { OvertimeRegister } from './overtime-register.model';\r\nimport { TimekeepingWorkScheduleService } from '../config/work-schedule/timekeeping-work-schedule.service';\r\nimport { ISearchResult } from '../../../interfaces/isearch.result';\r\n\r\n@Injectable()\r\nexport class TimekeepingOvertimeService implements Resolve<any> {\r\n    url = 'overtime-register/';\r\n\r\n    constructor(private http: HttpClient,\r\n                private workScheduleService: TimekeepingWorkScheduleService) {\r\n    }\r\n\r\n    resolve(route: ActivatedRouteSnapshot, state: Object) {\r\n        const params = route.queryParams;\r\n        return this.search(params.userId, params.month, params.year, params.type, params.status, params.page, params.pageSize);\r\n    }\r\n\r\n    search(userId: string, month: number, year: number, type: number, status?: number,\r\n           page: number = 1, pageSize: number = 20): Observable<ISearchResult<OvertimeRegister>> {\r\n        return this.http.get<ISearchResult<OvertimeRegister>>(`${this.url}search`, {\r\n            params: new HttpParams().set('userId', userId)\r\n                .set('userId', userId ? userId : '')\r\n                .set('month', month ? month.toString() : (new Date().getMonth() + 1).toString())\r\n                .set('year', year ? year.toString() : (new Date().getFullYear()).toString())\r\n                .set('type', type != null && type !== undefined ? type.toString() : '0')\r\n                .set('status', status != null && status !== undefined ? status.toString() : '')\r\n                .set('page', page ? page.toString() : '1')\r\n                .set('pageSize', pageSize ? pageSize.toString() : '20')\r\n        });\r\n    }\r\n\r\n    insert(overtimeRegister: OvertimeRegister) {\r\n        return this.http.post(`${this.url}insert`, overtimeRegister);\r\n    }\r\n\r\n    update(overtimeRegister: OvertimeRegister) {\r\n        return this.http.post(`${this.url}update`, overtimeRegister);\r\n    }\r\n\r\n    delete(id: string) {\r\n        return this.http.delete(`${this.url}delete`, {\r\n            params: new HttpParams().set('id', id)\r\n        });\r\n    }\r\n\r\n    approve(id: string, isApprove: boolean, note: string) {\r\n        return this.http.post(`${this.url}approve`, '', {\r\n            params: new HttpParams()\r\n                .set('id', id)\r\n                .set('isApprove', isApprove.toString())\r\n                .set('note', note ? note : '')\r\n        });\r\n    }\r\n\r\n    getDetail(id: string) {\r\n        return this.http.get(`${this.url}get-detail`, {\r\n            params: new HttpParams()\r\n                .set('id', id)\r\n        });\r\n    }\r\n}\r\n","module.exports = \"<!--&lt;!&ndash;BEGIN: View my timesheet&ndash;&gt;-->\\r\\n<!--<ng-container-->\\r\\n    <!--*ngIf=\\\"!currentUser?.isAdmin && currentUser?.isLeader != 1 && currentUser?.isLeader != 2; else viewOfficeTimeSheetTemplate\\\">-->\\r\\n    <!--<div class=\\\"col-sm-12   \\\">-->\\r\\n        <!--<div class=\\\"portlet light bordered\\\">-->\\r\\n            <!--<div class=\\\"portlet-title\\\">-->\\r\\n                <!--<div class=\\\"caption\\\">-->\\r\\n                    <!--<i class=\\\"fa fa-calendar pull-left\\\"></i>-->\\r\\n                    <!--<span class=\\\"caption-subject bold uppercase pull-left\\\"> Bảng chấm công năm {{year}}</span>-->\\r\\n                <!--</div>-->\\r\\n            <!--</div>-->\\r\\n            <!--<div class=\\\"portlet-body form\\\">-->\\r\\n                <!--<form class=\\\"form-inline cm-mgb-10\\\" (ngSubmit)=\\\"search()\\\">-->\\r\\n                    <!--<div class=\\\"form-group\\\">-->\\r\\n                        <!--<nh-select name=\\\"selectMonth\\\"-->\\r\\n                                   <!--title=\\\"&#45;&#45; Chọn tháng &#45;&#45;\\\"-->\\r\\n                                   <!--[data]=\\\"listMonth\\\"-->\\r\\n                                   <!--[liveSearch]=\\\"true\\\"-->\\r\\n                                   <!--[(ngModel)]=\\\"month\\\"-->\\r\\n                                   <!--(onSelectItem)=\\\"onSelectMonth($event)\\\"></nh-select>-->\\r\\n                    <!--</div>-->\\r\\n                    <!--<div class=\\\"form-group\\\">-->\\r\\n                        <!--<nh-select-->\\r\\n                            <!--name=\\\"selectYear\\\"-->\\r\\n                            <!--title=\\\"&#45;&#45; Chọn năm &#45;&#45;\\\"-->\\r\\n                            <!--[data]=\\\"listYear\\\"-->\\r\\n                            <!--[(ngModel)]=\\\"year\\\"-->\\r\\n                            <!--(onSelectItem)=\\\"onSelectYear($event)\\\"></nh-select>-->\\r\\n                    <!--</div>-->\\r\\n                    <!--<div class=\\\"form-group\\\">-->\\r\\n                        <!--<button type=\\\"submit\\\" mat-raised-button color=\\\"primary\\\">-->\\r\\n                            <!--&lt;!&ndash;<i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSearching\\\"></i>&ndash;&gt;-->\\r\\n                            <!--<i class=\\\"fa fa-search\\\"></i>-->\\r\\n                            <!--Tìm kiếm-->\\r\\n                        <!--</button>-->\\r\\n                    <!--</div>-->\\r\\n                    <!--<div class=\\\"form-group pull-right\\\">-->\\r\\n                        <!--<button type=\\\"button\\\" class=\\\"btn btn-default\\\" (click)=\\\"print()\\\"-->\\r\\n                                <!--*ngIf=\\\"currentUser?.isLeader === 1 || currentUser?.isLeader === 2\\\">-->\\r\\n                            <!--<i class=\\\"fa fa-print\\\" *ngIf=\\\"!isLoadingPrinter\\\"></i>-->\\r\\n                            <!--<i class=\\\"fa fa-pulse fa-spinner\\\" *ngIf=\\\"isLoadingPrinter\\\"></i>-->\\r\\n                            <!--In bảng công-->\\r\\n                        <!--</button>-->\\r\\n                        <!--<div class=\\\"btn-group\\\" role=\\\"group\\\" aria-label=\\\"Kiểu hiển thị chấm công.\\\">-->\\r\\n                            <!--<button type=\\\"button\\\" class=\\\"btn btn-default\\\" title=\\\"Chi tiết chấm công.\\\"-->\\r\\n                                    <!--[class.active]=\\\"viewType === 0\\\"-->\\r\\n                                    <!--(click)=\\\"changeReportType(0)\\\">-->\\r\\n                                <!--<i class=\\\"fa fa-list\\\"></i>-->\\r\\n                            <!--</button>-->\\r\\n                            <!--<button type=\\\"button\\\" class=\\\"btn btn-default\\\" title=\\\"Tổng hợp chấm công.\\\"-->\\r\\n                                    <!--[class.active]=\\\"viewType === 1\\\"-->\\r\\n                                    <!--(click)=\\\"changeReportType(1)\\\">-->\\r\\n                                <!--<i class=\\\"fa fa-th-large\\\"></i>-->\\r\\n                            <!--</button>-->\\r\\n                        <!--</div>-->\\r\\n                    <!--</div>-->\\r\\n                <!--</form>-->\\r\\n                <!--<div class=\\\"table-responsive\\\">-->\\r\\n                    <!--<table class=\\\"table table-bordered table-hover table-main\\\"-->\\r\\n                           <!--[class.hidden]=\\\"viewType === 1\\\"-->\\r\\n                           <!--#reportByShiftTableElement>-->\\r\\n                        <!--<thead>-->\\r\\n                        <!--<tr>-->\\r\\n                            <!--<th class=\\\"center middle\\\">Tháng</th>-->\\r\\n                            <!--<th class=\\\"center middle w100\\\">Ca</th>-->\\r\\n                            <!--<th class=\\\"center va-top w50\\\" *ngFor=\\\"let day of daysInMonth\\\">-->\\r\\n                                <!--<div>-->\\r\\n                                    <!--{{day.day}}-->\\r\\n                                <!--</div>-->\\r\\n                                <!--<div *ngIf=\\\"day.isSunday\\\">-->\\r\\n                                    <!--CN-->\\r\\n                                <!--</div>-->\\r\\n                            <!--</th>-->\\r\\n                        <!--</tr>-->\\r\\n                        <!--</thead>-->\\r\\n                        <!--<tbody>-->\\r\\n                        <!--<ng-template ngFor let-item let-itemIndex=\\\"index\\\" [ngForOf]=\\\"listMyTimeSheet$ | async\\\">-->\\r\\n                            <!--<tr>-->\\r\\n                                <!--<td class=\\\"center middle bold\\\" [attr.rowspan]=\\\"item.shifts.length + 1\\\">-->\\r\\n                                    <!--{{item.month}}-->\\r\\n                                <!--</td>-->\\r\\n                            <!--</tr>-->\\r\\n                            <!--<tr *ngFor=\\\"let shift of item.shifts\\\">-->\\r\\n                                <!--<td class=\\\"center bold middle\\\">{{shift.reportName}}</td>-->\\r\\n                                <!--<td class=\\\"center middle cursor-pointer\\\"-->\\r\\n                                    <!--*ngFor=\\\"let workingDay of shift.workingDays\\\"-->\\r\\n                                    <!--title=\\\"{{workingDay.reason}}\\\"-->\\r\\n                                    <!--[class.bg-danger]=\\\"!workingDay.isValid && !workingDay.isSunday && workingDay.status == null\\\"-->\\r\\n                                    <!--[class.bg-info]=\\\"workingDay.isSunday\\\"-->\\r\\n                                    <!--(click)=\\\"detail(item.id, item.enrollNumber, item.fullName, workingDay)\\\">-->\\r\\n                                    <!--<i class=\\\"fa fa-times\\\" *ngIf=\\\"workingDay.status == null\\\"></i>-->\\r\\n                                    <!--<span *ngIf=\\\"workingDay.status != null\\\" class=\\\"bold\\\">-->\\r\\n                                            <!--{{workingDay.statusText}}-->\\r\\n                                        <!--</span>-->\\r\\n                                <!--</td>-->\\r\\n                            <!--</tr>-->\\r\\n                        <!--</ng-template>-->\\r\\n                        <!--</tbody>-->\\r\\n                    <!--</table>&lt;!&ndash; END: table &ndash;&gt;-->\\r\\n\\r\\n                    <!--&lt;!&ndash;<ng-template #aggregateViewTemplate>&ndash;&gt;-->\\r\\n                    <!--<table class=\\\"table table-bordered table-striped table-hover table-main\\\"-->\\r\\n                           <!--[class.hidden]=\\\"viewType === 0\\\"-->\\r\\n                           <!--#reportByMonthTableElement>-->\\r\\n                        <!--<thead>-->\\r\\n                        <!--<tr>-->\\r\\n                            <!--<th class=\\\"center middle\\\" rowspan=\\\"2\\\">TT</th>-->\\r\\n                            <!--<th class=\\\"center middle w250\\\" rowspan=\\\"2\\\">Họ tên</th>-->\\r\\n                            <!--<th class=\\\"center middle\\\" [attr.colspan]=\\\"listShifts.length\\\">Tổng ca</th>-->\\r\\n                            <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Chủ nhật</th>-->\\r\\n                            <!--<th class=\\\"center middle w100 pr-w-55\\\" colspan=\\\"2\\\">Tổng công</th>-->\\r\\n                            <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Làm thêm giờ</th>-->\\r\\n                            <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Nghỉ phép</th>-->\\r\\n                            <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Nghỉ không lương</th>-->\\r\\n                            <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Nghỉ bù</th>-->\\r\\n                            <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Nghỉ BH</th>-->\\r\\n                            <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Nghỉ chế độ</th>-->\\r\\n                            <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Nghỉ lễ</th>-->\\r\\n                            <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Tính ăn trưa</th>-->\\r\\n                            <!--<th class=\\\"center middle w100 pr-w-100\\\" rowspan=\\\"2\\\">-->\\r\\n                            <!--<th class=\\\"center middle w100\\\" rowspan=\\\"2\\\">-->\\r\\n                                <!--<span class=\\\"visible-print\\\">Ký tên</span>-->\\r\\n                            <!--</th>-->\\r\\n                        <!--</tr>-->\\r\\n                        <!--<tr>-->\\r\\n                            <!--<th class=\\\"center middle\\\" *ngFor=\\\"let shift of listShifts\\\">-->\\r\\n                                <!--{{shift.reportName}}-->\\r\\n                            <!--</th>-->\\r\\n                            <!--<th class=\\\"center middle w100\\\">Ngày thương</th>-->\\r\\n                            <!--<th class=\\\"center middle w100\\\">Ngày lễ</th>-->\\r\\n                        <!--</tr>-->\\r\\n                        <!--</thead>-->\\r\\n                        <!--<tbody>-->\\r\\n                        <!--<tr *ngFor=\\\"let monthReport of listReportByMonth; let i = index\\\">-->\\r\\n                            <!--<td class=\\\"middle center\\\">{{i + 1}}</td>-->\\r\\n                            <!--<td class=\\\"middle text-left\\\">-->\\r\\n                                <!--<a href=\\\"javascript://\\\" class=\\\"bold\\\" (click)=\\\"monthReportDetail(monthReport)\\\">{{monthReport.fullName}}</a>-->\\r\\n                            <!--</td>-->\\r\\n                            <!--<ng-container *ngFor=\\\"let shift of listShifts\\\">-->\\r\\n                                <!--<td class=\\\"middle text-right w100\\\">-->\\r\\n                                    <!--{{ getShiftTotal(shift, monthReport.reportShiftAggregates) }}-->\\r\\n                                <!--</td>-->\\r\\n                            <!--</ng-container>-->\\r\\n                            <!--<td class=\\\"middle text-right\\\">{{monthReport.totalSundays}}</td>-->\\r\\n                            <!--<td class=\\\"middle text-right\\\">{{monthReport.totalNormalDays}}</td>-->\\r\\n                            <!--<td class=\\\"middle text-right\\\">{{monthReport.totalHolidays}}</td>-->\\r\\n                            <!--<td class=\\\"middle text-right\\\">{{monthReport.totalOvertime}}</td>-->\\r\\n                            <!--<td class=\\\"middle text-right\\\">{{monthReport.totalAnnualLeave}}</td>-->\\r\\n                            <!--<td class=\\\"middle text-right\\\">{{monthReport.totalUnpaidLeave}}</td>-->\\r\\n                            <!--<td class=\\\"middle text-right\\\">{{monthReport.totalCompensatory}}</td>-->\\r\\n                            <!--<td class=\\\"middle text-right\\\">{{monthReport.totalInsuranceLeave}}</td>-->\\r\\n                            <!--<td class=\\\"middle text-right\\\">{{monthReport.totalEntitlement}}</td>-->\\r\\n                            <!--<td class=\\\"middle text-right\\\">{{monthReport.totalHolidaysLeave}}</td>-->\\r\\n                            <!--<td class=\\\"middle text-right\\\">{{monthReport.totalDaysValidMeal}}</td>-->\\r\\n                            <!--<td class=\\\"middle text-right\\\">-->\\r\\n                                <!--{{ (monthReport.totalNormalDays + monthReport.totalHolidays +-->\\r\\n                                <!--monthReport.totalSundays) }}-->\\r\\n                            <!--</td>-->\\r\\n                            <!--<td class=\\\"center\\\">-->\\r\\n                                <!--<button mat-mini-fab color=\\\"default\\\" title=\\\"Chi tiết\\\" matTooltip=\\\"Chi tiết\\\"-->\\r\\n                                        <!--[matTooltipPosition]=\\\"'above'\\\"-->\\r\\n                                        <!--(click)=\\\"monthReportDetail(monthReport)\\\"-->\\r\\n                                        <!--class=\\\"hidden-print\\\">-->\\r\\n                                    <!--<i class=\\\"fa fa-eye\\\"></i>-->\\r\\n                                <!--</button>-->\\r\\n                            <!--</td>-->\\r\\n                        <!--</tr>-->\\r\\n                        <!--</tbody>-->\\r\\n                    <!--</table>&lt;!&ndash; END: table &ndash;&gt;-->\\r\\n                    <!--&lt;!&ndash;</ng-template>&ndash;&gt;-->\\r\\n                <!--</div>-->\\r\\n            <!--</div>-->\\r\\n        <!--</div>-->\\r\\n    <!--</div>-->\\r\\n<!--</ng-container>-->\\r\\n<!--&lt;!&ndash; END: View my timesheet&ndash;&gt;-->\\r\\n\\r\\n<!--<ng-template #viewOfficeTimeSheetTemplate>-->\\r\\n    <!--<div class=\\\"row\\\">-->\\r\\n        <!--<div class=\\\"col-sm-4 col-md-3\\\" *ngIf=\\\"isHasViewPermission || currentUser?.isAdmin\\\">-->\\r\\n            <!--<div class=\\\"portlet light bordered\\\">-->\\r\\n                <!--<div class=\\\"portlet-title\\\">-->\\r\\n                    <!--<div class=\\\"caption\\\">-->\\r\\n                        <!--<i class=\\\"fa fa-building-o\\\"></i>-->\\r\\n                        <!--<span class=\\\"caption-subject bold uppercase\\\"> Phòng ban - Nhân viên</span>-->\\r\\n                    <!--</div>-->\\r\\n                <!--</div>-->\\r\\n                <!--<div class=\\\"portlet-body form\\\" style=\\\"overflow-x: auto;\\\">-->\\r\\n                    <!--<nh-tree [data]=\\\"officeTree\\\"-->\\r\\n                             <!--(onSelectNode)=\\\"onSelectOffice($event)\\\"-->\\r\\n                    <!--&gt;</nh-tree>-->\\r\\n                <!--</div>-->\\r\\n            <!--</div>-->\\r\\n        <!--</div>&lt;!&ndash; END: Office portlet &ndash;&gt;-->\\r\\n        <!--<div [ngClass]=\\\"isHasViewPermission || currentUser?.isAdmin ? 'col-sm-8 col-md-9' : 'col-sm-12'\\\">-->\\r\\n            <!--<div class=\\\"portlet light bordered\\\">-->\\r\\n                <!--<div class=\\\"portlet-title\\\">-->\\r\\n                    <!--<div class=\\\"caption\\\">-->\\r\\n                        <!--<i class=\\\"fa fa-calendar\\\"></i>-->\\r\\n                        <!--<span class=\\\"caption-subject bold uppercase\\\"> Bảng chấm công tháng {{month}} năm {{year}} {{officeName}}</span>-->\\r\\n                    <!--</div>-->\\r\\n                <!--</div>-->\\r\\n                <!--<div class=\\\"portlet-body form\\\">-->\\r\\n                    <!--<form class=\\\"form-inline cm-mgb-10\\\" (ngSubmit)=\\\"search()\\\">-->\\r\\n                        <!--<div class=\\\"form-group\\\" *ngIf=\\\"currentUser?.isLeader\\\">-->\\r\\n                            <!--<input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Nhập tên nhân viên cần tìm\\\"-->\\r\\n                                   <!--(keyup)=\\\"keyword = searchInput.value\\\" #searchInput/>-->\\r\\n                        <!--</div>-->\\r\\n                        <!--<div class=\\\"form-group\\\">-->\\r\\n                            <!--<nh-select name=\\\"selectMonth\\\"-->\\r\\n                                       <!--title=\\\"&#45;&#45; Chọn tháng &#45;&#45;\\\"-->\\r\\n                                       <!--[data]=\\\"listMonth\\\"-->\\r\\n                                       <!--[liveSearch]=\\\"true\\\"-->\\r\\n                                       <!--[(ngModel)]=\\\"month\\\"-->\\r\\n                                       <!--(onSelectItem)=\\\"onSelectMonth($event)\\\"></nh-select>-->\\r\\n                        <!--</div>-->\\r\\n                        <!--<div class=\\\"form-group\\\">-->\\r\\n                            <!--<nh-select-->\\r\\n                                <!--name=\\\"selectYear\\\"-->\\r\\n                                <!--title=\\\"&#45;&#45; Chọn năm &#45;&#45;\\\"-->\\r\\n                                <!--[data]=\\\"listYear\\\"-->\\r\\n                                <!--[(ngModel)]=\\\"year\\\"-->\\r\\n                                <!--(onSelectItem)=\\\"onSelectYear($event)\\\"></nh-select>-->\\r\\n                        <!--</div>-->\\r\\n                        <!--<div class=\\\"form-group\\\">-->\\r\\n                            <!--<button mat-raised-button color=\\\"primary\\\" matTooltip=\\\"Tìm kiếm\\\"-->\\r\\n                                    <!--[matTooltipPosition]=\\\"'right'\\\">-->\\r\\n                                <!--<i class=\\\"fa fa-spinner fa-pulse\\\" *ngIf=\\\"isSearching\\\"></i>-->\\r\\n                                <!--<i class=\\\"fa fa-search\\\" *ngIf=\\\"!isSearching\\\"></i>-->\\r\\n                                <!--Tìm kiếm-->\\r\\n                            <!--</button>-->\\r\\n                        <!--</div>-->\\r\\n                        <!--<div class=\\\"form-group pull-right\\\">-->\\r\\n                            <!--<button type=\\\"button\\\" class=\\\"btn btn-default\\\" (click)=\\\"print()\\\"-->\\r\\n                                    <!--*ngIf=\\\"currentUser?.isLeader === 1 || currentUser?.isLeader === 2\\\">-->\\r\\n                                <!--<i class=\\\"fa fa-print\\\" *ngIf=\\\"!isLoadingPrinter\\\"></i>-->\\r\\n                                <!--<i class=\\\"fa fa-pulse fa-spinner\\\" *ngIf=\\\"isLoadingPrinter\\\"></i>-->\\r\\n                                <!--In bảng công-->\\r\\n                            <!--</button>-->\\r\\n                            <!--<div class=\\\"btn-group\\\" role=\\\"group\\\" aria-label=\\\"Kiểu hiển thị chấm công.\\\">-->\\r\\n                                <!--<button type=\\\"button\\\" class=\\\"btn btn-default\\\" title=\\\"Chi tiết chấm công.\\\"-->\\r\\n                                        <!--[class.active]=\\\"viewType === 0\\\"-->\\r\\n                                        <!--(click)=\\\"changeReportType(0)\\\">-->\\r\\n                                    <!--<i class=\\\"fa fa-list\\\"></i>-->\\r\\n                                <!--</button>-->\\r\\n                                <!--<button type=\\\"button\\\" class=\\\"btn btn-default\\\" title=\\\"Tổng hợp chấm công.\\\"-->\\r\\n                                        <!--[class.active]=\\\"viewType === 1\\\"-->\\r\\n                                        <!--(click)=\\\"changeReportType(1)\\\">-->\\r\\n                                    <!--<i class=\\\"fa fa-th-large\\\"></i>-->\\r\\n                                <!--</button>-->\\r\\n                            <!--</div>-->\\r\\n                        <!--</div>-->\\r\\n                    <!--</form>-->\\r\\n                    <!--<div class=\\\"table-responsive\\\">-->\\r\\n                        <!--<table class=\\\"table table-bordered table-hover table-main bordered\\\"-->\\r\\n                               <!--[class.hidden]=\\\"viewType === 1\\\"-->\\r\\n                               <!--#reportByShiftTableElement>-->\\r\\n                            <!--<thead>-->\\r\\n                            <!--<tr>-->\\r\\n                                <!--<th class=\\\"center middle pr-w-25\\\">TT</th>-->\\r\\n                                <!--<th class=\\\"center middle w250\\\">Họ tên</th>-->\\r\\n                                <!--<th class=\\\"center va-top pr-w-27 w100\\\">Ca</th>-->\\r\\n                                <!--<th class=\\\"center va-top w50 pr-w-27 pr-va-top\\\" *ngFor=\\\"let day of daysInMonth\\\">-->\\r\\n                                    <!--<div>-->\\r\\n                                        <!--{{day.day}}-->\\r\\n                                    <!--</div>-->\\r\\n                                    <!--<div *ngIf=\\\"day.isSunday\\\">-->\\r\\n                                        <!--CN-->\\r\\n                                    <!--</div>-->\\r\\n                                <!--</th>-->\\r\\n                            <!--</tr>-->\\r\\n                            <!--</thead>-->\\r\\n                            <!--<tbody *ngIf=\\\"isSearching; else contentTemplate\\\">-->\\r\\n                            <!--<tr>-->\\r\\n                                <!--<td [attr.colspan]=\\\"daysInMonth.length + 3\\\">-->\\r\\n                                    <!--<div class=\\\"spinner\\\">-->\\r\\n                                        <!--<div class=\\\"rect1\\\"></div>-->\\r\\n                                        <!--<div class=\\\"rect2\\\"></div>-->\\r\\n                                        <!--<div class=\\\"rect3\\\"></div>-->\\r\\n                                        <!--<div class=\\\"rect4\\\"></div>-->\\r\\n                                        <!--<div class=\\\"rect5\\\"></div>-->\\r\\n                                    <!--</div>-->\\r\\n                                <!--</td>-->\\r\\n                            <!--</tr>-->\\r\\n                            <!--</tbody>-->\\r\\n                            <!--<tbody *ngIf=\\\"!isSearching && !officeId\\\">-->\\r\\n                            <!--<tr>-->\\r\\n                                <!--<td [attr.colspan]=\\\"daysInMonth.length + 3\\\"-->\\r\\n                                    <!--class=\\\"center bold\\\">-->\\r\\n                                    <!--Vui lòng chọn phòng ban.-->\\r\\n                                <!--</td>-->\\r\\n                            <!--</tr>-->\\r\\n                            <!--</tbody>-->\\r\\n                            <!--<ng-template #contentTemplate>-->\\r\\n                                <!--<tbody>-->\\r\\n                                <!--<ng-template ngFor let-item let-itemIndex=\\\"index\\\" [ngForOf]=\\\"listReports\\\">-->\\r\\n                                    <!--<tr *ngFor=\\\"let shift of item.shifts; let shiftIndex = index\\\">-->\\r\\n                                        <!--<td class=\\\"center middle bold\\\"-->\\r\\n                                            <!--*ngIf=\\\"shiftIndex === 0\\\"-->\\r\\n                                            <!--[attr.rowspan]=\\\"item.shifts.length\\\">-->\\r\\n                                            <!--{{itemIndex + 1}}-->\\r\\n                                        <!--</td>-->\\r\\n                                        <!--<td class=\\\"middle text-left\\\"-->\\r\\n                                            <!--*ngIf=\\\"shiftIndex === 0\\\"-->\\r\\n                                            <!--[attr.rowspan]=\\\"item.shifts.length\\\">-->\\r\\n                                            <!--<a href=\\\"javascript://\\\" class=\\\"bold\\\">{{item.fullName}}</a>-->\\r\\n                                        <!--</td>-->\\r\\n                                        <!--<td class=\\\"center bold middle\\\">-->\\r\\n                                            <!--<span class=\\\"hidden-print\\\">{{shift.reportName}}</span>-->\\r\\n                                            <!--<span class=\\\"visible-print\\\">{{shift.code}}</span>-->\\r\\n                                        <!--</td>-->\\r\\n                                        <!--<td class=\\\"center middle cursor-pointer\\\"-->\\r\\n                                            <!--*ngFor=\\\"let workingDay of shift.workingDays\\\"-->\\r\\n                                            <!--title=\\\"{{workingDay.reason}}\\\"-->\\r\\n                                            <!--[class.bg-danger]=\\\"!workingDay.isValid && !workingDay.isSunday && workingDay.status == null\\\"-->\\r\\n                                            <!--[class.bg-info]=\\\"workingDay.isSunday\\\"-->\\r\\n                                            <!--(click)=\\\"detail(shift.id, item.enrollNumber, item.fullName, workingDay)\\\">-->\\r\\n                                            <!--<i class=\\\"fa fa-times hidden-print\\\" *ngIf=\\\"workingDay.status == null\\\"></i>-->\\r\\n                                            <!--<span class=\\\"visible-print\\\" *ngIf=\\\"workingDay.status == null\\\">X</span>-->\\r\\n                                            <!--<span *ngIf=\\\"workingDay.status != null\\\" class=\\\"bold\\\">-->\\r\\n                                            <!--{{workingDay.statusText}}-->\\r\\n                                        <!--</span>-->\\r\\n                                        <!--</td>-->\\r\\n                                    <!--</tr>-->\\r\\n                                <!--</ng-template>-->\\r\\n                                <!--</tbody>-->\\r\\n                            <!--</ng-template>-->\\r\\n                        <!--</table>&lt;!&ndash; END: table &ndash;&gt;-->\\r\\n\\r\\n                        <!--&lt;!&ndash;<ng-template #aggregateViewTemplate>&ndash;&gt;-->\\r\\n                        <!--<table class=\\\"table table-bordered table-striped table-hover table-main\\\"-->\\r\\n                               <!--[class.hidden]=\\\"viewType === 0\\\"-->\\r\\n                               <!--#reportByMonthTableElement>-->\\r\\n                            <!--<thead>-->\\r\\n                            <!--<tr>-->\\r\\n                                <!--<th class=\\\"center middle\\\" rowspan=\\\"2\\\">STT</th>-->\\r\\n                                <!--<th class=\\\"center middle w250\\\" rowspan=\\\"2\\\">Họ và tên</th>-->\\r\\n                                <!--<th class=\\\"center middle\\\" [attr.colspan]=\\\"listShifts.length\\\">Tổng ca</th>-->\\r\\n                                <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Chủ nhật</th>-->\\r\\n                                <!--<th class=\\\"center middle w100 pr-w-55\\\" colspan=\\\"2\\\">Tổng công</th>-->\\r\\n                                <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Làm thêm giờ (Phút)</th>-->\\r\\n                                <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Nghỉ phép</th>-->\\r\\n                                <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Nghỉ không lương</th>-->\\r\\n                                <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Nghỉ bù</th>-->\\r\\n                                <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Nghỉ BH</th>-->\\r\\n                                <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Nghỉ chế độ</th>-->\\r\\n                                <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Nghỉ lễ</th>-->\\r\\n                                <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Tính ăn trưa</th>-->\\r\\n                                <!--<th class=\\\"center middle w100 pr-w-55\\\" rowspan=\\\"2\\\">Tổng công</th>-->\\r\\n                                <!--<th class=\\\"center middle w100 pr-w-100\\\" rowspan=\\\"2\\\">-->\\r\\n                                    <!--<span class=\\\"visible-print\\\">Ký tên</span>-->\\r\\n                                <!--</th>-->\\r\\n                            <!--</tr>-->\\r\\n                            <!--<tr>-->\\r\\n                                <!--<th class=\\\"center middle pr-w-55\\\" *ngFor=\\\"let shift of listShifts\\\">-->\\r\\n                                    <!--{{shift.reportName}}-->\\r\\n                                <!--</th>-->\\r\\n                                <!--<th class=\\\"center middle w100 pr-w-55\\\">Ngày thương</th>-->\\r\\n                                <!--<th class=\\\"center middle w100 pr-w-55\\\">Ngày lễ</th>-->\\r\\n                            <!--</tr>-->\\r\\n                            <!--</thead>-->\\r\\n                            <!--<tbody>-->\\r\\n                            <!--<tr *ngFor=\\\"let monthReport of listReportByMonth; let i = index\\\">-->\\r\\n                                <!--<td class=\\\"center middle\\\">{{i + 1}}</td>-->\\r\\n                                <!--<td class=\\\"middle text-left\\\">-->\\r\\n                                    <!--<a href=\\\"javascript://\\\" class=\\\"bold\\\" (click)=\\\"monthReportDetail(monthReport)\\\">{{monthReport.fullName}}</a>-->\\r\\n                                <!--</td>-->\\r\\n                                <!--<ng-container *ngFor=\\\"let shift of listShifts\\\">-->\\r\\n                                    <!--<td class=\\\"text-right w100\\\">-->\\r\\n                                        <!--{{ getShiftTotal(shift, monthReport.reportShiftAggregates) }}-->\\r\\n                                    <!--</td>-->\\r\\n                                <!--</ng-container>-->\\r\\n                                <!--<td class=\\\"text-right\\\">{{monthReport.totalSundays}}</td>-->\\r\\n                                <!--<td class=\\\"text-right\\\">{{monthReport.totalNormalDays}}</td>-->\\r\\n                                <!--<td class=\\\"text-right\\\">{{monthReport.totalHolidays}}</td>-->\\r\\n                                <!--<td class=\\\"text-right\\\">{{monthReport.totalOvertime}} <span-->\\r\\n                                    <!--*ngIf=\\\"monthReport.totalOvertimeText\\\" class=\\\"bold\\\">({{monthReport.totalOvertimeText}})</span>-->\\r\\n                                <!--</td>-->\\r\\n                                <!--<td class=\\\"text-right\\\">{{monthReport.totalAnnualLeave}}</td>-->\\r\\n                                <!--<td class=\\\"text-right\\\">{{monthReport.totalUnpaidLeave}}</td>-->\\r\\n                                <!--<td class=\\\"text-right\\\">{{monthReport.totalCompensatory}}</td>-->\\r\\n                                <!--<td class=\\\"text-right\\\">{{monthReport.totalInsuranceLeave}}</td>-->\\r\\n                                <!--<td class=\\\"text-right\\\">{{monthReport.totalEntitlement}}</td>-->\\r\\n                                <!--<td class=\\\"text-right\\\">{{monthReport.totalHolidaysLeave}}</td>-->\\r\\n                                <!--<td class=\\\"text-right\\\">{{monthReport.totalDaysValidMeal}}</td>-->\\r\\n                                <!--<td class=\\\"text-right\\\">-->\\r\\n                                    <!--{{ (monthReport.totalNormalDays + monthReport.totalHolidays +-->\\r\\n                                    <!--monthReport.totalSundays) }}-->\\r\\n                                <!--</td>-->\\r\\n                                <!--<td class=\\\"center\\\">-->\\r\\n                                    <!--<button mat-mini-fab color=\\\"default\\\" title=\\\"Chi tiết\\\" matTooltip=\\\"Chi tiết\\\"-->\\r\\n                                            <!--[matTooltipPosition]=\\\"'above'\\\"-->\\r\\n                                            <!--(click)=\\\"monthReportDetail(monthReport)\\\"-->\\r\\n                                            <!--class=\\\"hidden-print\\\">-->\\r\\n                                        <!--<i class=\\\"fa fa-eye\\\"></i>-->\\r\\n                                    <!--</button>-->\\r\\n                                <!--</td>-->\\r\\n                            <!--</tr>-->\\r\\n                            <!--</tbody>-->\\r\\n                        <!--</table>&lt;!&ndash; END: table &ndash;&gt;-->\\r\\n                        <!--&lt;!&ndash;</ng-template>&ndash;&gt;-->\\r\\n                    <!--</div>-->\\r\\n                <!--</div>-->\\r\\n            <!--</div>-->\\r\\n        <!--</div>-->\\r\\n    <!--</div>-->\\r\\n<!--</ng-template>-->\\r\\n\\r\\n<!--<nh-modal [size]=\\\"'md'\\\" #shiftDetailModal>-->\\r\\n    <!--<nh-modal-content>-->\\r\\n        <!--<nh-tab>-->\\r\\n            <!--<nh-tab-panel title=\\\"Tổng quan\\\"-->\\r\\n                          <!--icon=\\\"icon-note\\\"-->\\r\\n                          <!--id=\\\"'overviewTab'\\\"-->\\r\\n                          <!--active=\\\"true\\\"-->\\r\\n                          <!--(onSelectTab)=\\\"onShiftDetailTabSelect(0)\\\">-->\\r\\n                <!--<div class=\\\"portlet light bordered form-fit cm-mgb-0\\\">-->\\r\\n                    <!--<div class=\\\"portlet-title\\\">-->\\r\\n                        <!--<div class=\\\"caption\\\">-->\\r\\n                            <!--<i class=\\\"icon-speech font-red-sunglo\\\"></i>-->\\r\\n                            <!--<span class=\\\"caption-subject font-red-sunglo bold uppercase\\\">Chi tiết ca làm việc.</span>-->\\r\\n                        <!--</div>-->\\r\\n                    <!--</div>-->\\r\\n                    <!--<div class=\\\"portlet-body form\\\">-->\\r\\n                        <!--&lt;!&ndash; BEGIN FORM&ndash;&gt;-->\\r\\n                        <!--<div class=\\\"form-horizontal form-bordered\\\">-->\\r\\n                            <!--<div class=\\\"form-body\\\">-->\\r\\n                                <!--<div class=\\\"form-group\\\">-->\\r\\n                                    <!--<label class=\\\"control-label col-md-3\\\">Tên nhân viên</label>-->\\r\\n                                    <!--<div class=\\\"col-md-9\\\">-->\\r\\n                                        <!--<div class=\\\"bold\\\">{{ reportByShiftDetail?.fullName }}</div>-->\\r\\n                                    <!--</div>-->\\r\\n                                <!--</div>-->\\r\\n                                <!--<div class=\\\"form-group\\\">-->\\r\\n                                    <!--<label class=\\\"control-label col-md-3\\\">Ngày chấm công</label>-->\\r\\n                                    <!--<div class=\\\"col-md-9\\\">-->\\r\\n                                        <!--<div class=\\\"bold\\\">{{ reportByShiftDetail?.checkInDate }}</div>-->\\r\\n                                    <!--</div>-->\\r\\n                                <!--</div>-->\\r\\n                                <!--<div class=\\\"form-group\\\">-->\\r\\n                                    <!--<label class=\\\"control-label col-md-3\\\">Thời gian chấm công vào</label>-->\\r\\n                                    <!--<div class=\\\"col-md-9\\\">-->\\r\\n                                        <!--<div class=\\\"bold\\\"-->\\r\\n                                             <!--*ngIf=\\\"reportByShiftDetail?.inDateTime; else forgotCheckInTemplate\\\">-->\\r\\n                                            <!--{{ reportByShiftDetail?.inDateTime | dateTimeFormat:'DD/MM/YYYY hh:mm' }}-->\\r\\n                                        <!--</div>-->\\r\\n\\r\\n                                        <!--<ng-template #forgotCheckInTemplate>-->\\r\\n                                            <!--<div class=\\\"bold color-red\\\">-->\\r\\n                                                <!--Chưa có dữ liệu chấm công vào.-->\\r\\n                                            <!--</div>-->\\r\\n                                            <!--<div class=\\\"cm-mgt-10\\\">-->\\r\\n                                                <!--<nh-select-->\\r\\n                                                    <!--class=\\\"pull-left cm-mgr-5\\\"-->\\r\\n                                                    <!--[data]=\\\"listDayOffMethos\\\"-->\\r\\n                                                    <!--title=\\\"&#45;&#45; Đổi hình thức &#45;&#45;\\\"-->\\r\\n                                                    <!--(onSelectItem)=\\\"onChangeDayOffMethod($event)\\\"-->\\r\\n                                                <!--&gt;</nh-select>-->\\r\\n                                                <!--<button type=\\\"button\\\" mat-raised-button color=\\\"primary\\\"-->\\r\\n                                                        <!--(click)=\\\"markAsValid(true)\\\"-->\\r\\n                                                        <!--*ngIf=\\\"currentUser?.isLeader === 1 || currentUser?.isLeader === 2\\\">-->\\r\\n                                                    <!--<i class=\\\"fa fa-check\\\"></i>-->\\r\\n                                                    <!--Đánh dấu hợp lệ-->\\r\\n                                                <!--</button>-->\\r\\n                                                <!--<button type=\\\"button\\\" mat-raised-button color=\\\"warn\\\"-->\\r\\n                                                        <!--(click)=\\\"deleteShift()\\\"-->\\r\\n                                                        <!--*ngIf=\\\"currentUser?.isLeader === 1 || currentUser?.isLeader === 2\\\">-->\\r\\n                                                    <!--<i class=\\\"fa fa-trash\\\"></i>-->\\r\\n                                                    <!--Xóa ca-->\\r\\n                                                <!--</button>-->\\r\\n                                            <!--</div>-->\\r\\n                                        <!--</ng-template>-->\\r\\n                                    <!--</div>-->\\r\\n                                <!--</div>-->\\r\\n                                <!--<div class=\\\"form-group\\\">-->\\r\\n                                    <!--<label class=\\\"control-label col-md-3\\\">Thời gian chấm công ra</label>-->\\r\\n                                    <!--<div class=\\\"col-md-9\\\">-->\\r\\n                                        <!--<div class=\\\"bold\\\"-->\\r\\n                                             <!--*ngIf=\\\"reportByShiftDetail?.outDateTime; else forgotCheckOutTemplate\\\">-->\\r\\n                                            <!--{{ reportByShiftDetail?.outDateTime | dateTimeFormat:'DD/MM/YYYY hh:mm' }}-->\\r\\n                                        <!--</div>-->\\r\\n\\r\\n                                        <!--<ng-template #forgotCheckOutTemplate>-->\\r\\n                                            <!--<div class=\\\"bold color-red\\\">-->\\r\\n                                                <!--Chưa có dữ liệu chấm công ra.-->\\r\\n                                            <!--</div>-->\\r\\n                                            <!--<div class=\\\"cm-mgt-10\\\">-->\\r\\n                                                <!--<nh-select-->\\r\\n                                                    <!--class=\\\"pull-left cm-mgr-5\\\"-->\\r\\n                                                    <!--[data]=\\\"listDayOffMethos\\\"-->\\r\\n                                                    <!--title=\\\"&#45;&#45; Đổi hình thức &#45;&#45;\\\"-->\\r\\n                                                    <!--(onSelectItem)=\\\"onChangeDayOffMethod($event)\\\"-->\\r\\n                                                <!--&gt;</nh-select>-->\\r\\n                                                <!--<button type=\\\"button\\\" mat-raised-button color=\\\"primary\\\"-->\\r\\n                                                        <!--(click)=\\\"markAsValid(false)\\\"-->\\r\\n                                                        <!--*ngIf=\\\"currentUser?.isLeader === 1 || currentUser?.isLeader === 2\\\">-->\\r\\n                                                    <!--<i class=\\\"fa fa-check\\\"></i>-->\\r\\n                                                    <!--Đánh dấu hợp lệ-->\\r\\n                                                <!--</button>-->\\r\\n                                                <!--<button type=\\\"button\\\" mat-raised-button color=\\\"warn\\\"-->\\r\\n                                                        <!--(click)=\\\"deleteShift(false)\\\"-->\\r\\n                                                        <!--*ngIf=\\\"currentUser?.isLeader === 1 || currentUser?.isLeader === 2\\\">-->\\r\\n                                                    <!--<i class=\\\"fa fa-trash\\\"></i>-->\\r\\n                                                    <!--Xóa ca-->\\r\\n                                                <!--</button>-->\\r\\n                                            <!--</div>-->\\r\\n                                        <!--</ng-template>-->\\r\\n                                    <!--</div>-->\\r\\n                                <!--</div>-->\\r\\n                                <!--<div class=\\\"form-group\\\">-->\\r\\n                                    <!--<label class=\\\"control-label col-md-3\\\">Đến sớm</label>-->\\r\\n                                    <!--<div class=\\\"col-md-3\\\">-->\\r\\n                                        <!--<div class=\\\"input-group\\\">-->\\r\\n                                            <!--<div class=\\\"form-control bold color-green\\\">-->\\r\\n                                                <!--{{ reportByShiftDetail?.inSoonMin }}-->\\r\\n                                            <!--</div>-->\\r\\n                                            <!--<span class=\\\"input-group-addon\\\">Phút</span>-->\\r\\n                                        <!--</div>-->\\r\\n                                    <!--</div>-->\\r\\n                                    <!--<label class=\\\"control-label col-md-2\\\">Về sớm</label>-->\\r\\n                                    <!--<div class=\\\"col-md-4\\\">-->\\r\\n                                        <!--<div class=\\\"input-group\\\">-->\\r\\n                                            <!--<div class=\\\"form-control bold color-red\\\">-->\\r\\n                                                <!--{{ reportByShiftDetail?.outSoonMin }}-->\\r\\n                                            <!--</div>-->\\r\\n                                            <!--<span class=\\\"input-group-addon\\\">Phút</span>-->\\r\\n                                        <!--</div>-->\\r\\n                                    <!--</div>-->\\r\\n                                <!--</div>-->\\r\\n                                <!--<div class=\\\"form-group\\\">-->\\r\\n                                    <!--<label class=\\\"control-label col-md-3\\\">Đến muộn</label>-->\\r\\n                                    <!--<div class=\\\"col-md-3\\\">-->\\r\\n                                        <!--<div class=\\\"input-group\\\">-->\\r\\n                                            <!--<div class=\\\"form-control bold color-red\\\">-->\\r\\n                                                <!--{{ reportByShiftDetail?.inLateMin }}-->\\r\\n                                            <!--</div>-->\\r\\n                                            <!--<span class=\\\"input-group-addon\\\">Phút</span>-->\\r\\n                                        <!--</div>-->\\r\\n                                    <!--</div>-->\\r\\n                                    <!--<label class=\\\"control-label col-md-2\\\">Về muộn</label>-->\\r\\n                                    <!--<div class=\\\"col-md-4\\\">-->\\r\\n                                        <!--<div class=\\\"input-group\\\">-->\\r\\n                                            <!--<div class=\\\"form-control bold color-green\\\">-->\\r\\n                                                <!--{{ reportByShiftDetail?.outLateMin }}-->\\r\\n                                            <!--</div>-->\\r\\n                                            <!--<span class=\\\"input-group-addon\\\">Phút</span>-->\\r\\n                                        <!--</div>-->\\r\\n                                    <!--</div>-->\\r\\n                                <!--</div>-->\\r\\n                                <!--<div class=\\\"form-group\\\" *ngIf=\\\"reportByShiftDetail?.status != null\\\">-->\\r\\n                                    <!--<label class=\\\"control-label col-md-3\\\">Trạng thái</label>-->\\r\\n                                    <!--<div class=\\\"col-md-9\\\">-->\\r\\n                                        <!--<div class=\\\"form-control bold\\\">-->\\r\\n                                            <!--{{ reportByShiftDetail?.statusText }}-->\\r\\n                                        <!--</div>-->\\r\\n                                    <!--</div>-->\\r\\n                                <!--</div>-->\\r\\n                                <!--<div class=\\\"form-group\\\"-->\\r\\n                                     <!--*ngIf=\\\"reportByShiftDetail?.inLatencyMin || reportByShiftDetail?.outLatencyMin\\\">-->\\r\\n                                    <!--<ng-container *ngIf=\\\"reportByShiftDetail?.inLatencyMin\\\">-->\\r\\n                                        <!--<label class=\\\"control-label col-md-3\\\">Xin đi muộn</label>-->\\r\\n                                        <!--<div class=\\\"col-md-3\\\">-->\\r\\n                                            <!--<div class=\\\"input-group\\\">-->\\r\\n                                                <!--<div class=\\\"form-control bold\\\">-->\\r\\n                                                    <!--{{ reportByShiftDetail?.inLatencyMin }}-->\\r\\n                                                <!--</div>-->\\r\\n                                                <!--<span class=\\\"input-group-addon\\\">Phút</span>-->\\r\\n                                            <!--</div>-->\\r\\n                                        <!--</div>-->\\r\\n                                    <!--</ng-container>-->\\r\\n                                    <!--<ng-container *ngIf=\\\"reportByShiftDetail?.inLatencyMin\\\">-->\\r\\n                                        <!--<label class=\\\"control-label col-md-2\\\">Lý do</label>-->\\r\\n                                        <!--<div class=\\\"col-md-4\\\">-->\\r\\n                                            <!--<div class=\\\"form-control bold\\\">-->\\r\\n                                                <!--{{ reportByShiftDetail?.inLatencyReason }}-->\\r\\n                                            <!--</div>-->\\r\\n                                        <!--</div>-->\\r\\n                                    <!--</ng-container>-->\\r\\n                                <!--</div>-->\\r\\n                                <!--<div class=\\\"form-group\\\"-->\\r\\n                                     <!--*ngIf=\\\"reportByShiftDetail?.inLatencyReason || reportByShiftDetail?.outLatencyReason\\\">-->\\r\\n                                    <!--<ng-container *ngIf=\\\"reportByShiftDetail?.outLatencyMin\\\">-->\\r\\n                                        <!--<label class=\\\"control-label col-md-2\\\">Xin về sớm</label>-->\\r\\n                                        <!--<div class=\\\"col-md-4\\\">-->\\r\\n                                            <!--<div class=\\\"input-group\\\">-->\\r\\n                                                <!--<div class=\\\"form-control bold\\\">-->\\r\\n                                                    <!--{{ reportByShiftDetail?.outLatencyMin }}-->\\r\\n                                                <!--</div>-->\\r\\n                                                <!--<span class=\\\"input-group-addon\\\">Phút</span>-->\\r\\n                                            <!--</div>-->\\r\\n                                        <!--</div>-->\\r\\n                                    <!--</ng-container>-->\\r\\n                                    <!--<ng-container *ngIf=\\\"reportByShiftDetail?.outLatencyMin\\\">-->\\r\\n                                        <!--<label class=\\\"control-label col-md-2\\\">Lý do</label>-->\\r\\n                                        <!--<div class=\\\"col-md-4\\\">-->\\r\\n                                            <!--<div class=\\\"form-control bold\\\">-->\\r\\n                                                <!--{{ reportByShiftDetail?.outLatencyReason }}-->\\r\\n                                            <!--</div>-->\\r\\n                                        <!--</div>-->\\r\\n                                    <!--</ng-container>-->\\r\\n                                <!--</div>-->\\r\\n                            <!--</div>-->\\r\\n                        <!--</div>-->\\r\\n                        <!--&lt;!&ndash; END FORM&ndash;&gt;-->\\r\\n                    <!--</div>-->\\r\\n                <!--</div>-->\\r\\n            <!--</nh-tab-panel>-->\\r\\n            <!--<nh-tab-panel title=\\\"Lịch sử\\\"-->\\r\\n                          <!--icon=\\\"fa fa-history\\\"-->\\r\\n                          <!--id=\\\"hostoryTab\\\"-->\\r\\n                          <!--(onSelectTab)=\\\"onShiftDetailTabSelect(1)\\\">-->\\r\\n                <!--<div class=\\\"portlet light bordered form-fit cm-mgb-0\\\">-->\\r\\n                    <!--<div class=\\\"portlet-title\\\">-->\\r\\n                        <!--<div class=\\\"caption\\\">-->\\r\\n                            <!--<i class=\\\"icon-clock font-red-sunglo\\\"></i>-->\\r\\n                            <!--<span class=\\\"caption-subject font-red-sunglo bold uppercase\\\">Lịch sử chấm công ngày {{reportByShiftDetail?.day}}/{{reportByShiftDetail?.month}}/{{reportByShiftDetail?.year}}.</span>-->\\r\\n                        <!--</div>-->\\r\\n                    <!--</div>-->\\r\\n                    <!--<div class=\\\"portlet-body form\\\">-->\\r\\n                        <!--&lt;!&ndash; BEGIN FORM&ndash;&gt;-->\\r\\n                        <!--<table class=\\\"table table-bordered table-strip table-hover table-main\\\">-->\\r\\n                            <!--<thead>-->\\r\\n                            <!--<tr>-->\\r\\n                                <!--<th class=\\\"center w50\\\">STT</th>-->\\r\\n                                <!--<th class=\\\"center w50\\\">Ca</th>-->\\r\\n                                <!--<th class=\\\"center\\\">Thời gian chấm</th>-->\\r\\n                            <!--</tr>-->\\r\\n                            <!--</thead>-->\\r\\n                            <!--<tbody *ngIf=\\\"isLoadingHistory; else shiftDetailContent\\\">-->\\r\\n                            <!--<tr>-->\\r\\n                                <!--<td colspan=\\\"3\\\" class=\\\"center\\\">-->\\r\\n                                    <!--<div class=\\\"spinner\\\">-->\\r\\n                                        <!--<div class=\\\"rect1\\\"></div>-->\\r\\n                                        <!--<div class=\\\"rect2\\\"></div>-->\\r\\n                                        <!--<div class=\\\"rect3\\\"></div>-->\\r\\n                                        <!--<div class=\\\"rect4\\\"></div>-->\\r\\n                                        <!--<div class=\\\"rect5\\\"></div>-->\\r\\n                                    <!--</div>-->\\r\\n                                <!--</td>-->\\r\\n                            <!--</tr>-->\\r\\n                            <!--</tbody>-->\\r\\n                            <!--<ng-template #shiftDetailContent>-->\\r\\n                                <!--<tbody>-->\\r\\n                                <!--<ng-container *ngFor=\\\"let shift of listCheckInCheckOutHistory; let i = index\\\">-->\\r\\n                                    <!--<tr>-->\\r\\n                                        <!--<td class=\\\"center middle\\\" [attr.rowspan]=\\\"shift?.checkInTimes?.length + 1\\\">-->\\r\\n                                            <!--{{i + 1}}-->\\r\\n                                        <!--</td>-->\\r\\n                                        <!--<td class=\\\"center middle\\\" [attr.rowspan]=\\\"shift?.checkInTimes?.length + 1\\\">-->\\r\\n                                            <!--{{shift.shiftCode}}-->\\r\\n                                        <!--</td>-->\\r\\n                                    <!--</tr>-->\\r\\n                                    <!--<tr *ngFor=\\\"let checkInTime of shift?.checkInTimes\\\">-->\\r\\n                                        <!--<td>-->\\r\\n                                            <!--{{checkInTime | dateTimeFormat:'DD/MM/YYYY HH:mm:ss'}}-->\\r\\n                                        <!--</td>-->\\r\\n                                    <!--</tr>-->\\r\\n                                <!--</ng-container>-->\\r\\n                                <!--</tbody>-->\\r\\n                            <!--</ng-template>-->\\r\\n                        <!--</table>-->\\r\\n                        <!--&lt;!&ndash; END FORM&ndash;&gt;-->\\r\\n                    <!--</div>-->\\r\\n                <!--</div>-->\\r\\n            <!--</nh-tab-panel>-->\\r\\n        <!--</nh-tab>-->\\r\\n    <!--</nh-modal-content>-->\\r\\n    <!--<nh-modal-footer>-->\\r\\n        <!--<div class=\\\"col-sm-12\\\">-->\\r\\n            <!--<button type=\\\"button\\\" mat-raised-button nh-dismiss=\\\"true\\\" class=\\\"pull-right\\\">-->\\r\\n                <!--<i class=\\\"fa fa-times\\\"></i>-->\\r\\n                <!--Đóng lại-->\\r\\n            <!--</button>-->\\r\\n        <!--</div>-->\\r\\n    <!--</nh-modal-footer>-->\\r\\n<!--</nh-modal>-->\\r\\n<!--&lt;!&ndash; END: shiftDetailModal &ndash;&gt;-->\\r\\n\\r\\n<!--<nh-modal size=\\\"lg\\\" #reportMonthDetailModal>-->\\r\\n    <!--<nh-modal-content>-->\\r\\n        <!--<div class=\\\"spinner\\\" *ngIf=\\\"isSearchingMonthDetail; else monthDetailResultTemplate\\\">-->\\r\\n            <!--<div class=\\\"rect1\\\"></div>-->\\r\\n            <!--<div class=\\\"rect2\\\"></div>-->\\r\\n            <!--<div class=\\\"rect3\\\"></div>-->\\r\\n            <!--<div class=\\\"rect4\\\"></div>-->\\r\\n            <!--<div class=\\\"rect5\\\"></div>-->\\r\\n        <!--</div>-->\\r\\n\\r\\n        <!--<ng-template #monthDetailResultTemplate>-->\\r\\n            <!--<div class=\\\"portlet light bordered form-fit cm-mgb-0\\\">-->\\r\\n                <!--<div class=\\\"portlet-title\\\">-->\\r\\n                    <!--<div class=\\\"caption\\\">-->\\r\\n                        <!--<i class=\\\"icon-speech font-red-sunglo\\\"></i>-->\\r\\n                        <!--<span class=\\\"caption-subject font-red-sunglo bold uppercase\\\">Lịch sử chấm công tháng {{month}} năm {{year}}.</span>-->\\r\\n                    <!--</div>-->\\r\\n                <!--</div>-->\\r\\n                <!--<div class=\\\"portlet-body form\\\">-->\\r\\n                    <!--<div class=\\\"form-horizontal\\\">-->\\r\\n                        <!--<div class=\\\"form-group\\\">-->\\r\\n                            <!--<label class=\\\"control-label col-md-3\\\">Tên nhân viên</label>-->\\r\\n                            <!--<div class=\\\"col-md-9\\\">-->\\r\\n                                <!--<div class=\\\"form-control bold\\\">{{reportByMonthDetail?.fullName}}</div>-->\\r\\n                            <!--</div>-->\\r\\n                        <!--</div>-->\\r\\n                    <!--</div>-->\\r\\n                    <!--<nh-tab>-->\\r\\n                        <!--<nh-tab-panel-->\\r\\n                            <!--title=\\\"Tổng quan\\\"-->\\r\\n                            <!--icon=\\\"icon-note\\\"-->\\r\\n                            <!--id=\\\"tabMonthReportGeneral\\\"-->\\r\\n                            <!--[active]=\\\"true\\\"-->\\r\\n                        <!--&gt;-->\\r\\n                            <!--<table class=\\\"table table-hover table-striped table-bordered table-main\\\">-->\\r\\n                                <!--<thead>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<th colspan=\\\"2\\\">-->\\r\\n                                        <!--<i class=\\\"icon-layers cm-mgr-5\\\"></i>-->\\r\\n                                        <!--Đi sớm về muộn-->\\r\\n                                    <!--</th>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--</thead>-->\\r\\n                                <!--<tbody>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">Đi sớm</td>-->\\r\\n                                    <!--<td class=\\\"color-green bold\\\">{{ reportMonthDetail?.totalInSoonMin }} Phút <span-->\\r\\n                                        <!--*ngIf=\\\"reportMonthDetail?.totalInSoonMinText\\\">({{reportMonthDetail?.totalInSoonMinText}})</span>-->\\r\\n                                    <!--</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">Đi muộn</td>-->\\r\\n                                    <!--<td class=\\\"color-red bold\\\">{{ reportMonthDetail?.totalInLateMin }} Phút <span-->\\r\\n                                        <!--*ngIf=\\\"reportMonthDetail?.totalInLateMinText\\\">({{reportMonthDetail?.totalInLateMinText}})</span>-->\\r\\n                                    <!--</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">về sớm</td>-->\\r\\n                                    <!--<td class=\\\"color-red bold\\\">{{ reportMonthDetail?.totalOutSoonMin }} Phút <span-->\\r\\n                                        <!--*ngIf=\\\"reportMonthDetail?.totalOutSoonMinText\\\">({{reportMonthDetail?.totalOutSoonMinText}})</span>-->\\r\\n                                    <!--</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">Về muộn</td>-->\\r\\n                                    <!--<td class=\\\"color-green bold\\\">{{ reportMonthDetail?.totalOutLateMin }} Phút <span-->\\r\\n                                        <!--*ngIf=\\\"reportMonthDetail?.totalOutLateMinText\\\">({{reportMonthDetail?.totalOutLateMinText}})</span>-->\\r\\n                                    <!--</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">Xin đi muộn</td>-->\\r\\n                                    <!--<td class=\\\"bold\\\">{{ reportMonthDetail?.totalInLatencyMin }} Phút</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">Xin về sớm</td>-->\\r\\n                                    <!--<td class=\\\"bold\\\">{{ reportMonthDetail?.totalOutLatencyMin }} Phút</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--</tbody>-->\\r\\n                            <!--</table>-->\\r\\n\\r\\n                            <!--<table class=\\\"table table-hover table-striped table-bordered table-main\\\">-->\\r\\n                                <!--<thead>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<th colspan=\\\"2\\\">-->\\r\\n                                        <!--<i class=\\\"icon-grid cm-mgr-5\\\"></i>-->\\r\\n                                        <!--Thống kê theo ca-->\\r\\n                                    <!--</th>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--</thead>-->\\r\\n                                <!--<tbody>-->\\r\\n                                <!--<tr *ngFor=\\\"let shift of reportMonthDetail?.reportShiftAggregates\\\">-->\\r\\n                                    <!--<td class=\\\"w150\\\">{{ shift.reportName }}</td>-->\\r\\n                                    <!--<td class=\\\"bold\\\">{{ shift.totalDays }}</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">Chủ nhật</td>-->\\r\\n                                    <!--<td class=\\\"bold\\\">{{ reportMonthDetail?.totalSundays }}</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--</tbody>-->\\r\\n                            <!--</table>-->\\r\\n\\r\\n                            <!--<table class=\\\"table table-hover table-striped table-bordered table-main\\\">-->\\r\\n                                <!--<thead>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<th colspan=\\\"2\\\">-->\\r\\n                                        <!--<i class=\\\"icon-calendar cm-mgr-5\\\"></i>-->\\r\\n                                        <!--Thống kê công-->\\r\\n                                    <!--</th>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--</thead>-->\\r\\n                                <!--<tbody>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">Ngày thường</td>-->\\r\\n                                    <!--<td class=\\\"bold\\\">{{ reportMonthDetail?.totalNormalDays }}</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">Ngày lễ</td>-->\\r\\n                                    <!--<td class=\\\"bold\\\">{{ reportMonthDetail?.totalHolidays }}</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">Làm thêm giờ</td>-->\\r\\n                                    <!--<td class=\\\"bold\\\">{{ reportMonthDetail?.totalOvertime }}</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--</tbody>-->\\r\\n                            <!--</table>-->\\r\\n\\r\\n                            <!--<table class=\\\"table table-hover table-striped table-bordered table-main\\\">-->\\r\\n                                <!--<thead>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<th colspan=\\\"2\\\">-->\\r\\n                                        <!--<i class=\\\"icon-power cm-mgr-5\\\"></i>-->\\r\\n                                        <!--Thống kê ngày nghỉ-->\\r\\n                                    <!--</th>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--</thead>-->\\r\\n                                <!--<tbody>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">nghỉ phép</td>-->\\r\\n                                    <!--<td class=\\\"bold\\\">{{ reportMonthDetail?.totalAnnualLeave }}</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">Nghỉ không lương</td>-->\\r\\n                                    <!--<td class=\\\"bold\\\">{{ reportMonthDetail?.totalUnpaidLeave }}</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">Nghỉ bù</td>-->\\r\\n                                    <!--<td class=\\\"bold\\\">{{ reportMonthDetail?.totalCompensatory }}</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">Nghỉ chết độ</td>-->\\r\\n                                    <!--<td class=\\\"bold\\\">{{ reportMonthDetail?.totalEntitlement }}</td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--<tr>-->\\r\\n                                    <!--<td class=\\\"w150\\\">Nghỉ lễ</td>-->\\r\\n                                    <!--<td class=\\\"bold\\\"></td>-->\\r\\n                                <!--</tr>-->\\r\\n                                <!--</tbody>-->\\r\\n                            <!--</table>-->\\r\\n                        <!--</nh-tab-panel>&lt;!&ndash; END: tab-general &ndash;&gt;-->\\r\\n                        <!--<nh-tab-panel-->\\r\\n                            <!--title=\\\"Chi tiết\\\"-->\\r\\n                            <!--icon=\\\"icon-clock\\\"-->\\r\\n                            <!--id=\\\"tabMonthReportDetail\\\"-->\\r\\n                        <!--&gt;-->\\r\\n                            <!--<div class=\\\"table-responsive\\\">-->\\r\\n                                <!--<table class=\\\"table table-bordered table-hover table-main\\\">-->\\r\\n                                    <!--<thead>-->\\r\\n                                    <!--<tr>-->\\r\\n                                        <!--<th class=\\\"middle center\\\" rowspan=\\\"2\\\">Ngày</th>-->\\r\\n                                        <!--<th class=\\\"middle center\\\" rowspan=\\\"2\\\">Ca</th>-->\\r\\n                                        <!--<th class=\\\"middle center\\\" colspan=\\\"4\\\">Thời gian</th>-->\\r\\n                                        <!--<th class=\\\"middle center\\\" class=\\\"middle center\\\" rowspan=\\\"2\\\">Trạng thái</th>-->\\r\\n                                        <!--<th class=\\\"middle center w100\\\" rowspan=\\\"2\\\">Tính ăn trưa</th>-->\\r\\n                                        <!--<th class=\\\"middle center w100\\\" rowspan=\\\"2\\\">Đi sớm</th>-->\\r\\n                                        <!--<th class=\\\"middle center w100\\\" rowspan=\\\"2\\\">Về sớm</th>-->\\r\\n                                        <!--<th class=\\\"middle center w100\\\" rowspan=\\\"2\\\">Đi muộn</th>-->\\r\\n                                        <!--<th class=\\\"middle center w100\\\" rowspan=\\\"2\\\">Về muộn</th>-->\\r\\n                                    <!--</tr>-->\\r\\n                                    <!--<tr>-->\\r\\n                                        <!--<th class=\\\"center w150\\\">Vào</th>-->\\r\\n                                        <!--<th class=\\\"center w150\\\">Ra</th>-->\\r\\n                                        <!--<th class=\\\"center w100\\\">Làm việc</th>-->\\r\\n                                        <!--<th class=\\\"center w100\\\">Thêm giờ</th>-->\\r\\n                                    <!--</tr>-->\\r\\n                                    <!--</thead>-->\\r\\n                                    <!--<tbody>-->\\r\\n                                    <!--<ng-container *ngFor=\\\"let item of listReportByMonthDetail\\\">-->\\r\\n                                        <!--<tr *ngFor=\\\"let detail of item.dayDetail; let i = index\\\"-->\\r\\n                                            <!--[class.bg-success]=\\\"detail.status != null\\\">-->\\r\\n                                            <!--<td class=\\\"center middle bold\\\"-->\\r\\n                                                <!--[attr.rowspan]=\\\"item.dayDetail.length\\\"-->\\r\\n                                                <!--*ngIf=\\\"i == 0\\\">-->\\r\\n                                                <!--{{item.day}}-->\\r\\n                                            <!--</td>-->\\r\\n                                            <!--&lt;!&ndash; ONLY VISIBLE WHEN STATUS != NULL &ndash;&gt;-->\\r\\n                                            <!--<ng-container *ngIf=\\\"detail.status != null; else reportByMonthDetailResult\\\">-->\\r\\n                                                <!--<td class=\\\"center middle bold\\\">{{detail.shiftCode}}</td>-->\\r\\n                                                <!--<td colspan=\\\"10\\\" class=\\\"center bold middle\\\">-->\\r\\n                                                    <!--{{detail.statusName}}-->\\r\\n                                                <!--</td>-->\\r\\n                                            <!--</ng-container>-->\\r\\n                                            <!--&lt;!&ndash; END: ONLY VISIBLE WHEN STATUS != NULL &ndash;&gt;-->\\r\\n                                            <!--<ng-template #reportByMonthDetailResult>-->\\r\\n                                                <!--<td class=\\\"center middle bold\\\">{{detail.shiftCode}}</td>-->\\r\\n                                                <!--<td [class.color-red]=\\\"!detail.inDateTime\\\">{{detail.inDateTime ?-->\\r\\n                                                    <!--(detail.inDateTime | dateTimeFormat:'DD/MM/YYYY hh:mm') : 'Chưa chấm-->\\r\\n                                                    <!--công vào'}}-->\\r\\n                                                <!--</td>-->\\r\\n                                                <!--<td [class.color-red]=\\\"!detail.outDateTime\\\">{{detail.outDateTime ?-->\\r\\n                                                    <!--(detail.outDateTime | dateTimeFormat:'DD/MM/YYYY hh:mm') : 'Chưa-->\\r\\n                                                    <!--chấm công ra'}}-->\\r\\n                                                <!--</td>-->\\r\\n                                                <!--<td class=\\\"text-right bold\\\">-->\\r\\n                                                    <!--{{detail.totalWorkingMin}}-->\\r\\n                                                <!--</td>-->\\r\\n                                                <!--<td class=\\\"text-right bold\\\">-->\\r\\n                                                    <!--{{detail.totalOvertimeMin ? detail.totalOvertimeMin : ''}}-->\\r\\n                                                <!--</td>-->\\r\\n                                                <!--<td>-->\\r\\n                                                    <!--{{detail.statusName}}-->\\r\\n                                                <!--</td>-->\\r\\n                                                <!--<td class=\\\"center middle\\\" [attr.rowspan]=\\\"item.dayDetail.length\\\"-->\\r\\n                                                    <!--*ngIf=\\\"i === 0\\\">-->\\r\\n                                                    <!--<i class=\\\"fa fa-check color-green\\\"-->\\r\\n                                                       <!--*ngIf=\\\"item.isValidMeal\\\"></i>-->\\r\\n                                                    <!--<i class=\\\"fa fa-times color-red\\\"-->\\r\\n                                                       <!--*ngIf=\\\"!item.isValidMeal\\\"></i>-->\\r\\n                                                <!--</td>-->\\r\\n                                                <!--<td class=\\\"text-right middle\\\"-->\\r\\n                                                    <!--[ngClass]=\\\"detail.inSoonMin > 0 ? 'bold color-green' : ''\\\">-->\\r\\n                                                    <!--{{detail.inSoonMin}}-->\\r\\n                                                <!--</td>-->\\r\\n                                                <!--<td class=\\\"text-right middle\\\"-->\\r\\n                                                    <!--[ngClass]=\\\"detail.outSoonMin > 0 ? 'bold color-red' : ''\\\">-->\\r\\n                                                    <!--{{detail.outSoonMin}}-->\\r\\n                                                <!--</td>-->\\r\\n                                                <!--<td class=\\\"text-right middle\\\"-->\\r\\n                                                    <!--[ngClass]=\\\"detail.inLateMin > 0 ? 'bold color-red' : ''\\\">-->\\r\\n                                                    <!--{{detail.inLateMin}}-->\\r\\n                                                <!--</td>-->\\r\\n                                                <!--<td class=\\\"text-right middle\\\"-->\\r\\n                                                    <!--[ngClass]=\\\"detail.outLateMin > 0 ? 'bold color-green' : ''\\\">-->\\r\\n                                                    <!--{{detail.outLateMin}}-->\\r\\n                                                <!--</td>-->\\r\\n                                            <!--</ng-template>-->\\r\\n                                        <!--</tr>-->\\r\\n                                    <!--</ng-container>-->\\r\\n                                    <!--</tbody>-->\\r\\n                                    <!--<tbody>-->\\r\\n                                    <!--<tr class=\\\"bg-success\\\">-->\\r\\n                                        <!--<td class=\\\"text-right bold\\\" colspan=\\\"7\\\">Tổng số</td>-->\\r\\n                                        <!--<td class=\\\"text-right bold\\\">{{totalValidMeal}}</td>-->\\r\\n                                        <!--<td class=\\\"text-right bold\\\">{{totalInSoon}}</td>-->\\r\\n                                        <!--<td class=\\\"text-right bold color-red\\\">{{totalOutSoon}}</td>-->\\r\\n                                        <!--<td class=\\\"text-right bold color-red\\\">{{totalInLate}}</td>-->\\r\\n                                        <!--<td class=\\\"text-right bold\\\">{{totalOutLate}}</td>-->\\r\\n                                    <!--</tr>-->\\r\\n                                    <!--</tbody>-->\\r\\n                                <!--</table>-->\\r\\n                            <!--</div>-->\\r\\n                        <!--</nh-tab-panel>&lt;!&ndash; END: tab-detail &ndash;&gt;-->\\r\\n                    <!--</nh-tab>-->\\r\\n\\r\\n                <!--</div>-->\\r\\n            <!--</div>-->\\r\\n        <!--</ng-template>-->\\r\\n    <!--</nh-modal-content>-->\\r\\n    <!--<nh-modal-footer>-->\\r\\n        <!--<button type=\\\"button\\\" mat-raised-button nh-dismiss=\\\"true\\\" class=\\\"pull-right\\\">-->\\r\\n            <!--<i class=\\\"fa fa-times\\\"></i>-->\\r\\n            <!--Đóng lại-->\\r\\n        <!--</button>-->\\r\\n    <!--</nh-modal-footer>-->\\r\\n<!--</nh-modal>-->\\r\\n\\r\\n<!--<nh-modal #dayOffDetailModal size=\\\"sm\\\">-->\\r\\n    <!--<nh-modal-content>-->\\r\\n        <!--<div class=\\\"portlet light bordered form-fit cm-mgb-0\\\">-->\\r\\n            <!--<div class=\\\"portlet-title\\\">-->\\r\\n                <!--<div class=\\\"caption\\\">-->\\r\\n                    <!--<i class=\\\"icon-speech font-red-sunglo\\\"></i>-->\\r\\n                    <!--<span class=\\\"caption-subject font-red-sunglo bold uppercase\\\">Chi tiết ngày nghỉ.</span>-->\\r\\n                <!--</div>-->\\r\\n            <!--</div>-->\\r\\n            <!--<div class=\\\"portlet-body form\\\">-->\\r\\n                <!--<table class=\\\"table table-bordered table-hover\\\">-->\\r\\n                    <!--<tr>-->\\r\\n                        <!--<td class=\\\"w100 text-right\\\">Hình thức</td>-->\\r\\n                        <!--<td class=\\\"bold\\\">{{reportByShiftDetail?.status === STATUS.ANNUAL_LEAVE ? 'Nghỉ phép' :-->\\r\\n                            <!--STATUS.INSURANCE_LEAVE ? 'Nghỉ bảo hiểm' : STATUS.UNPAID_LEAVE ? 'Nghỉ không lương' :-->\\r\\n                            <!--STATUS.ENTITLEMENT_LEAVE ? 'Nghỉ chế độ' : STATUS.COMPENSATORY_LEAVE ? 'Nghỉ bù' : ''}}-->\\r\\n                        <!--</td>-->\\r\\n                    <!--</tr>-->\\r\\n                    <!--<tr>-->\\r\\n                        <!--<td class=\\\"w100 text-right\\\">Lý do</td>-->\\r\\n                        <!--<td class=\\\"bold\\\">{{reportByShiftDetail?.reason}}</td>-->\\r\\n                    <!--</tr>-->\\r\\n                <!--</table>-->\\r\\n            <!--</div>-->\\r\\n        <!--</div>-->\\r\\n    <!--</nh-modal-content>-->\\r\\n    <!--<nh-modal-footer>-->\\r\\n        <!--<button nh-dismiss=\\\"true\\\" type=\\\"button\\\" mat-raised-button>-->\\r\\n            <!--<i class=\\\"fa fa-times\\\"></i>-->\\r\\n            <!--Đóng lại-->\\r\\n        <!--</button>-->\\r\\n    <!--</nh-modal-footer>-->\\r\\n<!--</nh-modal>-->\\r\\n\\r\\n\\r\\n\\r\\n\"","import { Component, OnInit, Inject, ViewChild, ElementRef } from '@angular/core';\r\nimport { BaseComponent } from '../../../base.component';\r\nimport { Title } from '@angular/platform-browser';\r\nimport * as moment from 'moment';\r\nimport * as _ from 'lodash';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Observable } from 'rxjs';\r\nimport { map, finalize } from 'rxjs/operators';\r\nimport { IActionResultResponse } from '../../../interfaces/iaction-result-response.result';\r\nimport { SpinnerService } from '../../../core/spinner/spinner.service';\r\nimport { HelperService } from '../../../shareds/services/helper.service';\r\nimport { TimeSheetService } from './timesheet.service';\r\nimport { NhModalComponent } from '../../../shareds/components/nh-modal/nh-modal.component';\r\nimport {\r\n    MyReportByShift, ReportByShift, ReportByShiftDetail, ReportByShiftShifts,\r\n    WorkingDays\r\n} from './view-models/report-by-shift.viewmodel';\r\nimport { ReportByMonth, ReportShiftAggregate } from './view-models/report-by-month.viewmodel';\r\nimport { CheckinCheckoutHistoryViewModel } from './view-models/checkin-checkout-history.viewmodel';\r\nimport { DayDetailViewModel, ReportByMonthDetailViewModel } from './view-models/report-by-month-detail.viewmodel';\r\nimport { APP_CONFIG, IAppConfig } from '../../../configs/app.config';\r\nimport { IPageId, PAGE_ID } from '../../../configs/page-id.config';\r\nimport { UtilService } from '../../../shareds/services/util.service';\r\nimport { AppService } from '../../../shareds/services/app.service';\r\nimport { CheckPermission } from '../../../shareds/decorator/check-permission.decorator';\r\nimport { OfficeService } from '../../hr/organization/office/services/office.service';\r\n\r\n@Component({\r\n    selector: 'app-time-sheet',\r\n    templateUrl: './timekeeping-timesheet.component.html',\r\n    providers: [OfficeService, TimeSheetService, HelperService]\r\n})\r\n@CheckPermission()\r\nexport class TimekeepingTimesheetComponent extends BaseComponent implements OnInit {\r\n    @ViewChild('shiftDetailModal') shiftDetailModal: NhModalComponent;\r\n    @ViewChild('reportMonthDetailModal') reportMonthDetailModal: NhModalComponent;\r\n    @ViewChild('dayOffDetailModal') dayOffDetailModal: NhModalComponent;\r\n    @ViewChild('reportByShiftTableElement') reportByShiftTableElement: ElementRef;\r\n    @ViewChild('reportByMonthTableElement') reportByMonthTableElement: ElementRef;\r\n    officeTree = [];\r\n    listMonth = [];\r\n    listYear = [];\r\n    // daysInMonth = [];\r\n    month: number;\r\n    year: number;\r\n    officeId: number;\r\n    officeName: string;\r\n    reportByShiftDetail: ReportByShiftDetail;\r\n    shiftDetailViewType = 0;\r\n    daysInMonth = [];\r\n    viewType = 0; // 0: Detail 1: Aggregate\r\n    listReports: ReportByShift[] = [];\r\n    listReportByMonth = [];\r\n    reportMonthDetail: ReportByMonth;\r\n    listShifts: ReportShiftAggregate[] = [];\r\n    reportByMonthDetail: any;\r\n    isLoadingHistory = false;\r\n    isLoadingPrinter = false;\r\n    isSearchingMonthDetail = false;\r\n    listCheckInCheckOutHistory: CheckinCheckoutHistoryViewModel[] = [];\r\n    listReportByMonthDetail: ReportByMonthDetailViewModel[] = [];\r\n    listDayOffMethos: { id: any, name: string }[] = [];\r\n\r\n    listMyTimeSheet$: Observable<MyReportByShift[]>;\r\n\r\n    STATUS = {\r\n        // 0: Nghỉ phép\r\n        ANNUAL_LEAVE: 0,\r\n        // 1: Nghỉ không lương\r\n        UNPAID_LEAVE: 1,\r\n        // 2: Nghỉ bù\r\n        COMPENSATORY_LEAVE: 2,\r\n        // 3: Nghỉ bảo hiểm\r\n        INSURANCE_LEAVE: 3,\r\n        // 4: Nghỉ chế độ\r\n        ENTITLEMENT_LEAVE: 4,\r\n        // 5: Nghỉ tuần\r\n        WEEK_LEAVE: 5,\r\n        // 6: Nghỉ lễ\r\n        HOLIDAY_LEAVE: 6,\r\n        // 7: Nghỉ không phép\r\n        UNAUTHORIZED_LEAVE: 7\r\n    };\r\n\r\n    get totalInSoon() {\r\n        let totalInSoon = 0;\r\n        this.listReportByMonthDetail.forEach(detail => {\r\n            detail.dayDetail.forEach(item => {\r\n                totalInSoon += item.inSoonMin;\r\n            });\r\n        });\r\n\r\n        return totalInSoon;\r\n    }\r\n\r\n    get totalOutSoon() {\r\n        let totalOutSoon = 0;\r\n        this.listReportByMonthDetail.forEach(detail => {\r\n            detail.dayDetail.forEach(item => {\r\n                totalOutSoon += item.outSoonMin;\r\n            });\r\n        });\r\n\r\n        return totalOutSoon;\r\n    }\r\n\r\n    get totalInLate() {\r\n        let totalInLate = 0;\r\n        this.listReportByMonthDetail.forEach(detail => {\r\n            detail.dayDetail.forEach(item => {\r\n                totalInLate += item.inLateMin;\r\n            });\r\n        });\r\n\r\n        return totalInLate;\r\n    }\r\n\r\n    get totalOutLate() {\r\n        let totalOutLate = 0;\r\n        this.listReportByMonthDetail.forEach(detail => {\r\n            detail.dayDetail.forEach(item => {\r\n                totalOutLate += item.outLateMin;\r\n            });\r\n        });\r\n\r\n        return totalOutLate;\r\n    }\r\n\r\n    get totalValidMeal() {\r\n        return _.sumBy(this.listReportByMonthDetail, (detail: ReportByMonthDetailViewModel) => {\r\n            return detail.isValidMeal ? 1 : 0;\r\n        });\r\n    }\r\n\r\n    constructor(@Inject(APP_CONFIG) public appConfig: IAppConfig,\r\n                @Inject(PAGE_ID) pageId: IPageId,\r\n                private title: Title,\r\n                private toastr: ToastrService,\r\n                private utilService: UtilService,\r\n                private helperService: HelperService,\r\n                private spinnerService: SpinnerService,\r\n                private appService: AppService,\r\n                private officeService: OfficeService,\r\n                private timeSheetService: TimeSheetService) {\r\n        super();\r\n        this.title.setTitle('Bảng công nhân viên.');\r\n        this.appService.setupPage(pageId.HR, pageId.TIMEKEEPING_TIMESHEET, 'Chấm công', 'Bảng công nhân viên.');\r\n        // this.getPermission(this.appService);\r\n        // this.currentUser = this.appService.currentUser;\r\n\r\n        // Init list month\r\n        this.initListMonth();\r\n\r\n        // Init list year\r\n        this.initListYear();\r\n\r\n        this.initDefaultMonthAndYear();\r\n\r\n        // Init list days in month by selected month\r\n        this.initDayInMonth();\r\n\r\n        // Get list tree data\r\n        this.getTreeData();\r\n\r\n        this.listDayOffMethos = [\r\n            {id: this.STATUS.ANNUAL_LEAVE, name: 'Nghỉ phép'},\r\n            {id: this.STATUS.UNPAID_LEAVE, name: 'Nghỉ Không lương'},\r\n            {id: this.STATUS.COMPENSATORY_LEAVE, name: 'Nghỉ bù'},\r\n            {id: this.STATUS.INSURANCE_LEAVE, name: 'Nghỉ bảo hiểm'},\r\n            {id: this.STATUS.ENTITLEMENT_LEAVE, name: 'Nghỉ chế độ'},\r\n            {id: this.STATUS.WEEK_LEAVE, name: 'Nghỉ tuần'},\r\n            {id: this.STATUS.HOLIDAY_LEAVE, name: 'Nghỉ lễ'},\r\n            {id: this.STATUS.UNAUTHORIZED_LEAVE, name: 'Nghỉ không phép'}\r\n        ];\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.search();\r\n    }\r\n\r\n    onSelectMonth(month) {\r\n        this.month = month.id;\r\n        this.search();\r\n    }\r\n\r\n    onSelectYear(year) {\r\n        this.year = year.id;\r\n        this.search();\r\n    }\r\n\r\n    onSelectOffice(office) {\r\n        if (office.id > 0) {\r\n            this.officeId = office.id;\r\n            this.officeName = office.text;\r\n            this.search();\r\n        }\r\n    }\r\n\r\n    onShiftDetailTabSelect(viewType: number) {\r\n        this.shiftDetailViewType = viewType;\r\n        if (this.shiftDetailViewType === 0) {\r\n\r\n        } else {\r\n            this.getCheckInCheckOutHistory();\r\n        }\r\n    }\r\n\r\n    changeReportType(viewType) {\r\n        this.viewType = viewType;\r\n        this.search();\r\n    }\r\n\r\n    search() {\r\n        // if (this.currentUser && !this.currentUser.isAdmin && this.currentUser.isLeader !== 1 && this.currentUser.isLeader !== 2) {\r\n        //     if (this.viewType === 0) {\r\n        //         this.getMyTimeSheet();\r\n        //     } else {\r\n        //         this.getMyTimeSheetResult();\r\n        //     }\r\n        // } else {\r\n        //     if (!this.officeId) {\r\n        //         this.officeId = this.currentUser.officeId;\r\n        //     }\r\n        //     if (!this.currentUser.isAdmin && !this.isHasViewPermission) {\r\n        //         this.officeId = this.currentUser.officeId;\r\n        //     }\r\n        //     this.spinnerService.show();\r\n        //     if (this.viewType === 0) {\r\n        //         this.initDayInMonth();\r\n        //         this.timeSheetService.getListTimeSheet(this.keyword, this.officeId, this.month, this.year)\r\n        //             .finally(() => this.spinnerService.hide())\r\n        //             .subscribe(result => {\r\n        //                 this.renderListReportByShift(result);\r\n        //\r\n        //             });\r\n        //     } else {\r\n        //         this.timeSheetService.getListTimeSheetResult(this.keyword, this.officeId, this.month, this.year)\r\n        //             .finally(() => this.spinnerService.hide())\r\n        //             .subscribe((result: any) => {\r\n        //                 if (result && result.length > 0) {\r\n        //                     this.listShifts = _.orderBy(result[0].reportShiftAggregates, ['shiftId'], ['asc']) as ReportShiftAggregate[];\r\n        //                     this.listReportByMonth = _.orderBy(_.map(result, (reportByMonth: ReportByMonth) => {\r\n        //                         const reportByMonthItem = reportByMonth;\r\n        //                         reportByMonthItem.totalOvertimeText = this.utilService.getHourTextFromMinute(reportByMonthItem.totalOvertime);\r\n        //                         return reportByMonthItem;\r\n        //                     }), ['userId'], ['asc']);\r\n        //                 } else {\r\n        //                     this.listReportByMonth = [];\r\n        //                 }\r\n        //             });\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    detail(shiftId: string, enrollNumber: number, fullName: string, workingDay: WorkingDays) {\r\n        if (workingDay) {\r\n            this.reportByShiftDetail = new ReportByShiftDetail(\r\n                shiftId,\r\n                enrollNumber,\r\n                fullName,\r\n                `${workingDay.day}/${workingDay.month}/${workingDay.year}`,\r\n                workingDay.day,\r\n                workingDay.month,\r\n                workingDay.year,\r\n                workingDay.inDateTime,\r\n                workingDay.outDateTime,\r\n                workingDay.inSoonMin,\r\n                workingDay.outSoonMin,\r\n                workingDay.inLateMin,\r\n                workingDay.outLateMin,\r\n                workingDay.status,\r\n                workingDay.inLatencyMin,\r\n                workingDay.outLatencyMin,\r\n                workingDay.inLatencyReason,\r\n                workingDay.outLatencyReason);\r\n\r\n            // Trường hợp là lịch sử lấy về danh sách lịch sử checkin checkout\r\n            if (this.shiftDetailViewType === 1) {\r\n                this.getCheckInCheckOutHistory();\r\n            }\r\n        } else {\r\n            this.toastr.error('Không có dữ liệu chấm công ca làm việc này.');\r\n        }\r\n\r\n        if (workingDay.status == null) {\r\n            this.shiftDetailModal.show();\r\n        }\r\n    }\r\n\r\n    markAsValid(isCheckIn: boolean) {\r\n        // swal({\r\n        //     title: '',\r\n        //     text: `Bạn có chắc chắn muốn đánh dấu hợp lệ cho ca làm việc này.`,\r\n        //     type: 'warning',\r\n        //     showCancelButton: true,\r\n        //     confirmButtonColor: '#3085d6',\r\n        //     cancelButtonColor: '#dd3333',\r\n        //     confirmButtonText: 'Đồng ý',\r\n        //     cancelButtonText: 'Hủy bỏ'\r\n        // }).then(() => {\r\n        //     this.subscribers.markAsValid = this.timeSheetService.markAsValid(this.reportByShiftDetail.day, this.reportByShiftDetail.month,\r\n        //         this.reportByShiftDetail.year, this.reportByShiftDetail.enrollNumber, this.reportByShiftDetail.shiftId, isCheckIn)\r\n        //         .subscribe((result: IActionResultResponse) => {\r\n        //             this.toastr.success(result.message);\r\n        //             this.shiftDetailModal.dismiss();\r\n        //             this.search();\r\n        //         });\r\n        // }, () => {\r\n        // });\r\n    }\r\n\r\n    deleteShift() {\r\n        // swal({\r\n        //     title: '',\r\n        //     text: `Bạn có chắc chắn muốn xóa ca làm việc này. Lưu ý sau khi xóa không thể lấy lại.`,\r\n        //     type: 'warning',\r\n        //     showCancelButton: true,\r\n        //     confirmButtonColor: '#3085d6',\r\n        //     cancelButtonColor: '#dd3333',\r\n        //     confirmButtonText: 'Đồng ý',\r\n        //     cancelButtonText: 'Hủy bỏ'\r\n        // }).then(() => {\r\n        //     this.subscribers.deleteShift = this.timeSheetService.deleteShift(this.reportByShiftDetail.day, this.reportByShiftDetail.month,\r\n        //         this.reportByShiftDetail.year, this.reportByShiftDetail.enrollNumber, this.reportByShiftDetail.shiftId)\r\n        //         .subscribe((result: IActionResultResponse) => {\r\n        //             this.toastr.success(result.message);\r\n        //             this.shiftDetailModal.dismiss();\r\n        //             this.search();\r\n        //         });\r\n        // }, () => {\r\n        // });\r\n    }\r\n\r\n    onChangeDayOffMethod(method) {\r\n        this.subscribers.changeMethod = this.timeSheetService.changeMethod(this.reportByShiftDetail.day, this.reportByShiftDetail.month,\r\n            this.reportByShiftDetail.year, this.reportByShiftDetail.enrollNumber, this.reportByShiftDetail.shiftId, method.id)\r\n            .subscribe((result: IActionResultResponse) => {\r\n                this.toastr.success(result.message);\r\n                this.search();\r\n            });\r\n    }\r\n\r\n    monthReportDetail(monthReport: ReportByMonth) {\r\n        console.log(monthReport);\r\n        this.reportByMonthDetail = monthReport;\r\n        this.reportMonthDetailModal.show();\r\n        this.spinnerService.show();\r\n\r\n        monthReport.reportShiftAggregates = _.orderBy(monthReport.reportShiftAggregates, ['shiftId'], ['asc']);\r\n        this.reportMonthDetail = monthReport;\r\n        this.reportMonthDetail.totalInLateMinText = this.utilService.getHourTextFromMinute(this.reportMonthDetail.totalInLateMin);\r\n        this.reportMonthDetail.totalInSoonMinText = this.utilService.getHourTextFromMinute(this.reportMonthDetail.totalInSoonMin);\r\n        this.reportMonthDetail.totalOutLateMinText = this.utilService.getHourTextFromMinute(this.reportMonthDetail.totalOutLateMin);\r\n        this.reportMonthDetail.totalOutSoonMinText = this.utilService.getHourTextFromMinute(this.reportMonthDetail.totalOutSoonMin);\r\n        this.timeSheetService.getUserTimesheet(monthReport.enrollNumber, this.month, this.year)\r\n            .pipe(finalize(() => this.spinnerService.hide()))\r\n            .subscribe(result => {\r\n                this.renderMonthDetail(result);\r\n            });\r\n    }\r\n\r\n    getShiftTotal(shift, reportShiftAggregates) {\r\n        const currentShiftAggregate = _.filter(reportShiftAggregates, (reportShiftAggregate: any) => {\r\n            return reportShiftAggregate.shiftId === shift.shiftId;\r\n        });\r\n\r\n        return _.sumBy(currentShiftAggregate, (o: any) => {\r\n            return o.totalDays;\r\n        });\r\n    }\r\n\r\n    print() {\r\n        this.isLoadingPrinter = true;\r\n        this.timeSheetService.getDataForPrint(this.officeId, this.month, this.year)\r\n            .pipe(finalize(() => this.isLoadingPrinter = false))\r\n            .subscribe((result: { listReportByShift: ReportByShift[], listReportByMonth: ReportByMonth[] }) => {\r\n                if (result) {\r\n                    this.listShifts = _.orderBy(result.listReportByMonth[0].reportShiftAggregates, ['shiftId'], ['asc']);\r\n                    this.listReportByMonth = _.orderBy(_.map(result.listReportByMonth, (reportByMonth: ReportByMonth) => {\r\n                        const reportByMonthItem = reportByMonth;\r\n                        reportByMonthItem.totalOvertimeText = this.utilService.getHourTextFromMinute(reportByMonthItem.totalOvertime);\r\n                        return reportByMonthItem;\r\n                    }), ['userId'], ['asc']);\r\n\r\n                    this.renderListReportByShift(result.listReportByShift);\r\n\r\n                    setTimeout(() => {\r\n                        this.showPrintModal();\r\n                    }, 500);\r\n                } else {\r\n                    this.listReportByMonth = [];\r\n                }\r\n            });\r\n    }\r\n\r\n    private initDayInMonth() {\r\n        const daysInMonth = moment(`1/${this.month}/${this.year}`, 'DD/MM/YYYY').daysInMonth();\r\n        this.daysInMonth = [];\r\n        for (let i = 1; i <= daysInMonth; i++) {\r\n            this.daysInMonth = [...this.daysInMonth, {\r\n                day: i,\r\n                isSunday: moment(`${i}/${this.month}/${this.year}`, 'DD/MM/YYYY').days() === 0\r\n            }];\r\n        }\r\n    }\r\n\r\n    private initListMonth() {\r\n        for (let i = 1; i <= 12; i++) {\r\n            this.listMonth = [...this.listMonth, {id: i, name: `Tháng ${i}`}];\r\n        }\r\n    }\r\n\r\n    private initListYear() {\r\n        const currentYear = moment().year();\r\n        for (let year = 2016; year < currentYear + 1; year++) {\r\n            this.listYear.push({id: year, name: year});\r\n        }\r\n    }\r\n\r\n    private getTreeData() {\r\n        this.spinnerService.show();\r\n        this.officeService.getTree()\r\n            .pipe(finalize(() => this.spinnerService.hide()))\r\n            .subscribe((result: any) => this.officeTree = result);\r\n    }\r\n\r\n    private initDefaultMonthAndYear() {\r\n        this.month = moment().month() + 1;\r\n        this.year = moment().year();\r\n    }\r\n\r\n    private getCheckInCheckOutHistory() {\r\n        this.isLoadingHistory = true;\r\n        this.timeSheetService.getCheckInCheckOutHistory(this.reportByShiftDetail.enrollNumber,\r\n            this.reportByShiftDetail.day, this.reportByShiftDetail.month, this.reportByShiftDetail.year)\r\n            .pipe(finalize(() => this.isLoadingHistory = false))\r\n            .subscribe(result => {\r\n                const shiftGroup = _.groupBy(result, (item: any) => {\r\n                    return item.shiftId;\r\n                });\r\n\r\n                this.listCheckInCheckOutHistory = [];\r\n                for (const key in shiftGroup) {\r\n                    if (shiftGroup.hasOwnProperty(key)) {\r\n                        const shift = shiftGroup[key];\r\n                        const history = <CheckinCheckoutHistoryViewModel>{\r\n                            shiftId: key,\r\n                            shiftCode: shift[0].shiftCode,\r\n                            checkInTimes: []\r\n                        };\r\n\r\n                        shift.forEach((item: any) => {\r\n                            history.checkInTimes = [...history.checkInTimes, item.checkInTime];\r\n                        });\r\n                        history.checkInTimes = _.orderBy(history.checkInTimes, ['checkInTime'], ['asc']);\r\n\r\n                        this.listCheckInCheckOutHistory = [...this.listCheckInCheckOutHistory, history];\r\n                    }\r\n                }\r\n\r\n                this.listCheckInCheckOutHistory = _.orderBy(this.listCheckInCheckOutHistory, ['shiftId'], ['asc']);\r\n            });\r\n    }\r\n\r\n    private renderMonthDetail(result: any) {\r\n        this.listReportByMonthDetail = [];\r\n        const groupDays = _.groupBy(result, (item: any) => {\r\n            return item.day;\r\n        });\r\n\r\n        for (const key in groupDays) {\r\n            if (groupDays.hasOwnProperty(key)) {\r\n                const dayGroup = groupDays[key];\r\n                const day = <ReportByMonthDetailViewModel>{\r\n                    day: dayGroup[0].day,\r\n                    isValidMeal: false,\r\n                    dayDetail: []\r\n                };\r\n\r\n                let dayDetails = [];\r\n                dayGroup.forEach((item) => {\r\n                    dayDetails = [...dayDetails, <DayDetailViewModel>{\r\n                        shiftId: item.shiftId,\r\n                        shiftCode: item.shiftCode,\r\n                        outLateMin: item.outLateMin,\r\n                        inLateMin: item.inLateMin,\r\n                        outSoonMin: item.outSoonMin,\r\n                        inSoonMin: item.inSoonMin,\r\n                        intTime: item.inTime,\r\n                        outTime: item.outTime,\r\n                        inDateTime: item.in,\r\n                        outDateTime: item.out,\r\n                        totalWorkingMin: item.totalWorkingMin,\r\n                        statusName: this.getStatusName(item.status),\r\n                        status: item.status,\r\n                        totalHolidaysLeave: item.totalHolidaysLeave,\r\n                        totalOvertimeMin: item.totalOvertimeMin\r\n                        // totalMin: item.totalWorkingMin + (item.totalOvertimeMin ? item.totalOvertimeMin : 0)\r\n                    }];\r\n                });\r\n\r\n                day.isValidMeal = _.sumBy(dayDetails, (item) => {\r\n                    return item.totalWorkingMin + (item.totalOvertimeMin ? item.totalOvertimeMin : 0);\r\n                }) > 270;\r\n                day.dayDetail = _.orderBy(dayDetails, ['shiftId'], ['asc']);\r\n                this.listReportByMonthDetail = [...this.listReportByMonthDetail, day];\r\n            }\r\n        }\r\n    }\r\n\r\n    private getStatusName(status: number) {\r\n        switch (status) {\r\n            case this.STATUS.ANNUAL_LEAVE:\r\n                return 'Nghỉ phép';\r\n            case this.STATUS.UNPAID_LEAVE:\r\n                return 'Nghỉ không lương';\r\n            case this.STATUS.INSURANCE_LEAVE:\r\n                return 'Nghỉ bảo hiểm';\r\n            case this.STATUS.COMPENSATORY_LEAVE:\r\n                return 'Nghỉ bù';\r\n            case this.STATUS.ENTITLEMENT_LEAVE:\r\n                return 'Nghỉ chế độ';\r\n            case this.STATUS.WEEK_LEAVE:\r\n                return 'Nghỉ tuần';\r\n            case this.STATUS.HOLIDAY_LEAVE:\r\n                return 'Nghỉ lễ';\r\n            default:\r\n                return '';\r\n        }\r\n    }\r\n\r\n    private getMyTimeSheet() {\r\n        this.spinnerService.show();\r\n        this.listMyTimeSheet$ = this.timeSheetService.getMyTimeSheet(this.month, this.year)\r\n            .pipe(finalize(() => this.spinnerService.hide()),\r\n                map(result => {\r\n                    let listMyReportByShift: MyReportByShift[] = [];\r\n                    const groupByMonth = _.groupBy(result, (item: any) => {\r\n                        return item.month;\r\n                    });\r\n                    if (groupByMonth) {\r\n                        for (const key in groupByMonth) {\r\n                            if (groupByMonth.hasOwnProperty(key)) {\r\n                                const groupByMonthItems = groupByMonth[key];\r\n                                const firstItem = groupByMonthItems[0];\r\n                                const myReportByShift = new MyReportByShift(firstItem.enrollNumber, firstItem.userId, firstItem.fullName,\r\n                                    firstItem.month, firstItem.year, []);\r\n\r\n                                const groupByShifts = _.groupBy(groupByMonthItems, (monthItem: any) => {\r\n                                    return monthItem.shiftId;\r\n                                });\r\n\r\n                                if (groupByShifts) {\r\n                                    for (const shiftKey in groupByShifts) {\r\n                                        if (groupByShifts.hasOwnProperty(shiftKey)) {\r\n                                            const shifts = groupByShifts[shiftKey];\r\n                                            const shiftItem = new ReportByShiftShifts(shifts[0].shiftId, shifts[0].shiftCode,\r\n                                                shifts[0].shiftReportName, []);\r\n\r\n                                            this.daysInMonth.forEach((day) => {\r\n                                                const workingDays = _.find(shifts, (item) => {\r\n                                                    return day.day === item.day;\r\n                                                });\r\n\r\n                                                // Trường hợp có đi làm\r\n                                                if (workingDays) {\r\n                                                    const workingDay = new WorkingDays(workingDays.day,\r\n                                                        workingDays.month,\r\n                                                        workingDays.year,\r\n                                                        workingDays.inTime,\r\n                                                        workingDays.outTime,\r\n                                                        workingDays.in,\r\n                                                        workingDays.out,\r\n                                                        workingDays.inSoonMin,\r\n                                                        workingDays.outSoonMin,\r\n                                                        workingDays.inLateMin,\r\n                                                        workingDays.outLateMin,\r\n                                                        workingDays.quarter,\r\n                                                        workingDays.isValid,\r\n                                                        workingDays.isValidWorkSchedule,\r\n                                                        workingDays.isSunday,\r\n                                                        workingDays.isHoliday,\r\n                                                        workingDays.totalWorkingMin,\r\n                                                        workingDays.totalOvertimeMin,\r\n                                                        workingDays.workUnit,\r\n                                                        workingDays.status);\r\n\r\n                                                    workingDay.reason = workingDays.reason;\r\n                                                    shiftItem.workingDays = [...shiftItem.workingDays, workingDay];\r\n                                                } else {\r\n                                                    const dayOff = new WorkingDays(day.day, this.month, this.year);\r\n                                                    dayOff.status = -1;\r\n                                                    dayOff.isSunday = day.isSunday;\r\n                                                    dayOff.reason = day.reason;\r\n\r\n                                                    shiftItem.workingDays = [...shiftItem.workingDays, dayOff];\r\n                                                }\r\n                                            });\r\n\r\n                                            myReportByShift.shifts = [...myReportByShift.shifts, shiftItem];\r\n                                        }\r\n                                    }\r\n                                }\r\n\r\n                                listMyReportByShift = [...listMyReportByShift, myReportByShift];\r\n                            }\r\n                        }\r\n                    }\r\n                    return listMyReportByShift;\r\n                }));\r\n    }\r\n\r\n    private getMyTimeSheetResult() {\r\n        this.spinnerService.show();\r\n        this.timeSheetService.getMyTimeSheetResult(this.month, this.year)\r\n            .pipe(finalize(() => this.spinnerService.hide()))\r\n            .subscribe((result: ReportByMonth[]) => {\r\n                if (result && result.length > 0) {\r\n                    this.listShifts = _.orderBy(result[0].reportShiftAggregates, ['shiftId'], ['asc']);\r\n                    this.listReportByMonth = _.orderBy(result, ['userId'], ['asc']);\r\n                } else {\r\n                    this.listReportByMonth = [];\r\n                }\r\n            });\r\n    }\r\n\r\n    private showPrintModal() {\r\n        const style = `\r\n                        h4.timekeeping-title {\r\n                            text-transform: uppercase;\r\n                            font-weight: bold;\r\n                            font-size: 25px;\r\n                            margin-top: 10px;\r\n                            text-align: center;\r\n                        }\r\n                    `;\r\n        const tableReportByShiftContent = this.reportByShiftTableElement.nativeElement.innerHTML;\r\n        const tableReportByMonthContent = this.reportByMonthTableElement.nativeElement.innerHTML;\r\n        const currentDate = new Date();\r\n        const content = `\r\n                            <div class=\"print-page\">\r\n                                <header>\r\n                                    <img src=\"${this.appConfig.CORE_API_URL}/assets/images/print/print-header.jpg\" alt=\"\">\r\n                                </header>\r\n                                <h4 class=\"timekeeping-title\">\r\n                                <!-- TODO: Check this -->\r\n                                </h4>\r\n                                <div class=\"wrapper-table\">\r\n                                    <table class=\"bordered\">\r\n                                        ${tableReportByShiftContent}\r\n                                    </table>\r\n                                    <div class=\"note\">\r\n                                        Ghi chú: Đi làm X; Nghỉ phép NP; Nghỉ lễ: NL; Nghỉ không lương: NKL; Nghỉ chế độ: NCĐ; Nghỉ BHXH: \r\n                                        NBH; Nghỉ tuần: NT; Nghỉ bù: NB\r\n                                    </div>\r\n                                </div>\r\n                                <footer>\r\n                                    <img src=\"${this.appConfig.CORE_API_URL}/assets/images/print/print-footer.jpg\" alt=\"\">\r\n                                </footer>\r\n                            </div>\r\n                            <div class=\"page-break\"></div>\r\n                            <div class=\"print-page\">\r\n                                <header>\r\n                                    <img src=\"${this.appConfig.CORE_API_URL}/assets/images/print/print-header.jpg\" alt=\"\">\r\n                                </header>\r\n                                <h4 class=\"timekeeping-title\">\r\n                                <!-- TODO: Check this -->\r\n                                </h4>\r\n                                <div class=\"wrapper-table\">\r\n                                        <table class=\"bordered\">\r\n                                            ${tableReportByMonthContent}\r\n                                        </table>\r\n                                    </div>\r\n                                    <div  class=\"text-right\"style=\"padding: 0 30px\">\r\n                                        <i>\r\n                                            Hà nội, ngày ${currentDate.getDate()} tháng ${currentDate.getMonth() + 1} \r\n                                            năm ${currentDate.getFullYear()}\r\n                                        </i>\r\n                                    </div>\r\n                                    <table class=\"w100pc\" style=\"margin-top: 10px;\">\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <td class=\"center uppercase\">Người lập bảng</td>\r\n                                                <td class=\"center uppercase\">PT bộ phận</td>\r\n                                                <td class=\"center uppercase\">Người kiểm tra</td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td style=\"min-height: 100px; height: 100px;\"></td>\r\n                                                <td style=\"min-height: 100px; height: 100px;\"></td>\r\n                                                <td style=\"min-height: 100px; height: 100px;\"></td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                        <tfoot>\r\n                                             <tr>\r\n                                                <td class=\"center\">${this.currentUser ? this.currentUser.fullName : ''}</td>\r\n                                                <td class=\"center\"></td>\r\n                                                <td class=\"center\"></td>\r\n                                            </tr>\r\n                                        </tfoot>\r\n                                    </table>\r\n                                <footer>\r\n                                    <img src=\"${this.appConfig.CORE_API_URL}/assets/images/print/print-footer.jpg\" alt=\"\">\r\n                                </footer>\r\n                            </div>\r\n                        `;\r\n\r\n        this.helperService.openPrintWindow(`Bảng công phòng ${this.officeName} tháng ${this.month} năm ${this.year}`, content, style);\r\n    }\r\n\r\n    private renderListReportByShift(result) {\r\n        this.listReports = [];\r\n        const groupByUsers = _.groupBy(result, (item: any) => {\r\n            return item.userId;\r\n        });\r\n\r\n        for (const key in groupByUsers) {\r\n            if (groupByUsers.hasOwnProperty(key)) {\r\n                const items = groupByUsers[key];\r\n                const firstItem = _.first(items);\r\n                const reportItem = new ReportByShift(firstItem.enrollNumber, firstItem.userId, firstItem.fullName, []);\r\n                const groupByShifts = _.groupBy(items, (item: any) => {\r\n                    return item.shiftId;\r\n                });\r\n\r\n                for (const shiftKey in groupByShifts) {\r\n                    if (groupByShifts.hasOwnProperty(shiftKey)) {\r\n                        const shifts = groupByShifts[shiftKey];\r\n                        const shiftItem = new ReportByShiftShifts(shifts[0].shiftId, shifts[0].shiftCode,\r\n                            shifts[0].shiftReportName, []);\r\n\r\n                        this.daysInMonth.forEach((day) => {\r\n                            const workingDays = _.find(shifts, (item) => {\r\n                                return day.day === item.day;\r\n                            });\r\n\r\n                            // Trường hợp có đi làm\r\n                            if (workingDays) {\r\n                                const workingDay = new WorkingDays(\r\n                                    workingDays.day,\r\n                                    workingDays.month,\r\n                                    workingDays.year,\r\n                                    workingDays.inTime,\r\n                                    workingDays.outTime,\r\n                                    workingDays.in,\r\n                                    workingDays.out,\r\n                                    workingDays.inSoonMin,\r\n                                    workingDays.outSoonMin,\r\n                                    workingDays.inLateMin,\r\n                                    workingDays.outLateMin,\r\n                                    workingDays.quarter,\r\n                                    workingDays.isValid,\r\n                                    workingDays.isValidWorkSchedule,\r\n                                    workingDays.isSunday,\r\n                                    workingDays.isHoliday,\r\n                                    workingDays.totalWorkingMin,\r\n                                    workingDays.totalOvertimeMin,\r\n                                    workingDays.workUnit,\r\n                                    workingDays.status,\r\n                                    workingDays.inLatencyMin,\r\n                                    workingDays.outLatencyMin,\r\n                                    workingDays.inLatencyReason,\r\n                                    workingDays.outLatencyReason);\r\n\r\n                                workingDay.reason = workingDays.reason;\r\n                                shiftItem.workingDays = [...shiftItem.workingDays, workingDay];\r\n                            } else {\r\n                                const dayOff = new WorkingDays(day.day, this.month, this.year);\r\n                                dayOff.status = -1;\r\n                                dayOff.isSunday = day.isSunday;\r\n                                dayOff.reason = day.reason;\r\n\r\n                                shiftItem.workingDays = [...shiftItem.workingDays, dayOff];\r\n                            }\r\n                        });\r\n\r\n                        reportItem.shifts = [...reportItem.shifts, shiftItem];\r\n                    }\r\n                }\r\n\r\n                this.listReports = [...this.listReports, reportItem];\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { ReportByMonth } from './view-models/report-by-month.viewmodel';\r\n\r\n@Injectable()\r\nexport class TimeSheetService {\r\n    url = 'timesheet/';\r\n\r\n    constructor(private http: HttpClient) {\r\n    }\r\n\r\n    getListTimeSheet(keyword: string, officeId: number, month: number, year: number) {\r\n        return this.http.get(`${this.url}get-timesheet`, {\r\n            params: new HttpParams()\r\n                .set('keyword', keyword)\r\n                .set('officeId', officeId.toString())\r\n                .set('month', month.toString())\r\n                .set('year', year.toString())\r\n        });\r\n    }\r\n\r\n    getListTimeSheetResult(keyword: string, officeId: number, month: number, year: number) {\r\n        return this.http.get(`${this.url}get-timesheet-result`, {\r\n            params: new HttpParams()\r\n                .set('keyword', keyword)\r\n                .set('officeId', officeId.toString())\r\n                .set('month', month.toString())\r\n                .set('year', year.toString())\r\n        });\r\n    }\r\n\r\n    getCheckInCheckOutHistory(enrollNumber: number, day: number, month: number, year: number) {\r\n        return this.http.get(`${this.url}get-checkin-checkout-history`, {\r\n            params: new HttpParams().set('enrollNumber', enrollNumber.toString())\r\n                .set('day', day.toString())\r\n                .set('month', month.toString())\r\n                .set('year', year.toString())\r\n        });\r\n    }\r\n\r\n    getUserTimesheet(enrollNumber: number, month: number, year: number) {\r\n        return this.http.get(`${this.url}get-user-timesheet`, {\r\n            params: new HttpParams().set('enrollNumber', enrollNumber.toString())\r\n                .set('month', month.toString())\r\n                .set('year', year.toString())\r\n        });\r\n    }\r\n\r\n    getMyTimeSheet(month: number, year: number) {\r\n        return this.http.get(`${this.url}get-my-timesheet`, {\r\n            params: new HttpParams()\r\n                .set('month', month ? month.toString() : '')\r\n                .set('year', year.toString())\r\n        });\r\n    }\r\n\r\n    getMyTimeSheetResult(month: number, year: number) {\r\n        return this.http.get<ReportByMonth[]>(`${this.url}get-my-timesheet-result`, {\r\n            params: new HttpParams()\r\n                .set('month', month ? month.toString() : '')\r\n                .set('year', year.toString())\r\n        });\r\n    }\r\n\r\n    markAsValid(day: number, month: number, year: number, enrollNumber: number, shiftId: string, isCheckIn: boolean) {\r\n        return this.http.post(`${this.url}mark-as-valid`, '', {\r\n            params: new HttpParams()\r\n                .set('day', day.toString())\r\n                .set('month', month.toString())\r\n                .set('year', year.toString())\r\n                .set('enrollNumber', enrollNumber.toString())\r\n                .set('shiftId', shiftId)\r\n                .set('isCheckIn', isCheckIn.toString())\r\n        });\r\n    }\r\n\r\n    deleteShift(day: number, month: number, year: number, enrollNumber: number, shiftId: string) {\r\n        return this.http.post(`${this.url}delete-shift`, '', {\r\n            params: new HttpParams()\r\n                .set('day', day.toString())\r\n                .set('month', month.toString())\r\n                .set('year', year.toString())\r\n                .set('enrollNumber', enrollNumber.toString())\r\n                .set('shiftId', shiftId)\r\n        });\r\n    }\r\n\r\n    changeMethod(day: number, month: number, year: number, enrollNumber: number, shiftId: string, method: number) {\r\n        return this.http.post(`${this.url}change-method`, '', {\r\n            params: new HttpParams()\r\n                .set('day', day.toString())\r\n                .set('month', month.toString())\r\n                .set('year', year.toString())\r\n                .set('enrollNumber', enrollNumber.toString())\r\n                .set('shiftId', shiftId)\r\n                .set('method', method.toString())\r\n        });\r\n    }\r\n\r\n    getDataForPrint(officeId: number, month: number, year: number) {\r\n        return this.http.get(`${this.url}get-data-for-print`, {\r\n            params: new HttpParams()\r\n                .set('officeId', officeId.toString())\r\n                .set('month', month.toString())\r\n                .set('year', year.toString())\r\n        });\r\n    }\r\n}\r\n","import { TimeObject } from '../../../../shareds/models/time-object.model';\r\n\r\nexport class MyReportByShift {\r\n    constructor(public enrollNumber: number,\r\n        public userId: string,\r\n        public fullName: string,\r\n        public month: number,\r\n        public year: number,\r\n        public shifts: ReportByShiftShifts[]) {\r\n    }\r\n}\r\n\r\nexport class ReportByShift {\r\n    constructor(public enrollNumber: number,\r\n        public userId: string,\r\n        public fullName: string,\r\n        public shifts: ReportByShiftShifts[]) {\r\n    }\r\n}\r\n\r\nexport class ReportByShiftShifts {\r\n    constructor(public id: string,\r\n        public code: string,\r\n        public reportName: string,\r\n        public workingDays: WorkingDays[]) {\r\n    }\r\n}\r\n\r\nexport class WorkingDays {\r\n    statusText: string;\r\n    reason: string;\r\n\r\n    constructor(public day: number,\r\n        public month: number,\r\n        public year: number,\r\n        public inTime?: TimeObject,\r\n        public outTime?: TimeObject,\r\n        public inDateTime?: string,\r\n        public outDateTime?: string,\r\n        public inSoonMin?: number,\r\n        public outSoonMin?: number,\r\n        public inLateMin?: number,\r\n        public outLateMin?: number,\r\n        public quarter?: number,\r\n        public isValid?: boolean,\r\n        public isValidWorkSchedule?: boolean,\r\n        public isSunday?: boolean,\r\n        public isHoliday?: boolean,\r\n        public totalWorkingMin?: number,\r\n        public totalOvertimeMin?: number,\r\n        public workUnit?: number,\r\n        public status?: number,\r\n        public inLatencyMin?: number,\r\n        public outLatencyMin?: number,\r\n        public inLatencyReason?: string,\r\n        public outLatencyReason?: string) {\r\n        this.statusText = this.getStatusText(this.status);\r\n    }\r\n\r\n    STATUS = {\r\n        // Nghỉ phép\r\n        ANNUAL_LEAVE: 0,\r\n        // 1: Nghỉ không lương\r\n        UNPAID_LEAVE: 1,\r\n        // 2: Nghỉ bù\r\n        COMPENSATORY_LEAVE: 2,\r\n        // 3: Nghỉ bảo hiểm\r\n        INSURANCE_LEAVE: 3,\r\n        // 4: Nghỉ chế độ\r\n        ENTITLEMENT_LEAVE: 4,\r\n        // 5: Nghỉ tuần\r\n        WEEK_LEAVE: 5,\r\n        // 6: Nghỉ lẽ\r\n        HOLIDAY_LEAVE: 6,\r\n        // 7: Nghỉ không phép\r\n        UNAUTHORIZED_LEAVE: 7\r\n    };\r\n\r\n    private getStatusText(status?: number): string {\r\n        if (status == null) {\r\n            return '';\r\n        }\r\n\r\n        return status === this.STATUS.ANNUAL_LEAVE ? 'NP'\r\n            : status === this.STATUS.UNPAID_LEAVE ? 'NKL'\r\n                : status === this.STATUS.COMPENSATORY_LEAVE ? 'NB'\r\n                    : status === this.STATUS.INSURANCE_LEAVE ? 'NBH'\r\n                        : status === this.STATUS.ENTITLEMENT_LEAVE ? 'NCĐ'\r\n                            : status === this.STATUS.WEEK_LEAVE ? 'NT'\r\n                                : status === this.STATUS.HOLIDAY_LEAVE ? 'NL'\r\n                                    : status === this.STATUS.UNAUTHORIZED_LEAVE ? 'NKP' : '';\r\n    }\r\n}\r\n\r\nexport class ReportByShiftDetail {\r\n    statusText: string;\r\n    reason: string;\r\n\r\n    constructor(public shiftId: string,\r\n        public enrollNumber: number,\r\n        public fullName: string,\r\n        public checkInDate: string,\r\n        public day: number,\r\n        public month: number,\r\n        public year: number,\r\n        public inDateTime: string,\r\n        public outDateTime: string,\r\n        public inSoonMin: number,\r\n        public outSoonMin: number,\r\n        public inLateMin: number,\r\n        public outLateMin: number,\r\n        public status?: number,\r\n        public inLatencyMin?: number,\r\n        public outLatencyMin?: number,\r\n        public inLatencyReason?: string,\r\n        public outLatencyReason?: string) {\r\n        this.statusText = this.getStatusText(this.status);\r\n    }\r\n\r\n    STATUS = {\r\n        // Nghỉ phép\r\n        ANNUAL_LEAVE: 0,\r\n        // 1: Nghỉ không lương\r\n        UNPAID_LEAVE: 1,\r\n        // 2: Nghỉ bù\r\n        COMPENSATORY_LEAVE: 2,\r\n        // 3: Nghỉ bảo hiểm\r\n        INSURANCE_LEAVE: 3,\r\n        // 4: Nghỉ chế độ\r\n        ENTITLEMENT_LEAVE: 4,\r\n        // 5: Nghỉ tuần\r\n        WEEK_LEAVE: 5,\r\n        // 6: Nghỉ lẽ\r\n        HOLIDAY_LEAVE: 6,\r\n        // 7: Nghỉ không phép\r\n        UNAUTHORIZED_LEAVE: 7\r\n    };\r\n\r\n    private getStatusText(status?: number): string {\r\n        if (status == null) {\r\n            return '';\r\n        }\r\n\r\n        return status === this.STATUS.ANNUAL_LEAVE ? 'NP'\r\n            : status === this.STATUS.UNPAID_LEAVE ? 'NKL'\r\n                : status === this.STATUS.COMPENSATORY_LEAVE ? 'NB'\r\n                    : status === this.STATUS.INSURANCE_LEAVE ? 'NBH'\r\n                        : status === this.STATUS.ENTITLEMENT_LEAVE ? 'NCĐ'\r\n                            : status === this.STATUS.WEEK_LEAVE ? 'NT'\r\n                                : status === this.STATUS.HOLIDAY_LEAVE ? 'NL'\r\n                                    : status === this.STATUS.UNAUTHORIZED_LEAVE ? 'NKP' : '';\r\n    }\r\n}\r\n","export class InOutFrequently {\r\n    id: string;\r\n    userId: string;\r\n    fullName: string;\r\n    avatar: string;\r\n    titleId: number;\r\n    titleName: string;\r\n    officeId: number;\r\n    officeName: string;\r\n    fromDate: string;\r\n    toDate: string;\r\n    reason: string;\r\n    note: string;\r\n    isActive: boolean;\r\n    inOutFrequentlyDetails: InOutFrequentlyDetail[];\r\n    createTime: string;\r\n\r\n    constructor() {\r\n        this.isActive = false;\r\n    }\r\n}\r\n\r\nexport class InOutFrequentlyDetail {\r\n    id: string;\r\n    dayOfWeek: number;\r\n    shiftId: string;\r\n    shiftReportName: string;\r\n    isInLate: boolean;\r\n    totalMinutes: number;\r\n    dayOfWeekName: string;\r\n\r\n    constructor(dayOfWeek?: number, shiftId?: string, shiftReportName?: string, isInLate?: boolean, totalMinutes?: number) {\r\n        this.dayOfWeek = dayOfWeek;\r\n        this.shiftId = shiftId;\r\n        this.shiftReportName = shiftReportName;\r\n        this.isInLate = isInLate === undefined && isInLate == null ? true : isInLate;\r\n        this.totalMinutes = totalMinutes;\r\n        this.dayOfWeekName = !dayOfWeek ? '' : dayOfWeek === 0 ? 'CN' : 'T' + (this.dayOfWeek + 1);\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { InOutFrequently, InOutFrequentlyDetail } from './in-out-frequently.model';\r\nimport { ISearchResult } from '../../../interfaces/isearch.result';\r\nimport { Observable } from 'rxjs';\r\nimport { IActionResultResponse } from '../../../interfaces/iaction-result-response.result';\r\nimport { ActivatedRouteSnapshot, Resolve } from '@angular/router';\r\n\r\n@Injectable()\r\nexport class InOutFrequentlyService implements Resolve<any> {\r\n    url = 'in-out-frequently/';\r\n\r\n    constructor(private http: HttpClient) {\r\n    }\r\n\r\n    resolve(route: ActivatedRouteSnapshot, state: Object) {\r\n        const queryParams = route.queryParams;\r\n        const keyword = queryParams.keyword;\r\n        const isActive = queryParams.isActive;\r\n        const fromDate = queryParams.fromDate;\r\n        const toDate = queryParams.toDate;\r\n        const page = queryParams.page;\r\n        const pageSize = queryParams.pageSize;\r\n        return this.search(keyword, isActive, fromDate, toDate, page, pageSize);\r\n    }\r\n\r\n    search(keyword: string, isActive?: boolean, fromDate?: string, toDate?: string,\r\n           page: number = 1, pageSize: number = 20): Observable<ISearchResult<InOutFrequently>> {\r\n        return this.http.get(`${this.url}search`, {\r\n            params: new HttpParams()\r\n                .set('keyword', keyword ? keyword : '')\r\n                .set('isActive', isActive != null && isActive !== undefined ? isActive.toString() : '')\r\n                .set('fromDate', fromDate ? fromDate : '')\r\n                .set('toDate', toDate ? toDate : '')\r\n                .set('page', page ? page.toString() : '1')\r\n                .set('pageSize', pageSize ? pageSize.toString() : '20')\r\n        }) as Observable<ISearchResult<InOutFrequently>>;\r\n    }\r\n\r\n    insert(inOutFrequently: InOutFrequently): Observable<IActionResultResponse> {\r\n        const inLateOutEarlyFrequently = {\r\n            id: inOutFrequently.id,\r\n            userId: inOutFrequently.userId,\r\n            fromDate: inOutFrequently.fromDate,\r\n            toDate: inOutFrequently.toDate,\r\n            inOutFrequentlyDetails: inOutFrequently.inOutFrequentlyDetails,\r\n            note: inOutFrequently.note,\r\n            reason: inOutFrequently.reason,\r\n            isActive: inOutFrequently.isActive\r\n        };\r\n        return this.http.post(`${this.url}insert`, inLateOutEarlyFrequently) as Observable<IActionResultResponse>;\r\n    }\r\n\r\n    insertDetail(id: string, inOutFrequentlyDetail: InOutFrequentlyDetail): Observable<IActionResultResponse> {\r\n        return this.http.post(`${this.url}insert-detail`, inOutFrequentlyDetail, {\r\n            params: new HttpParams()\r\n                .set('id', id)\r\n        }) as Observable<IActionResultResponse>;\r\n    }\r\n\r\n    update(inOutFrequently: InOutFrequently): Observable<IActionResultResponse> {\r\n        const inLateOutEarlyFrequently = {\r\n            id: inOutFrequently.id,\r\n            userId: inOutFrequently.userId,\r\n            fromDate: inOutFrequently.fromDate,\r\n            toDate: inOutFrequently.toDate,\r\n            inOutFrequentlyDetails: inOutFrequently.inOutFrequentlyDetails,\r\n            note: inOutFrequently.note,\r\n            reason: inOutFrequently.reason,\r\n            isActive: inOutFrequently.isActive\r\n        };\r\n        return this.http.post(`${this.url}update`, inLateOutEarlyFrequently) as Observable<IActionResultResponse>;\r\n    }\r\n\r\n    updateDetail(id: string, inOutFrequentlyDetail: InOutFrequentlyDetail): Observable<IActionResultResponse> {\r\n        return this.http.post(`${this.url}update-detail`, inOutFrequentlyDetail, {\r\n            params: new HttpParams()\r\n                .set('id', id)\r\n        }) as Observable<IActionResultResponse>;\r\n    }\r\n\r\n    updateActive(id: string, isActive: boolean): Observable<IActionResultResponse> {\r\n        return this.http.post(`${this.url}update-active`, '', {\r\n            params: new HttpParams()\r\n                .set('id', id)\r\n                .set('isActive', isActive.toString())\r\n        }) as Observable<IActionResultResponse>;\r\n    }\r\n\r\n    delete(id: string): Observable<IActionResultResponse> {\r\n        return this.http.delete(`${this.url}delete`, {\r\n            params: new HttpParams()\r\n                .set('id', id)\r\n        }) as Observable<IActionResultResponse>;\r\n    }\r\n\r\n    deleteDetail(id: string, detailId: string): Observable<IActionResultResponse> {\r\n        return this.http.delete(`${this.url}delete-detail`, {\r\n            params: new HttpParams()\r\n                .set('id', id)\r\n                .set('detailId', detailId)\r\n        }) as Observable<IActionResultResponse>;\r\n    }\r\n}\r\n","module.exports = \"<div class=\\\"row cm-mgb-10\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <form class=\\\"form-inline\\\" (ngSubmit)=\\\"search(1)\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Nhập từ khóa tìm kiếm.\\\"\\r\\n                       name=\\\"searchInputKeyword\\\" [(ngModel)]=\\\"keyword\\\">\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <nh-date\\r\\n                    name=\\\"fromDateSearch\\\"\\r\\n                    [type]=\\\"'inputButton'\\\"\\r\\n                    [placeholder]=\\\"'chọn từ ngày'\\\"\\r\\n                    [allowRemove]=\\\"true\\\"\\r\\n                    [mask]=\\\"true\\\"\\r\\n                    [(ngModel)]=\\\"fromDate\\\"\\r\\n                    (selectedDateEvent)=\\\"search(1)\\\"\\r\\n                    (removedDateEvent)=\\\"search(1)\\\"\\r\\n                ></nh-date>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <nh-date\\r\\n                    name=\\\"toDateSearch\\\"\\r\\n                    [type]=\\\"'inputButton'\\\"\\r\\n                    [placeholder]=\\\"'Chọn đến ngày'\\\"\\r\\n                    [allowRemove]=\\\"true\\\"\\r\\n                    [mask]=\\\"true\\\"\\r\\n                    [(ngModel)]=\\\"toDate\\\"\\r\\n                    (selectedDateEvent)=\\\"search(1)\\\"\\r\\n                    (removedDateEvent)=\\\"search(1)\\\"\\r\\n                ></nh-date>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <button mat-raised-button color=\\\"primary\\\">\\r\\n                    <mat-icon>search</mat-icon>\\r\\n                </button>\\r\\n            </div>\\r\\n            <div class=\\\"form-group pull-right\\\" (click)=\\\"addNew()\\\" *ngIf=\\\"isHasInsertPermission\\\">\\r\\n                <button type=\\\"button\\\" mat-raised-button color=\\\"primary\\\">\\r\\n                    <mat-icon>add</mat-icon>\\r\\n                    Thêm mới\\r\\n                </button>\\r\\n            </div>\\r\\n        </form>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-sm-12\\\">\\r\\n        <div class=\\\"table-responsive\\\">\\r\\n            <table class=\\\"table table-bordered table-striped table-hover table-main\\\">\\r\\n                <thead>\\r\\n                <tr>\\r\\n                    <th class=\\\"center middle w50\\\">#</th>\\r\\n                    <th class=\\\"center middle w250\\\">Nhân viên</th>\\r\\n                    <th class=\\\"center middle w100\\\">Ngày áp dụng</th>\\r\\n                    <th class=\\\"center middle w100\\\">Thời gian áp dụng</th>\\r\\n                    <th class=\\\"center middle\\\">Lý do</th>\\r\\n                    <th class=\\\"center middle w50\\\">Sử dụng</th>\\r\\n                    <th class=\\\"center middle w100\\\"></th>\\r\\n                </tr>\\r\\n                </thead>\\r\\n                <tbody>\\r\\n                <tr *ngFor=\\\"let item of listInOutFrequently; let i = index\\\">\\r\\n                    <td class=\\\"center w50\\\">{{ (currentPage - 1) * pageSize + i + 1 }}</td>\\r\\n                    <td>\\r\\n                        <div class=\\\"media\\\">\\r\\n                            <div class=\\\"media-left\\\">\\r\\n                                <a href=\\\"javascript://\\\">\\r\\n                                    <nh-image\\r\\n                                        [cssClass]=\\\"'avatar-sm rounded-avatar'\\\"\\r\\n                                        [value]=\\\"item.avatar\\\"\\r\\n                                        [alt]=\\\"item.fullName\\\" [width]=\\\"39\\\" [height]=\\\"39\\\"></nh-image>\\r\\n                                </a>\\r\\n                            </div>\\r\\n                            <div class=\\\"media-body\\\">\\r\\n                                <h4 class=\\\"media-heading\\\">{{item.fullName}}</h4>\\r\\n                                <p>{{item.titleName}} - {{item.officeName}}</p>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </td>\\r\\n                    <td>{{item.fromDate | dateTimeFormat:'DD/MM/YYYY'}}</td>\\r\\n                    <td>{{item.toDate | dateTimeFormat:'DD/MM/YYYY'}}</td>\\r\\n                    <td>{{item.reason}}</td>\\r\\n                    <td class=\\\"center\\\">\\r\\n                        <mat-icon *ngIf=\\\"item.isActive\\\" class=\\\"color-green\\\">done</mat-icon>\\r\\n                    </td>\\r\\n                    <td class=\\\"center w100\\\">\\r\\n                        <button type=\\\"button\\\" mat-mini-fab color=\\\"primary\\\" matTooltip=\\\"Chỉnh sửa\\\"\\r\\n                                matTooltipPosition=\\\"below\\\" (click)=\\\"edit(item)\\\">\\r\\n                            <mat-icon>edit</mat-icon>\\r\\n                        </button>\\r\\n                        <button type=\\\"button\\\" mat-mini-fab color=\\\"warn\\\" matTooltip=\\\"Xóa\\\" matTooltipPosition=\\\"below\\\"\\r\\n                                (click)=\\\"delete(item)\\\">\\r\\n                            <mat-icon>delete</mat-icon>\\r\\n                        </button>\\r\\n                    </td>\\r\\n                </tr>\\r\\n                </tbody>\\r\\n            </table>\\r\\n        </div>\\r\\n        <ghm-paging [totalRows]=\\\"totalRows\\\" [currentPage]=\\\"currentPage\\\" [pageShow]=\\\"6\\\" (pageClick)=\\\"search($event)\\\"\\r\\n                [isDisabled]=\\\"isSearching\\\" [pageName]=\\\"'đi muộn về sớm'\\\"></ghm-paging>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<nh-modal #fromModal>\\r\\n    <!--<nh-modal-header [showCloseButton]=\\\"true\\\">-->\\r\\n    <!--<i class=\\\"fa fa-suitcase\\\"></i>-->\\r\\n    <!--{{isUpdate ? 'Chỉnh sửa đăng ký đi muộn về sớm dài hạn' : 'Thêm mới đăng ký đi muộn về sớm dài hạn'}}-->\\r\\n    <!--</nh-modal-header>-->\\r\\n    <form class=\\\"form-horizontal form-bordered\\\" [formGroup]=\\\"model\\\" (ngSubmit)=\\\"save()\\\">\\r\\n        <nh-modal-content>\\r\\n            <div class=\\\"row\\\">\\r\\n                <div class=\\\"col-sm-6\\\">\\r\\n                    <div class=\\\"portlet light bordered\\\">\\r\\n                        <div class=\\\"portlet-title\\\">\\r\\n                            <div class=\\\"caption font-green-sharp\\\">\\r\\n                                <i class=\\\"icon-speech font-green-sharp\\\"></i>\\r\\n                                <span class=\\\"caption-subject bold uppercase\\\"> {{isUpdate ? 'Cập nhật thông tin đăng ký' : 'Thêm mới thông tin đăng ký'}} </span>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"portlet-body\\\">\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <label for=\\\"\\\" class=\\\"col-sm-4 control-label\\\">Nhân viên <span\\r\\n                                    class=\\\"color-red\\\">*</span>:</label>\\r\\n                                <div class=\\\"col-sm-8\\\">\\r\\n                                    <ghm-user-suggestion\\r\\n                                        *ngIf=\\\"!isUpdate; else userReadonlyTemplate\\\"\\r\\n                                        [sources]=\\\"listUserSuggestion\\\"\\r\\n                                        [selectedUsers]=\\\"selectedUser\\\"\\r\\n                                        [isLoading]=\\\"isSearchingUser\\\"\\r\\n                                        (onSelectUser)=\\\"onSelectUser($event)\\\"\\r\\n                                        (onRemoveUser)=\\\"onRemoveUser()\\\"\\r\\n                                        (onKeyUp)=\\\"onUserSuggestionKeyUp($event)\\\"\\r\\n                                        placeholder=\\\"Nhập tên nhân viên\\\"\\r\\n                                    ></ghm-user-suggestion>\\r\\n                                    <ng-template #userReadonlyTemplate>\\r\\n                                        <div class=\\\"media\\\">\\r\\n                                            <div class=\\\"media-left\\\">\\r\\n                                                <a href=\\\"#\\\">\\r\\n                                                    <!--<img class=\\\"media-object\\\" src=\\\"\\\" alt=\\\"...\\\">-->\\r\\n                                                    <nh-image\\r\\n                                                        [cssClass]=\\\"'avatar-sm rounded-avatar'\\\"\\r\\n                                                        [alt]=\\\"model.value.fullName\\\"\\r\\n                                                        [value]=\\\"model.value.avatar\\\"></nh-image>\\r\\n                                                </a>\\r\\n                                            </div>\\r\\n                                            <div class=\\\"media-body\\\">\\r\\n                                                <h4 class=\\\"media-heading\\\">{{model.value.fullName}}</h4>\\r\\n                                                {{ model.value?.titleName }} - {{ model.value?.officeName }}\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                    </ng-template>\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.userId\\\">\\r\\n                                        {{formErrors.userId}}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <label for=\\\"\\\" class=\\\"col-sm-4 control-label\\\">Ngày bắt đầu:</label>\\r\\n                                <div class=\\\"col-sm-8\\\">\\r\\n                                    <nh-date\\r\\n                                        formControlName=\\\"fromDate\\\"\\r\\n                                        [type]=\\\"'inputButton'\\\"\\r\\n                                        [placeholder]=\\\"'Chọn ngày bắt đầu'\\\"\\r\\n                                        [allowRemove]=\\\"true\\\"\\r\\n                                        [mask]=\\\"true\\\"\\r\\n                                        (removedDateEvent)=\\\"onRemoveFromDate()\\\"\\r\\n                                    ></nh-date>\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.fromDate\\\">\\r\\n                                        {{formErrors.fromDate}}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <label for=\\\"\\\" class=\\\"col-sm-4 control-label\\\">Ngày kết thúc:</label>\\r\\n                                <div class=\\\"col-sm-8\\\">\\r\\n                                    <nh-date\\r\\n                                        formControlName=\\\"toDate\\\"\\r\\n                                        [type]=\\\"'inputButton'\\\"\\r\\n                                        [placeholder]=\\\"'Chọn ngày kết thúc'\\\"\\r\\n                                        [allowRemove]=\\\"true\\\"\\r\\n                                        [mask]=\\\"true\\\"\\r\\n                                        (removedDateEvent)=\\\"onRemoveToDate()\\\"\\r\\n                                    ></nh-date>\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.toDate\\\">\\r\\n                                        {{formErrors.toDate}}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <label for=\\\"\\\" class=\\\"col-sm-4 control-label\\\">Lý do <span\\r\\n                                    class=\\\"color-red\\\">*</span>:</label>\\r\\n                                <div class=\\\"col-sm-8\\\">\\r\\n                    <textarea class=\\\"form-control\\\" rows=\\\"3\\\" placeholder=\\\"Nhập lý do xin đi muộn về sớm.\\\"\\r\\n                              formControlName=\\\"reason\\\"></textarea>\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.reason\\\">\\r\\n                                        {{formErrors.reason}}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <label for=\\\"\\\" class=\\\"col-sm-4 control-label\\\">Ghi chú:</label>\\r\\n                                <div class=\\\"col-sm-8\\\">\\r\\n                    <textarea class=\\\"form-control\\\" rows=\\\"3\\\" placeholder=\\\"Nhập nội dung ghi chú.\\\"\\r\\n                              formControlName=\\\"note\\\"></textarea>\\r\\n                                    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"formErrors.note\\\">\\r\\n                                        {{formErrors.note}}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <div class=\\\"col-sm-8 col-sm-offset-4\\\">\\r\\n                                    <mat-checkbox color=\\\"primary\\\" formControlName=\\\"isActive\\\">Kích hoạt</mat-checkbox>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div><!-- END: infomation -->\\r\\n                <div class=\\\"col-sm-6\\\">\\r\\n                    <div class=\\\"portlet light bordered\\\">\\r\\n                        <div class=\\\"portlet-title\\\">\\r\\n                            <div class=\\\"caption font-green-sharp\\\">\\r\\n                                <i class=\\\"icon-speech font-green-sharp\\\"></i>\\r\\n                                <span class=\\\"caption-subject bold uppercase\\\"> Chi tiết ca xin nghỉ</span>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"portlet-body\\\">\\r\\n                            <div class=\\\"cm-mgb-10 text-right\\\">\\r\\n                                <button type=\\\"button\\\" mat-raised-button color=\\\"primary\\\" (click)=\\\"addDetail()\\\">\\r\\n                                    <mat-icon>add</mat-icon>\\r\\n                                    Thêm ca xin nghỉ\\r\\n                                </button>\\r\\n                            </div>\\r\\n                            <div class=\\\"note\\\" *ngIf=\\\"listInOutFrequentlyDetail.length === 0; else tableContentTemplate\\\">\\r\\n                                Vui lòng chọn thêm mới ca xin nghỉ.\\r\\n                            </div>\\r\\n                            <ng-template #tableContentTemplate>\\r\\n                                <table class=\\\"table table-hover table-bordered table-striped\\\">\\r\\n                                    <tbody>\\r\\n                                    <tr *ngFor=\\\"let item of listInOutFrequentlyDetail; let i = index\\\">\\r\\n                                        <td class=\\\"center middle\\\">{{item.dayOfWeekName}}</td>\\r\\n                                        <td class=\\\"middle\\\">{{item.shiftReportName}}</td>\\r\\n                                        <td class=\\\"middle\\\">{{item.isInLate ? 'Đi muộn' : 'Về sớm'}}</td>\\r\\n                                        <td class=\\\"middle\\\">{{item.totalMinutes}} phút</td>\\r\\n                                        <td class=\\\"center middle w100\\\">\\r\\n                                            <button type=\\\"button\\\" mat-mini-fab color=\\\"primary\\\"\\r\\n                                                    (click)=\\\"editDetail(item, i)\\\">\\r\\n                                                <mat-icon>edit</mat-icon>\\r\\n                                            </button>\\r\\n                                            <button type=\\\"button\\\" mat-mini-fab color=\\\"warn\\\"\\r\\n                                                    (click)=\\\"deleteDetail(item)\\\">\\r\\n                                                <mat-icon>delete</mat-icon>\\r\\n                                            </button>\\r\\n                                        </td>\\r\\n                                    </tr>\\r\\n                                    </tbody>\\r\\n                                </table>\\r\\n                            </ng-template>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </nh-modal-content>\\r\\n        <nh-modal-footer>\\r\\n            <button mat-raised-button color=\\\"primary\\\">\\r\\n                <!--<i class=\\\"fa fa-save\\\"></i>-->\\r\\n                <mat-icon>save</mat-icon>\\r\\n                Lưu lại\\r\\n            </button>\\r\\n            <button type=\\\"button\\\" nh-dismiss=\\\"true\\\" mat-raised-button color=\\\"default\\\">\\r\\n                <!--<i class=\\\"fa fa-times\\\"></i>-->\\r\\n                <mat-icon>close</mat-icon>\\r\\n                Đóng lại\\r\\n            </button>\\r\\n        </nh-modal-footer>\\r\\n    </form><!-- END: form -->\\r\\n</nh-modal>\\r\\n\\r\\n\\r\\n<nh-modal #fromDetailModal size=\\\"sm\\\">\\r\\n    <form class=\\\"form-horizontal form-bordered\\\" (ngSubmit)=\\\"saveDetail()\\\" [formGroup]=\\\"detailModel\\\">\\r\\n        <nh-modal-content>\\r\\n            <div class=\\\"row\\\">\\r\\n                <div class=\\\"portlet light bordered\\\">\\r\\n                    <div class=\\\"portlet-title\\\">\\r\\n                        <div class=\\\"caption font-green-sharp\\\">\\r\\n                            <i class=\\\"icon-speech font-green-sharp\\\"></i>\\r\\n                            <span class=\\\"caption-subject bold uppercase\\\"> {{isUpdateDetail ? 'Chỉnh sửa chi tiết ca xin nghỉ' : 'Thêm mới ca xin nghỉ'}}</span>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"portlet-body\\\">\\r\\n                        <div class=\\\"form-group\\\">\\r\\n                            <label for=\\\"\\\" class=\\\"col-sm-4 control-label\\\">Ngày xin nghỉ\\r\\n                                <span class=\\\"color-red\\\">*</span></label>\\r\\n                            <div class=\\\"col-sm-8\\\">\\r\\n                                <nh-select\\r\\n                                    title=\\\"-- Chọn ngày xin nghỉ --\\\"\\r\\n                                    formControlName=\\\"dayOfWeek\\\"\\r\\n                                    [data]=\\\"dayOfWeeks\\\"></nh-select>\\r\\n                                <div class=\\\"alert alert-danger\\\" *ngIf=\\\"detailFormErrors.dayOfWeek\\\">\\r\\n                                    {{detailFormErrors.dayOfWeek}}\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"form-group\\\">\\r\\n                            <label for=\\\"\\\" class=\\\"col-sm-4 control-label\\\">Chọn ca làm việc\\r\\n                                <span class=\\\"color-red\\\">*</span>:</label>\\r\\n                            <div class=\\\"col-sm-8\\\">\\r\\n                                <nh-select\\r\\n                                    title=\\\"-- Chọn ca làm việc --\\\"\\r\\n                                    formControlName=\\\"shiftId\\\"\\r\\n                                    [data]=\\\"shifts\\\"\\r\\n                                    (onSelectItem)=\\\"onSelectShift($event)\\\"\\r\\n                                ></nh-select>\\r\\n                                <div class=\\\"alert alert-danger\\\" *ngIf=\\\"detailFormErrors.shiftId\\\">\\r\\n                                    {{detailFormErrors.shiftId}}\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"form-group\\\">\\r\\n                            <label for=\\\"\\\" class=\\\"col-sm-4 control-label\\\">Số phút:</label>\\r\\n                            <div class=\\\"col-sm-8\\\">\\r\\n                                <div class=\\\"input-group\\\">\\r\\n                                    <input type=\\\"text\\\" class=\\\"form-control\\\"\\r\\n                                           placeholder=\\\"Nhập số phút {{detailModel.value.isInLate ? 'đi muộn' : 'về sớm'}}\\\"\\r\\n                                           formControlName=\\\"totalMinutes\\\">\\r\\n                                    <div class=\\\"input-group-btn\\\">\\r\\n                                        <button type=\\\"button\\\" class=\\\"btn btn-default dropdown-toggle\\\"\\r\\n                                                data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">\\r\\n                                            {{detailModel.value.isInLate ? 'Đi muộn' : 'Về sớm'}}<span\\r\\n                                            class=\\\"caret\\\"></span></button>\\r\\n                                        <ul class=\\\"dropdown-menu dropdown-menu-right\\\">\\r\\n                                            <li><a href=\\\"javascript://\\\" (click)=\\\"onChangeIsInLateValue(true)\\\">Đi\\r\\n                                                muộn</a></li>\\r\\n                                            <li><a href=\\\"javascript://\\\" (click)=\\\"onChangeIsInLateValue(false)\\\">Về\\r\\n                                                sớm</a></li>\\r\\n                                        </ul>\\r\\n                                    </div><!-- /btn-group -->\\r\\n                                </div>\\r\\n                                <div class=\\\"alert alert-danger\\\" *ngIf=\\\"detailFormErrors.totalMinutes\\\">\\r\\n                                    {{detailFormErrors.totalMinutes}}\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </nh-modal-content>\\r\\n        <nh-modal-footer>\\r\\n            <button mat-raised-button color=\\\"primary\\\">\\r\\n                <!--<i class=\\\"fa fa-save\\\"></i>-->\\r\\n                <mat-icon *ngIf=\\\"!isUpdateDetail\\\">add</mat-icon>\\r\\n                <mat-icon *ngIf=\\\"isUpdateDetail\\\">save</mat-icon>\\r\\n                {{isUpdateDetail ? 'Lưu lại' : 'Thêm'}}\\r\\n            </button>\\r\\n            <button type=\\\"button\\\" nh-dismiss=\\\"true\\\" mat-raised-button color=\\\"default\\\">\\r\\n                <!--<i class=\\\"fa fa-times\\\"></i>-->\\r\\n                <mat-icon>close</mat-icon>\\r\\n                Đóng lại\\r\\n            </button>\\r\\n        </nh-modal-footer>\\r\\n    </form><!-- END: form -->\\r\\n</nh-modal>\\r\\n\"","import { Component, Inject, OnInit, ViewChild } from '@angular/core';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { BaseComponent } from '../../../base.component';\r\nimport { InOutFrequently, InOutFrequentlyDetail } from './in-out-frequently.model';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { SpinnerService } from '../../../core/spinner/spinner.service';\r\nimport { InOutFrequentlyService } from './in-out-frequently.service';\r\nimport { IActionResultResponse } from '../../../interfaces/iaction-result-response.result';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Subject } from 'rxjs';\r\nimport { finalize, debounceTime, distinctUntilChanged } from 'rxjs/operators';\r\nimport * as _ from 'lodash';\r\nimport { ISearchResult } from '../../../interfaces/isearch.result';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { NumberValidator } from '../../../validators/number.validator';\r\nimport { DestroySubscribers } from '../../../shareds/decorator/destroy-subscribes.decorator';\r\nimport { NhModalComponent } from '../../../shareds/components/nh-modal/nh-modal.component';\r\nimport { UserSuggestion } from '../../../shareds/components/ghm-user-suggestion/ghm-user-suggestion.component';\r\nimport { UtilService } from '../../../shareds/services/util.service';\r\nimport { AppService } from '../../../shareds/services/app.service';\r\nimport { TimekeepingWorkScheduleService } from '../config/work-schedule/timekeeping-work-schedule.service';\r\nimport { IPageId, PAGE_ID } from '../../../configs/page-id.config';\r\nimport { UserService } from '../../hr/user/services/user.service';\r\nimport { CheckPermission } from '../../../shareds/decorator/check-permission.decorator';\r\n\r\n@Component({\r\n    selector: 'app-timekeeping-in-out-frequently',\r\n    templateUrl: './timekeeping-in-out-frequently.component.html',\r\n    providers: [NumberValidator]\r\n})\r\n\r\n@DestroySubscribers()\r\n@CheckPermission()\r\nexport class TimekeepingInOutFrequentlyComponent extends BaseComponent implements OnInit {\r\n    @ViewChild('fromModal') formModal: NhModalComponent;\r\n    @ViewChild('fromDetailModal') formDetailModal: NhModalComponent;\r\n\r\n    fromDate?: string;\r\n    toDate?: string;\r\n    isUpdateDetail = false;\r\n    currentDetailIndex = -1;\r\n\r\n    model: FormGroup;\r\n    detailModel: FormGroup;\r\n    inOutFrequently: InOutFrequently = new InOutFrequently();\r\n    inOutFrequentlyDetail: InOutFrequentlyDetail = new InOutFrequentlyDetail();\r\n    listInOutFrequently: InOutFrequently[] = [];\r\n    listInOutFrequentlyDetail: InOutFrequentlyDetail[] = [];\r\n    listUserSuggestion: UserSuggestion[] = [];\r\n    selectedUser: UserSuggestion;\r\n    userSuggestionKeyword$ = new Subject<string>();\r\n    isSearchingUser: any = false;\r\n    detailFormErrors: any = {};\r\n    detailValidationMessage: any = {};\r\n    dayOfWeeks = [];\r\n    shifts = [];\r\n\r\n    constructor(@Inject(PAGE_ID) pageId: IPageId,\r\n                private title: Title,\r\n                private route: ActivatedRoute,\r\n                private toastr: ToastrService,\r\n                private fb: FormBuilder,\r\n                private numberValidator: NumberValidator,\r\n                private utilService: UtilService,\r\n                private spinnerService: SpinnerService,\r\n                private appService: AppService,\r\n                private userService: UserService,\r\n                private workScheduleService: TimekeepingWorkScheduleService,\r\n                private inOutFrequentlyService: InOutFrequentlyService) {\r\n        super();\r\n        const pageTitle = 'Cấu hình đi muộn về sớm dài hạn';\r\n        this.title.setTitle(pageTitle);\r\n        this.appService.setupPage(pageId.HR, pageId.TIMEKEEPING_IN_LATE_OUT_EARLY_FREQUENTLY,\r\n            'Chấm công', pageTitle);\r\n        // this.getPermission(this.appService);\r\n        // this.currentUser = this.appService.currentUser;\r\n\r\n        for (let i = 0; i < 7; i++) {\r\n            this.dayOfWeeks = [...this.dayOfWeeks, {id: i, name: i === 0 ? 'CN' : 'T' + (i + 1)}];\r\n        }\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.buildForm();\r\n        this.buildFormDetail();\r\n\r\n        this.subscribers.detailFormModal = this.formDetailModal.onHidden.subscribe(() => {\r\n            this.isUpdateDetail = false;\r\n            this.detailModel.reset();\r\n            this.inOutFrequentlyDetail = new InOutFrequentlyDetail();\r\n        });\r\n\r\n        this.subscribers.routeData = this.route.data.subscribe((result: { data: ISearchResult<InOutFrequently> }) => {\r\n            const data = result.data;\r\n            if (data) {\r\n                this.listInOutFrequently = data.items;\r\n                this.totalRows = data.totalRows;\r\n            }\r\n        });\r\n\r\n        // TODO: Check this later.\r\n        // this.userSuggestionKeyword$\r\n        //     .pipe(debounceTime(500),\r\n        //         distinctUntilChanged())\r\n        //     .subscribe(keyword => {\r\n        //         this.subscribers.searchUserSuggestion = this.userService.searchForSuggestion(keyword, '', 1, 20)\r\n        //             .finally(() => this.isSearchingUser = false)\r\n        //             .subscribe((result: any) => {\r\n        //                 this.listUserSuggestion = result.users.map(user => new UserSuggestion(user.id, user.fullName, user.titleId,\r\n        //                     user.titleName, user.officeId, user.officeName, user.image, false, false, user.enrollNumber));\r\n        //             });\r\n        //     });\r\n    }\r\n\r\n    onChangeIsInLateValue(isInLate: boolean) {\r\n        this.detailModel.patchValue({isInLate: isInLate});\r\n    }\r\n\r\n    onSelectShift(shift: any) {\r\n        this.detailModel.patchValue({shiftReportName: shift.name});\r\n    }\r\n\r\n    search(currentPage: number) {\r\n        this.currentPage = this.currentPage;\r\n        this.spinnerService.show();\r\n        this.subscribers.search = this.inOutFrequentlyService.search(this.keyword, this.isActiveSearch, this.fromDate, this.toDate,\r\n            this.currentPage, this.pageSize)\r\n            .pipe(finalize(() => this.spinnerService.hide()))\r\n            .subscribe((result: ISearchResult<InOutFrequently>) => {\r\n                this.listInOutFrequently = result.items;\r\n                this.totalRows = result.totalRows;\r\n            });\r\n    }\r\n\r\n    addNew() {\r\n        this.isUpdate = false;\r\n        this.model.reset(new InOutFrequently());\r\n        this.listInOutFrequentlyDetail = [];\r\n        this.selectedUser = null;\r\n        this.formModal.show();\r\n    }\r\n\r\n    addDetail() {\r\n        this.isUpdateDetail = false;\r\n        if (!this.model.value.userId) {\r\n            this.toastr.error('Vui lòng chọn người dùng đăng ký.');\r\n            return;\r\n        }\r\n\r\n        this.detailModel.reset(new InOutFrequentlyDetail());\r\n        this.formDetailModal.show();\r\n    }\r\n\r\n    edit(inOutFrequently: InOutFrequently) {\r\n        this.isUpdate = true;\r\n        // TODO: Check this later.\r\n        // this.selectedUser = new UserSuggestion(inOutFrequently.userId, inOutFrequently.fullName,\r\n        //     this.inOutFrequently.titleId, inOutFrequently.titleName,\r\n        //     inOutFrequently.officeId, inOutFrequently.officeName, inOutFrequently.avatar, true, true);\r\n        this.listInOutFrequentlyDetail = inOutFrequently.inOutFrequentlyDetails.map((item: InOutFrequentlyDetail) => {\r\n            item.dayOfWeekName = this.getDayOfWeekName(item.dayOfWeek);\r\n            return item;\r\n        });\r\n        this.model.patchValue(inOutFrequently);\r\n        this.formModal.show();\r\n        this.getWorkScheduleByUserId(inOutFrequently.userId);\r\n    }\r\n\r\n    editDetail(inOutFrequentlyDetail: InOutFrequentlyDetail, index: number) {\r\n        this.currentDetailIndex = index;\r\n        this.isUpdateDetail = true;\r\n        this.detailModel.patchValue(inOutFrequentlyDetail);\r\n        this.formDetailModal.show();\r\n    }\r\n\r\n    save() {\r\n        const isValid = this.utilService.onValueChanged(this.model, this.formErrors, this.validationMessages, true);\r\n        if (isValid) {\r\n            if (this.listInOutFrequentlyDetail.length === 0) {\r\n                this.toastr.error('Vui lòng chọn thêm ít nhất 1 ca làm việc.');\r\n                return;\r\n            }\r\n            this.inOutFrequently = this.model.value;\r\n            this.inOutFrequently.inOutFrequentlyDetails = this.listInOutFrequentlyDetail;\r\n            if (this.isUpdate) {\r\n                this.spinnerService.show('Đang cập nhật thông tin đăng ký đi muộn về sớm.');\r\n                this.inOutFrequentlyService.update(this.inOutFrequently)\r\n                    .pipe(finalize(() => this.spinnerService.hide()))\r\n                    .subscribe((result: IActionResultResponse) => {\r\n                        this.toastr.success(result.message);\r\n\r\n                        // Find item in list\r\n                        // const inOutFrequently = _.find(this.listInOutFrequently, (item: InOutFrequently) => {\r\n                        //     return item.id === this.inOutFrequently.id;\r\n                        // });\r\n                        //\r\n                        // if (inOutFrequently) {\r\n                        //     inOutFrequently.userId = this.inOutFrequently.userId;\r\n                        //     inOutFrequently.fullName = this.inOutFrequently.fullName;\r\n                        //     inOutFrequently.titleId = this.inOutFrequently.titleId;\r\n                        //     inOutFrequently.titleName = this.inOutFrequently.titleName;\r\n                        //     inOutFrequently.avatar = this.inOutFrequently.avatar;\r\n                        //     inOutFrequently.officeId = this.inOutFrequently.officeId;\r\n                        //     inOutFrequently.officeName = this.inOutFrequently.officeName;\r\n                        //     inOutFrequently.fromDate = this.inOutFrequently.fromDate;\r\n                        //     inOutFrequently.toDate = this.inOutFrequently.toDate;\r\n                        //     inOutFrequently.reason = this.inOutFrequently.reason;\r\n                        //     inOutFrequently.note = this.inOutFrequently.note;\r\n                        //     inOutFrequently.inOutFrequentlyDetails = this.inOutFrequently.inOutFrequentlyDetails;\r\n                        //     inOutFrequently.isActive = this.inOutFrequently.isActive;\r\n                        // }\r\n\r\n                        this.formModal.dismiss();\r\n                        this.search(this.currentPage);\r\n                    });\r\n            } else {\r\n                this.spinnerService.show('Đang thêm mới đăng ký đi muộn về sớm.');\r\n                this.inOutFrequentlyService.insert(this.inOutFrequently)\r\n                    .pipe(finalize(() => this.spinnerService.hide()))\r\n                    .subscribe((result: IActionResultResponse) => {\r\n                        this.toastr.success(result.message);\r\n                        this.model.reset(new InOutFrequently());\r\n                        this.selectedUser = null;\r\n                        this.listInOutFrequentlyDetail = [];\r\n                        this.search(1);\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    saveDetail() {\r\n        const isValid = this.utilService.onValueChanged(this.detailModel, this.detailFormErrors,\r\n            this.detailValidationMessage, true);\r\n        if (isValid) {\r\n            this.inOutFrequentlyDetail = this.detailModel.value;\r\n\r\n            if (this.isUpdate && this.isUpdateDetail) {\r\n                this.spinnerService.show('Đang cập nhật thông tin chi tiết ca xin đi muộn về sớm. Vui lòng đợi...');\r\n                this.inOutFrequentlyService.updateDetail(this.model.value.id, this.inOutFrequentlyDetail)\r\n                    .pipe(finalize(() => this.spinnerService.hide()))\r\n                    .subscribe((result: IActionResultResponse) => {\r\n                        this.toastr.success(result.message);\r\n                        const detail = this.listInOutFrequentlyDetail[this.currentDetailIndex];\r\n                        if (detail) {\r\n                            detail.isInLate = this.inOutFrequentlyDetail.isInLate;\r\n                            detail.shiftId = this.inOutFrequentlyDetail.shiftId;\r\n                            detail.shiftReportName = this.inOutFrequentlyDetail.shiftReportName;\r\n                            detail.totalMinutes = this.inOutFrequentlyDetail.totalMinutes;\r\n                            detail.dayOfWeek = this.inOutFrequentlyDetail.dayOfWeek;\r\n                            detail.dayOfWeekName = this.getDayOfWeekName(this.inOutFrequentlyDetail.dayOfWeek);\r\n                        }\r\n                        setTimeout(() => this.formDetailModal.dismiss());\r\n                    });\r\n            } else if (this.isUpdate && !this.isUpdateDetail) {\r\n                this.spinnerService.show('Đang thêm mới chi tiết ca xin đi muộn về sớm. Vui lòng đợi...');\r\n                this.inOutFrequentlyService.insertDetail(this.model.value.id, this.inOutFrequentlyDetail)\r\n                    .pipe(finalize(() => this.spinnerService.hide()))\r\n                    .subscribe((result: IActionResultResponse<any>) => {\r\n                        this.toastr.success(result.message);\r\n                        this.detailModel.reset(new InOutFrequentlyDetail());\r\n                        this.inOutFrequentlyDetail.dayOfWeekName = this.getDayOfWeekName(this.inOutFrequentlyDetail.dayOfWeek);\r\n                        this.inOutFrequentlyDetail.id = result.data.id;\r\n                        this.listInOutFrequentlyDetail = [...this.listInOutFrequentlyDetail, _.clone(this.inOutFrequentlyDetail)];\r\n                    });\r\n            } else {\r\n                // Check exists\r\n                const exists = _.find(this.listInOutFrequentlyDetail, (inOutFrequentlyDetail: InOutFrequentlyDetail) => {\r\n                    return inOutFrequentlyDetail.dayOfWeek === this.inOutFrequentlyDetail.dayOfWeek\r\n                        && inOutFrequentlyDetail.shiftId === this.inOutFrequentlyDetail.shiftId\r\n                        && inOutFrequentlyDetail.isInLate === this.inOutFrequentlyDetail.isInLate;\r\n                });\r\n\r\n                if (!exists) {\r\n                    this.listInOutFrequentlyDetail = [...this.listInOutFrequentlyDetail,\r\n                        new InOutFrequentlyDetail(this.inOutFrequentlyDetail.dayOfWeek, this.inOutFrequentlyDetail.shiftId,\r\n                            this.inOutFrequentlyDetail.shiftReportName, this.inOutFrequentlyDetail.isInLate,\r\n                            this.inOutFrequentlyDetail.totalMinutes)];\r\n                } else {\r\n                    this.toastr.error('Chi tiết ca làm việc đã tồn tại.');\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    delete(inOutFrequently: InOutFrequently) {\r\n        // swal({\r\n        //     title: '',\r\n        //     text: `Bạn có chắc chắn muốn xóa đăng ký đi trễ cho người dùng: \"${inOutFrequently.fullName}\" không?`,\r\n        //     type: 'warning',\r\n        //     showCancelButton: true,\r\n        //     confirmButtonColor: '#DD6B55',\r\n        //     confirmButtonText: 'Đồng ý',\r\n        //     cancelButtonText: 'Hủy bỏ'\r\n        // }).then(() => {\r\n        //     this.spinnerService.show();\r\n        //     this.inOutFrequentlyService.delete(inOutFrequently.id)\r\n        //         .finally(() => this.spinnerService.hide())\r\n        //         .subscribe((result: IActionResultResponse) => {\r\n        //             this.toastr.success(result.message);\r\n        //             this.search(this.currentPage);\r\n        //         });\r\n        // }, () => {\r\n        // });\r\n    }\r\n\r\n    deleteDetail(inOutFrequentlyDetail: InOutFrequentlyDetail) {\r\n        if (this.isUpdate) {\r\n            // swal({\r\n            //     title: '',\r\n            //     text: `Bạn có chắc chắn muốn xóa chi tiết đăng ký này không?`,\r\n            //     type: 'warning',\r\n            //     showCancelButton: true,\r\n            //     confirmButtonColor: '#DD6B55',\r\n            //     confirmButtonText: 'Đồng ý',\r\n            //     cancelButtonText: 'Hủy bỏ'\r\n            // }).then(() => {\r\n            //     this.spinnerService.show();\r\n            //     this.inOutFrequentlyService.deleteDetail(this.model.value.id, inOutFrequentlyDetail.id)\r\n            //         .finally(() => this.spinnerService.hide())\r\n            //         .subscribe((result: IActionResultResponse) => {\r\n            //             this.toastr.success(result.message);\r\n            //             _.remove(this.listInOutFrequentlyDetail, (item: InOutFrequentlyDetail) => {\r\n            //                 return item.id === inOutFrequentlyDetail.id;\r\n            //             });\r\n            //         });\r\n            // }, () => {\r\n            // });\r\n        } else {\r\n            _.remove(this.listInOutFrequentlyDetail, (item: InOutFrequentlyDetail) => {\r\n                return item.dayOfWeek === inOutFrequentlyDetail.dayOfWeek && item.shiftId === inOutFrequentlyDetail.shiftId\r\n                    && item.isInLate === inOutFrequentlyDetail.isInLate;\r\n            });\r\n        }\r\n    }\r\n\r\n    onSelectUser(user: UserSuggestion) {\r\n        this.selectedUser = user;\r\n        this.model.patchValue({userId: user.id});\r\n        this.getWorkScheduleByUserId(this.model.value.userId);\r\n    }\r\n\r\n    onRemoveUser() {\r\n        this.model.patchValue({userId: null});\r\n    }\r\n\r\n    onUserSuggestionKeyUp(keyword: string) {\r\n        this.userSuggestionKeyword$.next(keyword);\r\n    }\r\n\r\n    onRemoveFromDate() {\r\n        this.model.patchValue({fromDate: null});\r\n    }\r\n\r\n    onRemoveToDate() {\r\n        this.model.patchValue({toDate: null});\r\n    }\r\n\r\n    private getDayOfWeekName(dayOfWeek: number): string {\r\n        return dayOfWeek === 0 ? 'CN' : 'T' + (dayOfWeek + 1);\r\n    }\r\n\r\n    private getWorkScheduleByUserId(userId: string) {\r\n        // Get work schedule by userId\r\n        this.spinnerService.show('Đang lấy thông tin ca làm việc. Vui lòng đợi...');\r\n        this.subscribers.shifts = this.workScheduleService.getWorkScheduleShift(userId)\r\n            .pipe(finalize(() => this.spinnerService.hide()))\r\n            .subscribe((shifts: any) => {\r\n                this.shifts = shifts.map((item: any) => {\r\n                    return {id: item.id, name: item.reportName};\r\n                });\r\n            });\r\n    }\r\n\r\n    private buildForm() {\r\n        this.formErrors = this.utilService.renderFormError(['userId', 'reason', 'note']);\r\n        this.validationMessages = {\r\n            'userId': {\r\n                'required': 'Vui lòng chọn nhân viên đăng ký.'\r\n            },\r\n            'reason': {\r\n                'required': 'Vui lòng nhập lý do xin đi muộn về sớm.',\r\n                'maxlength': 'Lý do đi muộn về sớm không được phép lớn hơn 500 ký tự.'\r\n            },\r\n            'note': {\r\n                'maxlength': 'Ghi chú không được phép lớn hơn 500 ký tự.'\r\n            }\r\n        };\r\n        this.model = this.fb.group({\r\n            'id': [this.inOutFrequently.id],\r\n            'userId': [this.inOutFrequently.userId, [\r\n                Validators.required\r\n            ]],\r\n            'fullName': [this.inOutFrequently.fullName],\r\n            'avatar': [this.inOutFrequently.avatar],\r\n            'titleId': [this.inOutFrequently.titleId],\r\n            'titleName': [this.inOutFrequently.titleName],\r\n            'officeId': [this.inOutFrequently.officeId],\r\n            'officeName': [this.inOutFrequently.officeName],\r\n            'fromDate': [this.inOutFrequently.fromDate],\r\n            'toDate': [this.inOutFrequently.toDate],\r\n            'reason': [this.inOutFrequently.reason, [\r\n                Validators.required,\r\n                Validators.maxLength(500)\r\n            ]],\r\n            'note': [this.inOutFrequently.note, [\r\n                Validators.maxLength(500)\r\n            ]],\r\n            'isActive': [this.inOutFrequently.isActive]\r\n        });\r\n        this.utilService.onValueChanged(this.model, this.formErrors, this.validationMessages);\r\n    }\r\n\r\n    private buildFormDetail() {\r\n        this.detailFormErrors = this.utilService.renderFormError(['dayOfWeek', 'shiftId', 'totalMinutes']);\r\n        this.detailValidationMessage = {\r\n            'dayOfWeek': {\r\n                'required': 'Vui lòng chọn ngày nghỉ.'\r\n            },\r\n            'shiftId': {\r\n                'required': 'Vui lòng chọn ca nghỉ.'\r\n            },\r\n            'totalMinutes': {\r\n                'required': 'Vui lòng nhấp số phút đi muộn hoặc về sớm.',\r\n                'isValid': 'Số phút phải là số.'\r\n            }\r\n        };\r\n        this.detailModel = this.fb.group({\r\n            'id': [this.inOutFrequentlyDetail.id],\r\n            'dayOfWeek': [this.inOutFrequentlyDetail.dayOfWeek, [\r\n                Validators.required\r\n            ]],\r\n            'shiftId': [this.inOutFrequentlyDetail.shiftId, [\r\n                Validators.required\r\n            ]],\r\n            'shiftReportName': [this.inOutFrequentlyDetail.shiftReportName],\r\n            'isInLate': [this.inOutFrequentlyDetail.isInLate],\r\n            'totalMinutes': [this.inOutFrequentlyDetail.totalMinutes, [\r\n                Validators.required,\r\n                this.numberValidator.isValid\r\n            ]]\r\n        });\r\n        this.utilService.onValueChanged(this.detailModel, this.detailFormErrors, this.detailValidationMessage);\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { TimekeepingConfigComponent } from './config/timekeeping-config.component';\r\nimport { TimekeepingWorkScheduleComponent } from './config/work-schedule/timekeeping-work-schedule.component';\r\nimport { TimekeepingDayOffComponent } from './day-off/timekeeping-day-off.component';\r\nimport { DownloadUserDataComponent } from './connect/download-user-data/download-user-data.component';\r\nimport { UploadUserDataComponent } from './connect/upload-user-data/upload-user-data.component';\r\nimport { SyncDataComponent } from './connect/sync-data/sync-data.component';\r\nimport { TimekeepingTimesheetComponent } from './time-sheet/timekeeping-timesheet.component';\r\nimport { TimekeepingOvertimeComponent } from './overtime-register/timekeeping-overtime.component';\r\nimport { TimekeepingInOutComponent } from './in-out/timekeeping-in-out.component';\r\nimport { TimekeepingForgotCheckinComponent } from './forgot-checkin/timekeeping-forgot-checkin.component';\r\nimport { TimekeepingInOutFrequentlyComponent } from './timekeeping-in-out-frequently/timekeeping-in-out-frequently.component';\r\nimport { InOutFrequentlyService } from './timekeeping-in-out-frequently/in-out-frequently.service';\r\nimport { LayoutComponent } from '../../shareds/layouts/layout.component';\r\nimport { AuthGuardService } from '../../shareds/services/auth-guard.service';\r\nimport { TimekeepingDayOffService } from './day-off/timekeeping-dayoff.service';\r\nimport { TimekeepingWorkScheduleService } from './config/work-schedule/timekeeping-work-schedule.service';\r\nimport { TimekeepingOvertimeService } from './overtime-register/timekeeping-overtime.service';\r\nimport { TimekeepingInOutService } from './in-out/timekeeping-in-out.service';\r\nimport { TimekeepingForgotCheckinService } from './forgot-checkin/timekeeping-forgot-checkin.service';\r\n\r\nexport const timekeepingRoutes: Routes = [\r\n    {\r\n        path: '',\r\n        component: LayoutComponent,\r\n        canActivate: [AuthGuardService],\r\n        children: [\r\n            {\r\n                path: '',\r\n                component: TimekeepingConfigComponent\r\n            },\r\n            {\r\n                path: 'config',\r\n                component: TimekeepingConfigComponent\r\n            },\r\n            {\r\n                path: 'work-schedule',\r\n                component: TimekeepingWorkScheduleComponent\r\n            },\r\n            {\r\n                path: 'work-schedule',\r\n                canActivate: [AuthGuardService],\r\n                resolve: {\r\n                    data: TimekeepingWorkScheduleService\r\n                },\r\n                component: TimekeepingWorkScheduleComponent,\r\n            },\r\n            {\r\n                path: 'day-off',\r\n                resolve: {\r\n                    data: TimekeepingDayOffService\r\n                },\r\n                component: TimekeepingDayOffComponent,\r\n            },\r\n            {\r\n                path: 'download-user-data',\r\n                component: DownloadUserDataComponent,\r\n            },\r\n            {\r\n                path: 'upload-user-data',\r\n                component: UploadUserDataComponent,\r\n            },\r\n            {\r\n                path: 'sync-data',\r\n                component: SyncDataComponent,\r\n            },\r\n            {\r\n                path: 'time-sheet',\r\n                component: TimekeepingTimesheetComponent\r\n            },\r\n            {\r\n                path: 'overtime',\r\n                resolve: {\r\n                    data: TimekeepingOvertimeService\r\n                },\r\n                component: TimekeepingOvertimeComponent\r\n            },\r\n            {\r\n                path: 'in-out',\r\n                resolve: {\r\n                    data: TimekeepingInOutService\r\n                },\r\n                component: TimekeepingInOutComponent\r\n            },\r\n            {\r\n                path: 'in-out-frequently',\r\n                resolve: {\r\n                    data: InOutFrequentlyService\r\n                },\r\n                component: TimekeepingInOutFrequentlyComponent\r\n            },\r\n            {\r\n                path: 'forgot-checkin',\r\n                resolve: {\r\n                    data: TimekeepingForgotCheckinService\r\n                },\r\n                component: TimekeepingForgotCheckinComponent\r\n            }\r\n        ],\r\n    }\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(timekeepingRoutes)],\r\n    exports: [RouterModule],\r\n    providers: [TimekeepingDayOffService, TimekeepingInOutService, TimekeepingWorkScheduleService,\r\n        TimekeepingOvertimeService, TimekeepingForgotCheckinService, InOutFrequentlyService]\r\n})\r\n\r\nexport class TimekeepingRoutingModule {\r\n}\r\n","/**\r\n * Created by HoangIT21 on 7/4/2017.\r\n */\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {\r\n    MatCheckboxModule, MatSlideToggleModule, MatTabsModule, MatButtonModule,\r\n    MatTooltipModule, MatIconModule\r\n} from '@angular/material';\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\r\nimport { TimekeepingRoutingModule } from './timekeeping-routing.module';\r\nimport { TimekeepingConfigComponent } from './config/timekeeping-config.component';\r\nimport { TimekeepingConfigHolidayComponent } from './config/holiday/timekeeping-config-holiday.component';\r\nimport { TimekeepingMachineComponent } from './config/machine/timekeeping-machine.component';\r\nimport { TimekeepingConfigGeneralComponent } from './config/timekeeping-config-general.component';\r\nimport { TimekeepingConfigShiftComponent } from './config/shift/timekeeping-config-shift.component';\r\nimport { TimekeepingWorkScheduleComponent } from './config/work-schedule/timekeeping-work-schedule.component';\r\nimport { UploadUserDataComponent } from './connect/upload-user-data/upload-user-data.component';\r\nimport { SyncDataComponent } from './connect/sync-data/sync-data.component';\r\nimport { TimekeepingTimesheetComponent } from './time-sheet/timekeeping-timesheet.component';\r\nimport { TimekeepingOvertimeComponent } from './overtime-register/timekeeping-overtime.component';\r\nimport { TimekeepingGeneralComponent } from './config/general/timekeeping-general.component';\r\nimport { TimekeepingInOutComponent } from './in-out/timekeeping-in-out.component';\r\nimport { TimekeepingOvertimeRegisterComponent } from './overtime-register/timekeeping-overtime-register.component';\r\nimport { TimekeepingForgotCheckinComponent } from './forgot-checkin/timekeeping-forgot-checkin.component';\r\nimport { TimekeepingDayOffRegisterComponent } from './day-off/timekeeping-day-off-register.component';\r\nimport { TimekeepingInOutFrequentlyComponent } from './timekeeping-in-out-frequently/timekeeping-in-out-frequently.component';\r\nimport { LayoutModule } from '../../shareds/layouts/layout.module';\r\nimport { NhSelectModule } from '../../shareds/components/nh-select/nh-select.module';\r\nimport { NhTabModule } from '../../shareds/components/nh-tab/nh-tab.module';\r\nimport { NhModalModule } from '../../shareds/components/nh-modal/nh-modal.module';\r\nimport { NHTreeModule } from '../../shareds/components/nh-tree/nh-tree.module';\r\nimport { NhDateModule } from '../../shareds/components/nh-datetime-picker/nh-date.module';\r\nimport { NhSuggestionModule } from '../../shareds/components/nh-suggestion/nh-suggestion.module';\r\nimport { NhIconLoadingModule } from '../../shareds/components/nh-icon-loading/nh-icon-loading.module';\r\nimport { GhmUserSuggestionModule } from '../../shareds/components/ghm-user-suggestion/ghm-user-suggestion.module';\r\nimport { NhInputHelperModule } from '../../shareds/components/nh-input-helper/nh-input-helper.module';\r\nimport { NhImageModule } from '../../shareds/components/nh-image/nh-image.module';\r\nimport { TimekeepingDayOffComponent } from './day-off/timekeeping-day-off.component';\r\nimport { DownloadUserDataComponent } from './connect/download-user-data/download-user-data.component';\r\nimport { GhmPagingModule } from '../../shareds/components/ghm-paging/ghm-paging.module';\r\nimport { DatetimeFormatModule } from '../../shareds/pipe/datetime-format/datetime-format.module';\r\nimport { CoreModule } from '../../core/core.module';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule, TimekeepingRoutingModule, ReactiveFormsModule, FormsModule,\r\n        LayoutModule, NhSelectModule, NhTabModule, NhModalModule, NHTreeModule, NhDateModule,\r\n        NhSuggestionModule, NhIconLoadingModule, GhmUserSuggestionModule, NhInputHelperModule,\r\n        NhDateModule, NhImageModule, CoreModule, GhmPagingModule, DatetimeFormatModule,\r\n        // Materials\r\n        MatCheckboxModule, MatSlideToggleModule, MatTabsModule, MatButtonModule, MatIconModule,\r\n        MatTooltipModule\r\n    ],\r\n    declarations: [TimekeepingConfigComponent, TimekeepingConfigHolidayComponent, TimekeepingMachineComponent,\r\n        TimekeepingConfigGeneralComponent, TimekeepingConfigShiftComponent, TimekeepingWorkScheduleComponent,\r\n        TimekeepingDayOffComponent, DownloadUserDataComponent, UploadUserDataComponent, SyncDataComponent, TimekeepingTimesheetComponent,\r\n        TimekeepingOvertimeComponent, TimekeepingOvertimeRegisterComponent, TimekeepingGeneralComponent, TimekeepingInOutComponent,\r\n        TimekeepingForgotCheckinComponent, TimekeepingDayOffRegisterComponent, TimekeepingInOutFrequentlyComponent\r\n    ],\r\n    providers: []\r\n})\r\nexport class TimekeepingModule {\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'nh-icon-loading',\r\n    template: `\r\n        <i [ngClass]=\"loadingIcon\" *ngIf=\"isLoading\"></i>\r\n        <i [ngClass]=\"icon\" *ngIf=\"!isLoading\"></i>\r\n    `\r\n})\r\n\r\nexport class NhIconLoadingComponent implements OnInit {\r\n    @Input() icon = 'fa fa-save';\r\n    @Input() loadingIcon = 'fa fa-spinner fa-pulse';\r\n    @Input() isLoading = false;\r\n\r\n    constructor() {\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { NhIconLoadingComponent } from './nh-icon-loading.component';\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [NhIconLoadingComponent],\r\n    declarations: [NhIconLoadingComponent],\r\n    providers: [],\r\n})\r\nexport class NhIconLoadingModule {\r\n}\r\n","module.exports = \".nh-input-helper-container {\\n  position: absolute;\\n  min-width: 150px;\\n  display: none;\\n  z-index: 9999; }\\n  .nh-input-helper-container.show {\\n    display: block; }\\n  .nh-input-helper-container .nh-input-helper-item {\\n    position: relative;\\n    border: 1px solid #ddd;\\n    background: white; }\\n  .nh-input-helper-container .nh-input-helper-item.success {\\n      background: #d4edda;\\n      color: #155724;\\n      border: 1px solid #c3e6cb; }\\n  .nh-input-helper-container .nh-input-helper-item.info {\\n      background: #cce5ff;\\n      color: #004085;\\n      border: 1px solid #b8daff; }\\n  .nh-input-helper-container .nh-input-helper-item.warning {\\n      background: #fff3cd;\\n      color: #856404;\\n      border: 1px solid #ffeeba; }\\n  .nh-input-helper-container .nh-input-helper-item.danger {\\n      background: #f8d7da;\\n      color: #721c24;\\n      border: 1px solid #f5c6cb; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow:before, .nh-input-helper-container .nh-input-helper-item .arrow:after {\\n      content: \\\"\\\";\\n      position: absolute;\\n      width: 0;\\n      height: 0;\\n      z-index: 9999; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-up:before, .nh-input-helper-container .nh-input-helper-item .arrow.arrow-up:after {\\n      top: -10px;\\n      left: 10px; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-up:before {\\n      border-left: 10px solid transparent;\\n      border-right: 10px solid transparent;\\n      border-bottom: 10px solid #ddd; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-up:after {\\n      border-left: 8px solid transparent;\\n      border-right: 8px solid transparent;\\n      border-bottom: 8px solid white;\\n      top: -9px;\\n      left: 12px; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-up.success:before {\\n      border-bottom: 10px solid #c3e6cb; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-up.success:after {\\n      border-bottom: 10px solid #d4edda; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-up.info:before {\\n      border-bottom: 10px solid #b8daff; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-up.info:after {\\n      border-bottom: 10px solid #cce5ff; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-up.warning:before {\\n      border-bottom: 10px solid #ffeeba; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-up.warning:after {\\n      border-bottom: 10px solid #fff3cd; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-up.danger:before {\\n      border-bottom: 10px solid #f5c6cb; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-up.danger:after {\\n      border-bottom: 10px solid #f8d7da; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-down:before, .nh-input-helper-container .nh-input-helper-item .arrow.arrow-down:after {\\n      bottom: -10px;\\n      left: 10px; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-down:before {\\n      border-left: 10px solid transparent;\\n      border-right: 10px solid transparent;\\n      border-top: 10px solid #ddd; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-down:after {\\n      border-left: 8px solid transparent;\\n      border-right: 8px solid transparent;\\n      border-top: 8px solid white;\\n      bottom: -9px;\\n      left: 12px; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-down.success:before {\\n      border-top: 10px solid #c3e6cb; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-down.success:after {\\n      border-top: 10px solid #d4edda; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-down.info:before {\\n      border-top: 10px solid #b8daff; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-down.info:after {\\n      border-top: 10px solid #cce5ff; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-down.warning:before {\\n      border-top: 10px solid #ffeeba; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-down.warning:after {\\n      border-top: 10px solid #fff3cd; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-down.danger:before {\\n      border-top: 10px solid #f5c6cb; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-down.danger:after {\\n      border-top: 10px solid #f8d7da; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-left:before, .nh-input-helper-container .nh-input-helper-item .arrow.arrow-left:after {\\n      top: 10px;\\n      left: -10px; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-left:before {\\n      border-top: 10px solid transparent;\\n      border-bottom: 10px solid transparent;\\n      border-right: 10px solid #ddd; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-left:after {\\n      border-top: 8px solid transparent;\\n      border-bottom: 8px solid transparent;\\n      border-right: 8px solid white;\\n      left: -9px;\\n      top: 12px; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-left.success:before {\\n      border-right: 10px solid #c3e6cb; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-left.success:after {\\n      border-right: 10px solid #d4edda; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-left.info:before {\\n      border-right: 10px solid #b8daff; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-left.info:after {\\n      border-right: 10px solid #cce5ff; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-left.warning:before {\\n      border-right: 10px solid #ffeeba; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-left.warning:after {\\n      border-right: 10px solid #fff3cd; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-left.danger:before {\\n      border-right: 10px solid #f5c6cb; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-left.danger:after {\\n      border-right: 10px solid #f8d7da; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-right:before, .nh-input-helper-container .nh-input-helper-item .arrow.arrow-right:after {\\n      top: 10px;\\n      right: -10px; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-right:before {\\n      border-top: 10px solid transparent;\\n      border-bottom: 10px solid transparent;\\n      border-left: 10px solid #ddd; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-right:after {\\n      border-top: 8px solid transparent;\\n      border-bottom: 8px solid transparent;\\n      border-left: 8px solid white;\\n      right: -9px;\\n      top: 12px; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-right.success:before {\\n      border-left: 10px solid #c3e6cb; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-right.success:after {\\n      border-left: 10px solid #d4edda; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-right.info:before {\\n      border-left: 10px solid #b8daff; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-right.info:after {\\n      border-left: 10px solid #cce5ff; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-right.warning:before {\\n      border-left: 10px solid #ffeeba; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-right.warning:after {\\n      border-left: 10px solid #fff3cd; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-right.danger:before {\\n      border-left: 10px solid #f5c6cb; }\\n  .nh-input-helper-container .nh-input-helper-item .arrow.arrow-right.danger:after {\\n      border-left: 10px solid #f8d7da; }\\n  .nh-input-helper-container .nh-input-helper-item .nh-input-helper-message {\\n      padding: 5px 7px;\\n      min-height: 34px; }\\n  .nh-input-helper-wrapper .nh-input-helper-icon {\\n  border-radius: 50%;\\n  width: 20px;\\n  height: 20px;\\n  display: block;\\n  position: absolute;\\n  top: 35%;\\n  right: 10px; }\\n  .nh-input-helper-wrapper .nh-input-helper-icon:hover {\\n    cursor: pointer; }\\n  .nh-input-helper-wrapper .nh-input-helper-icon.icon-success {\\n    content: \\\"\\\\f00c\\\"; }\\n\"","import {\r\n    AfterViewInit, Component, ElementRef, HostListener, Inject, Input, OnDestroy, OnInit, Renderer2, ViewChild,\r\n    ViewContainerRef,\r\n    ViewEncapsulation\r\n} from '@angular/core';\r\nimport { DOCUMENT } from '@angular/common';\r\n\r\ntype Position = 'top' | 'left' | 'right' | 'bottom' | 'auto' | 'auto-top' | 'auto-left' | 'auto-right' | 'auto-bottom';\r\n\r\n@Component({\r\n    selector: '[nh-input-helper]',\r\n    template: '',\r\n    styleUrls: ['./nh-input-helper.component.scss'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\n\r\nexport class NhInputHelperComponent implements OnInit, AfterViewInit, OnDestroy {\r\n    @Input() type: string; // info, success, warning, danger\r\n    @Input() isShowMessage = false;\r\n    @Input() position: Position = 'top';\r\n    @Input() isShowHelpIcon = false;\r\n\r\n    @Input() successIcon = 'fa fa-check';\r\n    @Input() warningIcon = 'fa fa-warning';\r\n    @Input() infoIcon = 'fa fa-info';\r\n    @Input() dangerIcon = 'fa fa-times';\r\n\r\n    @Input()\r\n    set isShow(value: boolean) {\r\n        console.log(value);\r\n        this._isShow = value;\r\n        if (value) {\r\n            this.show();\r\n        } else {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    @Input()\r\n    set message(value: string) {\r\n        if (value !== undefined && value != null) {\r\n            this.updateMessage(value);\r\n        }\r\n    }\r\n\r\n    get message() {\r\n        return this._message;\r\n    }\r\n\r\n    get isShow() {\r\n        return this._isShow;\r\n    }\r\n\r\n    private _isShow = false;\r\n    private _message = 'Vui lòng nhập nội dung cần hiển thị';\r\n    private _helperContainerElement: any;\r\n    private _helperInputWrapper: any;\r\n    private _inputhelperItem: any;\r\n    private _messageElement: any;\r\n    private _arrowElement: any;\r\n    private _iconElement: any;\r\n\r\n    constructor( @Inject(DOCUMENT) private document: Document,\r\n        private viewContainerRef: ViewContainerRef,\r\n        private el: ElementRef, private renderer: Renderer2) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this._helperContainerElement = this.createElement('div', 'nh-input-helper-container');\r\n        this._inputhelperItem = this.createElement('div', 'nh-input-helper-item');\r\n        this._messageElement = this.createElement('div', 'nh-input-helper-message');\r\n        this._arrowElement = this.createElement('div', 'arrow');\r\n        this._iconElement = this.createElement('i', `nh-input-helper-icon ${this.getIcon()}`);\r\n        this._helperInputWrapper = this.createElement('div', 'nh-input-helper-wrapper');\r\n        // this.renderer.appendChild(this._messageElement, textElement);\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.initInputWrapper();\r\n        this.initHelperContainer();\r\n        setTimeout(() => {\r\n            this.updateArrowElement();\r\n            this.updateItemClass();\r\n            this.addIconClickEventListener();\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.renderer.removeChild(document.body, this._helperContainerElement);\r\n        this.renderer.destroy();\r\n    }\r\n\r\n    @HostListener('focusin')\r\n    focusIn() {\r\n        this.show();\r\n    }\r\n\r\n    @HostListener('focusout')\r\n    focusOut() {\r\n        this.hide();\r\n    }\r\n\r\n    private addIconClickEventListener() {\r\n        this.renderer.listen(this._iconElement, 'click', () => {\r\n            this.isShow = !this.isShow;\r\n        });\r\n    }\r\n\r\n    private initInputWrapper() {\r\n        this.renderer.appendChild(this.el.nativeElement.parentNode, this._helperInputWrapper);\r\n        this.renderer.appendChild(this._helperInputWrapper, this.el.nativeElement);\r\n        this.renderer.appendChild(this._helperInputWrapper, this._iconElement);\r\n    }\r\n\r\n    private initHelperContainer() {\r\n        this.renderer.appendChild(this._inputhelperItem, this._arrowElement);\r\n        this.renderer.appendChild(this._inputhelperItem, this._messageElement);\r\n        this.renderer.appendChild(this._helperContainerElement, this._inputhelperItem);\r\n        this.renderer.appendChild(document.body, this._helperContainerElement);\r\n    }\r\n\r\n    private createMessageBox() {\r\n        const messageElement = this.createElement('div', 'nh-input-helper-message', this.message);\r\n        this.renderer.addClass(messageElement, this.type);\r\n        return messageElement;\r\n    }\r\n\r\n    private createElement(tagName: string, className: string, innerHtml?: string) {\r\n        const newTag = this.renderer.createElement(tagName);\r\n        if (className) {\r\n            const classArray = className.split(' ');\r\n            classArray.forEach(classItem => this.renderer.addClass(newTag, classItem));\r\n        }\r\n        if (innerHtml) {\r\n            const text = this.renderer.createText(innerHtml);\r\n            this.renderer.appendChild(newTag, text);\r\n        }\r\n        return newTag;\r\n    }\r\n\r\n    private updateArrowElement() {\r\n        this.renderer.addClass(this._arrowElement, this.type);\r\n        switch (this.position) {\r\n            case 'top':\r\n            case 'auto-top':\r\n                this.renderer.addClass(this._arrowElement, 'arrow-down');\r\n                break;\r\n            case 'bottom':\r\n            case 'auto-bottom':\r\n                this.renderer.addClass(this._arrowElement, 'arrow-up');\r\n                break;\r\n            case 'left':\r\n            case 'auto-left':\r\n                this.renderer.addClass(this._arrowElement, 'arrow-right');\r\n                break;\r\n            case 'right':\r\n            case 'auto-right':\r\n                this.renderer.addClass(this._arrowElement, 'arrow-left');\r\n                break;\r\n            case 'auto':\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    private updateItemClass() {\r\n        this.renderer.addClass(this._inputhelperItem, this.type);\r\n    }\r\n\r\n    private getBoundingClientRect(element: any) {\r\n        return element.getBoundingClientRect();\r\n\r\n    }\r\n\r\n    private updateContainerPosition() {\r\n        const elClientRect = this.getBoundingClientRect(this._helperInputWrapper);\r\n        const elTop = elClientRect.top;\r\n        const elLeft = elClientRect.left;\r\n        const width = elClientRect.width;\r\n        const height = elClientRect.height;\r\n\r\n        let top = elTop;\r\n        let left = elLeft;\r\n        switch (this.position) {\r\n            case 'top':\r\n                top = elTop - height - 10;\r\n                break;\r\n            case 'bottom':\r\n                top = elTop + height + 10;\r\n                break;\r\n            case 'left':\r\n                left = elLeft - this.getBoundingClientRect(this._helperContainerElement).width - 10;\r\n                break;\r\n            case 'right':\r\n                left = elLeft + width + 10;\r\n                break;\r\n            case 'auto':\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        this.renderer.setStyle(this._helperContainerElement, 'top', top + 'px');\r\n        this.renderer.setStyle(this._helperContainerElement, 'left', left + 'px');\r\n    }\r\n\r\n    private getIcon() {\r\n        switch (this.type) {\r\n            case 'success':\r\n                return this.successIcon;\r\n            case 'info':\r\n                return this.infoIcon;\r\n            case 'warning':\r\n                return this.warningIcon;\r\n            case 'danger':\r\n                return this.dangerIcon;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    private show() {\r\n        if (this._helperContainerElement) {\r\n            this.renderer.addClass(this._helperContainerElement, 'show');\r\n            this.updateContainerPosition();\r\n        }\r\n    }\r\n\r\n    private hide() {\r\n        if (this._helperContainerElement) {\r\n            this.renderer.removeClass(this._helperContainerElement, 'show');\r\n        }\r\n    }\r\n\r\n    private updateMessage(message: string) {\r\n        if (this._messageElement) {\r\n            // this.renderer.setValue(this._messageElement, message);\r\n            this._messageElement.innerHTML = message;\r\n            console.log(message);\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NhInputHelperComponent } from './nh-input-helper.component';\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [NhInputHelperComponent],\r\n    declarations: [NhInputHelperComponent],\r\n    providers: []\r\n})\r\nexport class NhInputHelperModule {\r\n}\r\n","/**\r\n * Created by Administrator on 6/18/2017.\r\n */\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n// Services\r\nimport { NhTabService } from './nh-tab.service';\r\n\r\nimport { NhTabComponent } from './nh-tab.component';\r\nimport { NhTabPanelComponent } from './nh-tab-panel.component';\r\n\r\n// Directives\r\nimport { NhTabHostDirective } from './nh-tab-host.directive';\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [NhTabComponent, NhTabPanelComponent],\r\n    declarations: [NhTabComponent, NhTabPanelComponent, NhTabHostDirective],\r\n    providers: [NhTabService],\r\n})\r\nexport class NhTabModule {\r\n}\r\n"],"sourceRoot":""}