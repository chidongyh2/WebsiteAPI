function Generator(){}function generate_unique_id(){var n=new Generator;initialLoadId===""&&(initialLoadId="amiea"+n.getId())}function set_first_configurator_click_timestamp(){initialClickTimestamp===""&&(initialClickTimestamp=jQuery.now())}function set_first_visit_timestamp(){initialLoadTimestamp===""&&(initialLoadTimestamp=jQuery.now())}function amiea_tracking_send(){var t=initialLoadId,u=initialLoadTimestamp,n=initialClickTimestamp,f=amieaModTimestamp,e=amieaUseTime,i="",r="";n==""||n<0||jQuery.ajax({type:"POST",url:configurator_vars_array.ajax_url,data:{action:"amiea_safe_tracking",amiea_id:t,amiea_pageload:u,amiea_first_click:n,amiea_ts_modified:f,amiea_use_time:e,security:configurator_vars_array.ajax_nonce},beforeSend:function(){},success:function(){},complete:function(){}}).done(function(n){console&&console.log;i=n.success;r=n.error;i===t;r==="error"&&(response_error_message=n.error_message);return})}function colorAdviceController(){var n=[],u=0,t,r;if($("#caf-fieldset-line .caf-input").each(function(){$(this).is(":checked")&&(n[0]=parseInt($(this).attr("data-num")))}),only_two_fieldsets=!1,n[0]==3,$(".caf-fieldset").each(function(t){validate($(this))==!1?(u++,n[t+1]=0):$(this).find(".caf-input").each(function(){$(this).is(":checked")&&(n[t+1]=parseInt($(this).attr("data-num")))})}),only_two_fieldsets==!0&&(n[3]=0),console.log(caf_configurations_array),console.log(n[0]),console.log(n[1]),console.log(n[2]),console.log(n[3]),t=caf_configurations_array[n[0]][n[1]][n[2]][n[3]],u==0||u==1&&only_two_fieldsets==!0){if($("#caf-result-colors-wrapper").text(""),$("#caf-message-wrapper").text(""),t.length<=0)t="No product found. Please change hair color.",$("#caf-message-wrapper").html(t),cafUpdateImage(!1);else{for(i=0;i<t.length;i++)if(r="",caf_descriptions_array[t[i]]!=undefined){var f=caf_descriptions_array[t[i]].nice_name+" | "+caf_descriptions_array[t[i]].sn,e=caf_descriptions_array[t[i]].cd_en,o=caf_descriptions_array[t[i]].color;r+='<div class="caf-single-color-wrapper caf-color-temperature caf-color-temperature-'+caf_descriptions_array[t[i]].temperature+'">';r+='<div class="caf-single-color-color '+o+'"><\/div>';r+='<div class="caf-single-color-text-wrapper">';r+='<span class="caf-color-title">'+f+"<\/span>";r+='<span class="caf-color-description">'+e+"<\/span>";r+="<\/div>";r+="<\/div>";$("#caf-result-colors-wrapper").append(r)}else console.log("caf_descriptions_array[showValue[i]] undefined");cafUpdateImage(!0,n[1],n[3])}toggleCafMobileView()}deactivateOptionsIfnotValid(u,n);iFramePostMessage()}function deactivateOptionsIfnotValid(n,t){if($(".caf-input-wrapper").removeClass("caf-input-wrapper-disabled"),$(".caf-input-wrapper").find("input").removeAttr("disabled"),n<=1){var r="";for($(".caf-fieldset").each(function(){r+=validate($(this))==!1?"0":"1"}),i=0;i<caf_configurations_array[t[0]][t[1]][t[2]].length;i++)check_array_val=caf_configurations_array[t[0]][t[1]][t[2]][i],check_array_val!=undefined&&check_array_val.length==0&&($("#caf-fieldset-2 .caf-input-wrapper:eq("+i+")").addClass("caf-input-wrapper-disabled"),$("#caf-fieldset-2 .caf-input-wrapper:eq("+i+")").find("input").attr("disabled","disabled"))}}function validate(n){var t=0,i=n.each(function(n,i){$(i).find("input:radio").length>0&&$(i).find("input:radio:checked").length===0&&t++});return t>0?!1:!0}function loadConfig(n){console.log(n);jQuery.ajax({type:"GET",url:n,dataType:"xml",success:function(n){$(n).find("line").each(function(n){caf_configurations_array.push(n);caf_configurations_array[n]=[];$(this).find("skin_type").each(function(t){caf_configurations_array[n].push($(this).attr("name"));caf_configurations_array[n][t]=[];$(this).find("skin_tone").each(function(i){caf_configurations_array[n][t].push(i);caf_configurations_array[n][t][i]=[];$(this).find("hair_color").each(function(r){caf_configurations_array[n][t][i].push(r);caf_configurations_array[n][t][i][r]=[];$(this).find("product_color").each(function(){caf_configurations_array[n][t][i][r].push($(this).attr("name"))})})})})});console.log(caf_configurations_array);$(n).find("color_description").each(function(){caf_descriptions_array[$(this).attr("name")]=[];caf_descriptions_array[$(this).attr("name")].cd_en=jQuery.trim($(this).text());caf_descriptions_array[$(this).attr("name")].nice_name=$(this).attr("nice_name");caf_descriptions_array[$(this).attr("name")].sn=$(this).attr("sn");caf_descriptions_array[$(this).attr("name")].color=$(this).attr("color_class");caf_descriptions_array[$(this).attr("name")].temperature=$(this).attr("temperature")});$(n).find("image_skin_type").each(function(n){caf_images_array[n]=[];$(this).find("image_hair_color").each(function(t){caf_images_array[n][t]=jQuery.trim($(this).text())})});$(n).find("image_skin_type").each(function(n){$(this).find("image_hair_color").each(function(){$(this)[0].hasAttribute("natural")&&$(this).attr("natural")=="true"&&(caf_natural_images_array[n]=[],caf_natural_images_array[n]=jQuery.trim($(this).text()))})});console.log(caf_natural_images_array)}})}function resetAll(){$(".caf-input").prop("checked",!1);$("#caf-testresult-span").html("");$("#caf-result-colors-wrapper").text("");$("#caf-message-wrapper").html(makeSelectionText);cafUpdateImage(!1);$(".caf-input-wrapper").each(function(){$(this).removeClass("caf-input-wrapper-disabled");$(this).find("input").removeAttr("disabled")})}function adjustConfiguratorHeight(n){n==!0?$("#color-advice-result-wrapper").height($("#caf-form-col").height()):$("#color-advice-result-wrapper").css("height","auto")}function toggleCafMobileView(){var n=1140;$(window).width()<=n&&($("#caf-form-col").toggleClass("caf-form-col-toggled"),$(".caf-form-toggle-text-hide").toggle(),$(".caf-form-toggle-text-show").toggle(),$("#color-advice-form-wrapper").toggle(500,"swing"));$("div#caf-form-col").hasClass("caf-form-col-toggled")?($("#color-advice-result-wrapper").addClass("result-toggled"),$(window).width()<=n&&adjustConfiguratorHeight(!0)):($("#color-advice-result-wrapper").removeClass("result-toggled"),adjustConfiguratorHeight(!1));$("html, body").animate({scrollTop:10},500)}function cafUpdateImage(n,t,i){var r,u;n==undefined&&(n=!0);r="config_img.jpg";n==!0?(u=caf_images_array[t][i],$("#caf-result-image-wrapper img").attr("src","/images/helpfinder/color_advice/img/"+u),$("#caf-result-image-wrapper").removeClass("caf-placeholder-wrap")):($("#caf-result-image-wrapper").addClass("caf-placeholder-wrap"),$("#caf-result-image-wrapper img").attr("src","/images/helpfinder/color_advice/img/"+r))}function iFramePostMessage(){var n=$("main").height(),t=$("#caf-form-row .caf-form-col").height(),i,r;t>n&&(n=t);i=100;r="*";window.parent.postMessage("resize:"+(n+i),r)}var caf_configurations_array=[],caf_descriptions_array=[],caf_images_array=[],caf_natural_images_array=[],only_two_fieldsets=!1,makeSelectionText="",initialLoadId="",initialLoadTimestamp="",initialClickTimestamp="",amieaModTimestamp="",amieaUseTime="";Generator.prototype.rand=Math.floor(Math.random()*2e7+1)+Date.now();Generator.prototype.getId=function(){return this.rand++};$(".caf-input-wrapper").click(function(){set_first_configurator_click_timestamp()});$(".reset").on("click",function(){console.log("asdasd");resetAll()});$(".fresh-mobile").on("click",function(){console.log("quy test");resetAll()});$(".caf-input").on("click",function(){colorAdviceController()});$(".btn-refesh-mobile").on("click",function(){resetAll()});$("div.caf-form-toggle").on("click",function(){toggleCafMobileView()});$(".caf-placeholder-wrap").on("click",function(){toggleCafMobileView()});$("#caf-reset-all-button").on("tapstart",function(){resetAll()}).on("tapend",function(){resetAll()}).on("tap",function(){resetAll()}).on("singletap",function(){resetAll()}).on("taphold",function(){resetAll()}).on("doubletap",function(){resetAll()}).on("swipe",function(){resetAll()}).on("swipeup",function(){resetAll()}).on("swipedown",function(){resetAll()}).on("swipeleft",function(){resetAll()}).on("swiperight",function(){resetAll()});$("#caf-fieldset-line").change(function(){colorAdviceController()});$(document).ready(function(){generate_unique_id();set_first_visit_timestamp();$("#caf-message-wrapper").html(makeSelectionText);var n=window.location.href.replace("index.html","");loadConfig("color-advice")});$(window).resize(function(){});$(window).resize(function(){iFramePostMessage()});