function ProductSearchViewModel(){var n=this;n.listProduct=ko.observableArray([]);n.keyword=ko.observable();n.attributeName=ko.observable();n.attributeValueName=ko.observable();n.totalRows=ko.observable(0);n.pageSize=ko.observable(6);n.currentPage=ko.observable(1);n.totalPage=ko.observable(1);n.listPage=ko.observableArray([]);n.categoryName=ko.observable();n.categoryDescription=ko.observable();n.categoryImage=ko.observable();n.productCategoryTree=ko.observableArray([]);n.renderPage=function(t){if(n.totalRows(t),n.totalPage(Math.ceil(n.totalRows()/n.pageSize())),n.listPage([]),n.totalPage()>1)for(var i=1;i<=n.totalPage();i++)n.listPage.push({page:i})};n.searchPageIndex=function(t){n.currentPage(t.page);n.search()};n.firstPage=function(){n.currentPage(1);n.search();$("html, body").animate({scrollTop:$("#Products").offset().top-50},1e3)};n.lastPage=function(){n.currentPage(n.totalPage());n.search();$("html, body").animate({scrollTop:$("#Products").offset().top-50},1e3)};n.prevPage=function(){n.currentPage(n.currentPage()-1);n.search();$("html, body").animate({scrollTop:$("#Products").offset().top-50},1e3)};n.nextPage=function(){n.currentPage(n.currentPage()+1);n.search();$("html, body").animate({scrollTop:$("#Products").offset().top-50},1e3)};n.rendTree=function(t){_.each(t,function(t){t.state.show=ko.observable(t.state.opened);t.children&&t.children.length>0&&n.rendTree(t.children)})};n.search=function(){$.get("/search-product",{keyword:n.keyword(),attributeName:n.attributeName(),attributeValueName:n.attributeValueName(),page:n.currentPage(),pageSize:n.pageSize()},function(t){n.listProduct(t.items);n.renderPage(t.totalRows)})};$(document).ready(function(){n.keyword(keyword);n.attributeName(attributeName);n.attributeValueName(attributeValueName);n.listProduct(products);n.renderPage(totalRows);n.rendTree(treeData);n.productCategoryTree(treeData)})}var viewModel=new ProductSearchViewModel;ko.applyBindings(viewModel,document.getElementsByClassName("product-search")[0]);