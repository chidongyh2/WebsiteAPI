function ProductViewModel(){var n=this;n.listProductCategory=ko.observableArray([]);n.productCategoryId=ko.observable();n.productCategorySeoLink=ko.observable();n.listProduct=ko.observableArray([]);n.firstIndex=ko.observable(0);n.lastIndex=ko.observable(window.innerWidth<768?1:4);n.totalRows=ko.observable(0);n.pageSize=ko.observable(12);n.currentPage=ko.observable(1);n.totalPage=ko.observable(1);n.listPage=ko.observableArray([]);n.selectProductCategory=function(t){n.productCategoryId(t.Id);n.productCategorySeoLink(t.SeoLink);n.currentPage(1);n.search()};n.search=function(){$.get("/get-product-by-category",{seolink:n.productCategorySeoLink(),page:n.currentPage(),pageSize:n.pageSize()},function(t){n.listProduct(t.items);n.renderPage(t.totalRows)})};n.renderPage=function(t){if(n.totalRows(t),n.totalPage(Math.ceil(n.totalRows()/n.pageSize())),n.listPage([]),n.totalPage()>1)for(var i=1;i<=n.totalPage();i++)n.listPage.push({page:i})};n.searchPageIndex=function(t){n.currentPage(t.page);n.search()};n.firstPage=function(){n.currentPage(1);n.search();$("html, body").animate({scrollTop:$("#Products").offset().top-50},1e3)};n.lastPage=function(){n.currentPage(n.totalPage());n.search();$("html, body").animate({scrollTop:$("#Products").offset().top-50},1e3)};n.prevPage=function(){n.currentPage(n.currentPage()-1);n.search();$("html, body").animate({scrollTop:$("#Products").offset().top-50},1e3)};n.nextPage=function(){n.currentPage(n.currentPage()+1);n.search();$("html, body").animate({scrollTop:$("#Products").offset().top-50},1e3)};n.rendProductCategoryActive=function(){_.each(n.listProductCategory(),function(t,i){t.IsActive(i<=n.lastIndex()&&i>=n.firstIndex())})};n.nextIndex=function(){if(n.listProductCategory()&&n.lastIndex()<=n.listProductCategory().length-1){n.firstIndex(n.firstIndex()+1);n.lastIndex(n.lastIndex()+1);n.rendProductCategoryActive();var t=_.findIndex(n.listProductCategory(),function(t){return t.Id===n.productCategoryId()});t<n.firstIndex()&&(n.productCategoryId(n.listProductCategory()[n.firstIndex()].Id),n.selectProductCategory(n.listProductCategory()[n.firstIndex()]))}};n.prevIndex=function(){if(n.listProductCategory()&&n.firstIndex()>0){n.firstIndex(n.firstIndex()-1);n.lastIndex(n.lastIndex()-1);n.rendProductCategoryActive();var t=_.findIndex(n.listProductCategory(),function(t){return t.Id===n.productCategoryId()});t>n.lastIndex()&&(n.productCategoryId(n.listProductCategory()[n.lastIndex()].Id),n.selectProductCategory(n.listProductCategory()[n.lastIndex()]))}};$(document).ready(function(){_.each(productCategories,function(n){n.IsActive=ko.observable(!1)});n.listProductCategory(productCategories);n.productCategoryId(parseInt(productCategoryId));n.listProduct(products);n.renderPage(totalRows);n.rendProductCategoryActive()})}var viewModel=new ProductViewModel;ko.applyBindings(viewModel,document.getElementsByClassName("products")[0]);