function ProductDetailViewModel(){var n=this;n.productCategoryTree=ko.observableArray([]);n.listProductImage=ko.observableArray([]);n.productThumbnail=ko.observable();n.listCategory=ko.observableArray([]);n.listProductAttribute=ko.observableArray([]);n.listAttributeValue=ko.observableArray([]);n.listAttributeContent=ko.observableArray([]);n.productNo=ko.observable(0);n.totalMoney=ko.observable(0);n.rendProductCategoryActive=function(){_.each(n.listProductCategory(),function(t,i){t.IsActive(i<=n.lastIndex()&&i>=n.firstIndex())})};n.rendTree=function(t){_.each(t,function(t){t.state.show=ko.observable(t.state.opened);t.children&&t.children.length>0&&n.rendTree(t.children)})};n.selectThumbnail=function(t){if(t){n.productThumbnail(t.url);var r=$(".easyzoom").easyZoom(),i=r.data("easyZoom");i.teardown();i._init()}};n.renderAttribute=function(){var i,r,t;n.listAttributeValue([]);n.listAttributeContent([]);i=_.filter(n.listProductAttribute(),function(n){return!n.isSelfContent});i&&i.length>0&&(r=_.groupBy(i,function(n){return n.attributeId}),_.each(r,function(t){var i=[];_.each(t,function(n){i.push(n.attributeValueName)});n.listAttributeValue.push({attributeName:t[0].attributeName,values:i.join(", ")})}));t=_.filter(n.listProductAttribute(),function(n){return n.isSelfContent});t&&t.length>0&&_.each(t,function(n,t){n.isSelected=ko.observable(t===0)});n.listAttributeContent(t)};n.totalMoney=ko.computed(function(){return n.productNo()*productInfo.salePrice});n.addShoppingCart=function(t){t?n.productNo(n.productNo()+1):n.productNo()>0&&n.productNo(n.productNo()-1)};n.selectProductAttribute=function(t){_.each(n.listAttributeContent(),function(n){n.isSelected(!1)});t.isSelected(!0);window.innerWidth>768&&($("#comment").removeClass("active"),$("#liComment").removeClass("active"))};n.showTabComment=function(){_.each(n.listAttributeContent(),function(n){n.isSelected(!1)});$("#comment").addClass("active");$("#liComment").addClass("active")};$(document).ready(function(){n.rendTree(treeData);n.productCategoryTree(treeData);n.listProductImage(productImages);n.listCategory(productCategories);n.listProductAttribute(productAttributes);productInfo&&n.productThumbnail(productInfo.thumbnail);$("#product-image-silder").lightSlider({item:4,auto:!1,loop:!0,slideMove:1,speed:1500,pause:3e3,slideMargin:10,pauseOnHover:!1,controls:!0,prevHtml:'<img src="/images/facion/pev.png" />',nextHtml:'<img src="/images/facion/nex.png" />',pager:!1,responsive:[{breakpoint:800,settings:{item:4,slideMove:1}},{breakpoint:480,settings:{item:3,slideMove:1}}]});window.innerWidth>768&&$(".easyzoom").easyZoom({errorNotice:"Không tìm thấy ảnh",loadingNotice:"Đang tải ảnh"});n.renderAttribute()})}var viewModel=new ProductDetailViewModel;ko.applyBindings(viewModel,document.getElementsByClassName("product-detail")[0]);