@using Newtonsoft.Json.Serialization;
@model List<ProductCategorySearchViewModel>
@{
    var jsonSerializerSettings = new JsonSerializerSettings
    {
        ContractResolver = new CamelCasePropertyNamesContractResolver()
    };
}
@if (Model != null)
{
    <div id="product-categoty-hot-in-homepage">
        <div class="heading">
            <div class="container">
                <div class="row">
                    <div class="col-sm-12">
                        <partial name="_TitleBar" model="@Resource.ProductHot" />
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            @if (Model != null && Model.Any())
            {
                <div class="row">
                    <div class="col-sm-12">
                        <div class="btn-toolbar">
                            <div class="btn-group">
                                <a class="btn filter prev" href="javascript://" data-bind="visible: firstIndex() > 0, click: prevIndex" style="display: none">
                                    <img src="/images/facion/pev.png" />
                                </a>
                                <!--ko foreach: $root.listProductCategoryHot-->
                                <a class="btn filter item" href="javascript://" data-bind="css: {active: Id === $root.productCategoryId()}, click: $root.selectProductCategory.bind($data), visible: IsActive(), attr: {class : $index() >= $root.firstIndex() && $index()<= $root.lastIndex() ? 'btn filter item' : 'btn filter'}" style="display:none">
                                    <span data-bind=" text: Name"></span>
                                </a>
                                <!--/ko-->
                                <a class="btn filter nex" href="javascript://" data-bind="visible: $root.listProductCategoryHot() && lastIndex() < $root.listProductCategoryHot().length - 1, click: nextIndex" style="display: none">
                                    <img src="/images/facion/nex.png" />
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div data-bind="attr:{id: 'product-hot-slider-' + productCategoryId()},">
                            <!-- ko foreach: listProductHot-->
                            <div class="item">
                                <div class="product-item">
                                    <div class="image-content">
                                        <a data-bind="attr: {href: 'san-pham/' + seoLink + '.htm', title: name}">
                                            <img class="img-responsive lazy" data-bind="attr: { src: '/image?url=' + '@ViewBag.Url' + thumbnail + '&width=600&height=400', alt: name }"
                                                 onerror="this.src='/images/no-image.png'" />
                                            <span class="img-overlay"></span>
                                        </a>
                                    </div>
                                    <div class="wrap-text-content">
                                        <h3 class="product-code" data-bind="text: id"></h3>
                                        <div class="title">
                                            <a data-bind="attr: {href: 'san-pham/' + seoLink + '.htm', title: name}, trimText: name, trimTextLength: 50">
                                            </a>
                                        </div>
                                        <div class="description">
                                            <span data-bind="trimText: description, trimTextLength: 50"></span>
                                        </div>
                                        <hr />
                                        <div class="price">
                                            <span data-bind="text: formatNumberic(salePrice,  'N0') + ' VNĐ'"></span>
                                        </div>
                                        <div class="star">
                                            @for (var i = 1; i <= 5; i++)
                                            {
                                                <i class="la la-star"></i>
                                            }
                                        </div>
                                        <div class="read-more">
                                            <a data-bind="attr: {href: 'san-pham/' + seoLink + '.htm', title: name}"
                                               class="btn btn-main"><i class="la la-arrow-right"></i>@Resource.ViewMore</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--/ko-->
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
}
<script type="text/javascript">
        var productCategoryHots = @(ViewBag.ListProductCategoryHot != null ? Html.Raw(JsonConvert.SerializeObject(ViewBag.ListProductCategoryHot)) : "[]");
        var productCategoryHotId = "@ViewBag.ProductCategoryId";
        var products = @(ViewBag.ListProduct != null ? Html.Raw(JsonConvert.SerializeObject(ViewBag.ListProduct, jsonSerializerSettings)) : "[]");
</script>
